const crypto = require("crypto");
const { execSync } = require("child_process");
const { exec } = require('child_process');
const util = require('util');
const execPromise = util.promisify(exec);
const { count } = require('console');
const fs = require('fs');
const os = require('os');
const path = require('path');
const { callbackify } = require('util');
const { isNumberObject, isBooleanObject } = require('util/types');
const { send } = require("process");
var restartCuzOfFirstStart = false;

// Cool Math Functions

// TODO: mathRandomadasdsad

function E(script) {
    new CSInterface().evalScript(script);
}

function JerryFlowgetRandomInRange(min, max) {
    return Math.random() * (max - min) + min;
}

async function LoopDelay(ms) {
    return new Promise(resolve => setTimeout(resolve, ms));
}

function clearAddPresetPannel()
{
    var PresetSetPannel = document.getElementById("PresetSetPannel");
    PresetSetPannel.innerHTML = '';
}

function getEncrypt(key) {
    const LIB = {
      a: 1,
      b: 2,
      c: 3,
      d: 4,
      e: 5,
      f: 6,
      g: 7,
      h: 8,
      i: 9,
      j: 10,
      k: 11,
      l: 12,
      m: 13,
      n: 14,
      o: 15,
      p: 16,
      q: 17,
      r: 18,
      s: 19,
      t: 20,
      u: 21,
      v: 22,
      w: 23,
      x: 24,
      y: 25,
      z: 26,
      A: 27,
      B: 28,
      C: 29,
      D: 30,
      E: 31,
      F: 32,
      G: 33,
      H: 34,
      I: 35,
      J: 36,
      K: 37,
      L: 38,
      M: 39,
      N: 40,
      O: 41,
      P: 42,
      Q: 43,
      R: 44,
      S: 45,
      T: 46,
      U: 47,
      V: 48,
      W: 49,
      X: 50,
      Y: 51,
      Z: 52,
      0: 53,
      1: 54,
      2: 55,
      3: 56,
      4: 57,
      5: 58,
      6: 59,
      7: 60,
      8: 61,
      9: 62,
      "!": 63,
      "@": 64,
      "#": 65,
      $: 66,
      "%": 67,
      "^": 68,
      "&": 69,
      "*": 70,
      "(": 71,
      ")": 72,
      "-": 73,
      "=": 74,
      "+": 75,
      "[": 76,
      "]": 77,
      "{": 78,
      "}": 79,
      ";": 80,
      ":": 81,
      "'": 82,
      '"': 83,
      "\\": 84,
      "|": 85,
      ",": 86,
      ".": 87,
      "<": 88,
      ">": 89,
      "/": 90,
      "?": 91,
      _: 92,
      " ": 93,
      ä: 94,
      ö: 95,
      ü: 96,
      Ä: 97,
      Ö: 98,
      Ü: 99,
    };
    return LIB[key] !== undefined ? LIB[key] : 0;
}

function getDecrypt(key) {
const reversedLIB = {
    1: "a",
    2: "b",
    3: "c",
    4: "d",
    5: "e",
    6: "f",
    7: "g",
    8: "h",
    9: "i",
    10: "j",
    11: "k",
    12: "l",
    13: "m",
    14: "n",
    15: "o",
    16: "p",
    17: "q",
    18: "r",
    19: "s",
    20: "t",
    21: "u",
    22: "v",
    23: "w",
    24: "x",
    25: "y",
    26: "z",
    27: "A",
    28: "B",
    29: "C",
    30: "D",
    31: "E",
    32: "F",
    33: "G",
    34: "H",
    35: "I",
    36: "J",
    37: "K",
    38: "L",
    39: "M",
    40: "N",
    41: "O",
    42: "P",
    43: "Q",
    44: "R",
    45: "S",
    46: "T",
    47: "U",
    48: "V",
    49: "W",
    50: "X",
    51: "Y",
    52: "Z",
    53: "0",
    54: "1",
    55: "2",
    56: "3",
    57: "4",
    58: "5",
    59: "6",
    60: "7",
    61: "8",
    62: "9",
    63: "!",
    64: "@",
    65: "#",
    66: "$",
    67: "%",
    68: "^",
    69: "&",
    70: "*",
    71: "(",
    72: ")",
    73: "-",
    74: "=",
    75: "+",
    76: "[",
    77: "]",
    78: "{",
    79: "}",
    80: ";",
    81: ":",
    82: "'",
    83: '"',
    84: "\\",
    85: "|",
    86: ",",
    87: ".",
    88: "<",
    89: ">",
    90: "/",
    91: "?",
    92: "_",
    93: " ",
    94: "ä",
    95: "ö",
    96: "ü",
    97: "Ä",
    98: "Ö",
    99: "Ü",
};

return reversedLIB[key] !== undefined ? reversedLIB[key] : "";
}

function getMultyHashListArray(key, version) {
if (key >= 0 && key < 10 && version >= 0 && version < 100) {
    let selectedArray = [];
    const hashLists = [
    {
        0: [
        940680316, 952682420, 98323128, 477287489, 565464977, 553091107,
        789687505, 351627731, 793429546, 191338505,
        ],
        1: [
        298481559, 47030868, 599600903, 871974035, 746826894, 608967669,
        307949125, 110819324, 968293157, 296399320,
        ],
        2: [
        142026028, 589851147, 161299906, 131156767, 369839956, 267038263,
        132464, 255935443, 23446126, 53932234,
        ],
        3: [
        849877823, 751980324, 54642697, 218536742, 951778754, 675845205,
        837639643, 139704040, 187447301, 65219902,
        ],
        4: [
        19613660, 419719645, 293185380, 951300848, 477444034, 665798452,
        634865585, 344634222, 356172885, 578366598,
        ],
        5: [
        896068483, 783833719, 112942013, 320758296, 907066790, 167398411,
        79461088, 728115630, 673480760, 432609266,
        ],
        6: [
        631561335, 187421555, 474410062, 393473300, 66310498, 61470791,
        897913940, 622711961, 452263369, 72160968,
        ],
        7: [
        781745284, 762289426, 514354541, 898327556, 550736784, 673078996,
        495649868, 15573728, 67711532, 742651076,
        ],
        8: [
        837754077, 951677524, 931607708, 964501262, 594470451, 842145539,
        642818570, 590275165, 598228782, 274343653,
        ],
        9: [
        405697799, 347376174, 802476767, 128316496, 261116834, 401567948,
        579039665, 533742494, 299782561, 765821824,
        ],
    },
    {
        0: [
        39565753, 511106775, 473905447, 850453283, 571332845, 48817081,
        514311575, 351139535, 524154120, 699034632,
        ],
        1: [
        822539804, 52659453, 776979348, 164974566, 220814336, 71879278,
        545568432, 55291256, 349431389, 457887317,
        ],
        2: [
        615829918, 151099311, 444465622, 715569491, 615625314, 407342117,
        879629989, 286023358, 31223138, 796957711,
        ],
        3: [
        136357783, 279395311, 893460105, 818481985, 297961301, 825555847,
        940950813, 632653545, 443398262, 155150300,
        ],
        4: [
        688672302, 966073448, 613638035, 413052928, 288934448, 36987214,
        532094343, 642973093, 717104755, 746691913,
        ],
        5: [
        701774813, 199874559, 290785059, 230590503, 41838832, 97267656,
        825726251, 851075548, 199179089, 966897153,
        ],
        6: [
        99443428, 953471683, 80727465, 280566065, 65374177, 354170934,
        429638414, 62533049, 828127830, 535042808,
        ],
        7: [
        110265891, 82674931, 679396358, 824778617, 521736868, 442223577,
        455753396, 443864648, 900937077, 219697686,
        ],
        8: [
        29001109, 213405504, 551481225, 343550206, 582508134, 327684718,
        166753888, 399092102, 79397729, 272958791,
        ],
        9: [
        953982321, 334235665, 704333407, 650257220, 469701826, 850704206,
        373712310, 796443627, 475163103, 811851331,
        ],
    },
    {
        0: [
        52989937, 144281027, 168638717, 41994226, 327948514, 512517325,
        984414846, 934769469, 56498789, 142363173,
        ],
        1: [
        800736902, 448911391, 107942429, 704415911, 637625471, 461662824,
        23187983, 631444800, 187404707, 746572765,
        ],
        2: [
        115571932, 873671242, 441124532, 715329191, 387200919, 170582781,
        675650474, 4353714, 387579189, 445702689,
        ],
        3: [
        581754637, 453566391, 871837178, 564075507, 45191568, 768972808,
        345060190, 82169129, 476279889, 568258055,
        ],
        4: [
        147256360, 203912447, 975798486, 374707061, 668073789, 232408391,
        959035930, 995486053, 882166147, 86222305,
        ],
        5: [
        121504782, 675555912, 808397122, 344131387, 599204319, 43011531,
        873070369, 460293072, 300671933, 766860732,
        ],
        6: [
        420888539, 499461161, 191334870, 719197875, 419642922, 779146690,
        422629336, 721743721, 258061131, 52910691,
        ],
        7: [
        43234271, 454330507, 917413791, 12628877, 398941951, 948972782,
        951675711, 219898379, 387510149, 653163083,
        ],
        8: [
        323934873, 425893864, 782645231, 651448857, 475768586, 901720203,
        625188747, 160234632, 355329622, 804266432,
        ],
        9: [
        344148503, 656085762, 911318561, 858395059, 412179641, 286345132,
        192464250, 454601661, 593677032, 450282293,
        ],
    },
    {
        0: [
        448013743, 138739373, 616986856, 54519866, 985752046, 588971315,
        569014080, 991137154, 535857317, 806337334,
        ],
        1: [
        839617807, 238655952, 43292041, 790858634, 672649921, 167036102,
        359045499, 958774161, 710086129, 769413185,
        ],
        2: [
        589236063, 149234963, 746323245, 263252846, 576732578, 958294657,
        32680334, 440694050, 71597993, 928413944,
        ],
        3: [
        603281197, 279811653, 220986721, 459468975, 586504571, 257742252,
        265696485, 569332678, 126499300, 350988267,
        ],
        4: [
        575822353, 497358893, 192181342, 227647964, 563897453, 403269992,
        864919811, 690700188, 331847942, 403338861,
        ],
        5: [
        343067702, 631137090, 593398149, 214223633, 178168729, 204792650,
        892716655, 719294010, 147744126, 11631096,
        ],
        6: [
        223567032, 105856563, 67140016, 796515326, 913730416, 407280847,
        736918010, 431661702, 820495257, 815293134,
        ],
        7: [
        708448982, 141342561, 365724549, 668540824, 269878600, 286775676,
        961613900, 222941471, 649034678, 948556484,
        ],
        8: [
        906497218, 857852558, 482927962, 647106421, 782736096, 915992287,
        721145711, 347805277, 536928831, 799323939,
        ],
        9: [
        460427435, 795497957, 44677947, 560385035, 409701706, 686654492,
        174160719, 569616455, 421571007, 247466546,
        ],
    },
    {
        0: [
        685595758, 703035500, 124216091, 848705714, 79778183, 841744087,
        9758572, 122323855, 771658531, 121271950,
        ],
        1: [
        943756372, 188315266, 512477319, 600622087, 387675232, 248672468,
        115144174, 410445735, 37401983, 487338208,
        ],
        2: [
        613751529, 591917222, 564302168, 320207884, 535310431, 147664317,
        4431815, 460016536, 380539198, 473827661,
        ],
        3: [
        339396404, 639377907, 228500472, 731816794, 170246809, 90998603,
        924421655, 659131575, 354678893, 222709402,
        ],
        4: [
        195599365, 845941294, 77405817, 496377085, 107015437, 404200446,
        898364148, 218445276, 960269025, 700897253,
        ],
        5: [
        455704603, 653698260, 851079121, 261834421, 509681127, 217712050,
        530633959, 522088801, 773779136, 554318653,
        ],
        6: [
        921547855, 953953821, 90020313, 985268974, 832708755, 11766701,
        290852867, 41434448, 461032902, 459286346,
        ],
        7: [
        988328585, 636764914, 927325461, 277231707, 552074937, 758858337,
        432853962, 179992985, 802602128, 444027263,
        ],
        8: [
        66447587, 175377056, 156947036, 975771554, 224604486, 266991329,
        387520933, 716958719, 844882027, 688963169,
        ],
        9: [
        525285245, 267171326, 631653484, 966293592, 576289159, 944255193,
        857795454, 987300386, 640141082, 495043422,
        ],
    },
    {
        0: [
        20091763, 996329856, 394746268, 395082006, 681097837, 514717503,
        926644424, 447899960, 315902458, 155841839,
        ],
        1: [
        999765827, 27325386, 214760325, 987672846, 730156961, 663105490,
        971555710, 697811004, 750609472, 221807047,
        ],
        2: [
        133838407, 718476386, 673118032, 33982891, 507277635, 887690603,
        316118273, 380450356, 675884448, 23004516,
        ],
        3: [
        601101669, 663900291, 478773877, 399333452, 576780634, 478964762,
        717487627, 57824951, 839263858, 510910205,
        ],
        4: [
        492348700, 544461435, 470107154, 536024994, 976155771, 916801653,
        555988156, 370752252, 620552347, 503982703,
        ],
        5: [
        484572109, 371641602, 399436158, 878454319, 570778747, 706058604,
        237394593, 435987471, 313348543, 915853371,
        ],
        6: [
        98660793, 17396932, 135626594, 92206272, 497387334, 836357930,
        365390782, 90437495, 8204504, 822779996,
        ],
        7: [
        246229412, 987594026, 269816948, 775789807, 824979948, 492376030,
        136964159, 748426846, 837036296, 712512130,
        ],
        8: [
        902049971, 719152449, 870428274, 405272852, 370979903, 817681669,
        590456030, 684461712, 699661091, 18438599,
        ],
        9: [
        53972579, 259297177, 660774467, 289701189, 360099414, 966880674,
        168810795, 24327747, 584144449, 760892558,
        ],
    },
    {
        0: [
        882229661, 399598640, 385185715, 117152116, 259583630, 661819582,
        929979098, 983500340, 407233187, 75898598,
        ],
        1: [
        111459075, 998784425, 810998470, 379405546, 733723302, 362835956,
        279207910, 844388705, 440902593, 861573045,
        ],
        2: [
        177392195, 574414786, 601370839, 160799768, 60211161, 750637290,
        451218822, 384952533, 79514277, 327167895,
        ],
        3: [
        650730247, 258233165, 789950044, 954255768, 942972766, 55217042,
        413295587, 426859036, 652215447, 534074347,
        ],
        4: [
        758720808, 751837686, 745847561, 262135901, 167294254, 639575704,
        829606467, 883979400, 973344432, 106392036,
        ],
        5: [
        590963189, 228181337, 585683859, 893158003, 548402556, 453636431,
        509888000, 416200243, 988347669, 874769731,
        ],
        6: [
        470780424, 928420707, 551357171, 485431456, 619154157, 227322331,
        708804148, 730652962, 40673506, 75920548,
        ],
        7: [
        587180452, 42607622, 587089315, 958013593, 994002067, 837181204,
        479674268, 553711439, 434820971, 646241231,
        ],
        8: [
        166119570, 206558086, 383906551, 930328941, 243946049, 334516240,
        710634821, 103253729, 478427758, 256199623,
        ],
        9: [
        227979909, 608806605, 170863583, 222664549, 134358796, 360220952,
        17952032, 310905358, 375417500, 485890556,
        ],
    },
    {
        0: [
        57407278, 713984590, 416905511, 776086829, 359933075, 196298995,
        197666936, 844696632, 840557494, 248963865,
        ],
        1: [
        870088135, 358112312, 521791349, 48422563, 435384152, 190339733,
        414542352, 999935952, 211466637, 868884703,
        ],
        2: [
        949355863, 729557714, 306055678, 499695972, 656721435, 883090054,
        45593659, 556412993, 731551328, 886373034,
        ],
        3: [
        661234262, 50680680, 460598814, 559606796, 238944633, 992510483,
        404094305, 895388909, 143032161, 547467277,
        ],
        4: [
        497466913, 51684627, 398293873, 303374198, 576757051, 896593012,
        6723827, 420450406, 470412153, 378705922,
        ],
        5: [
        473350938, 724074448, 407023637, 507649588, 464159930, 194708211,
        31314062, 43457661, 412742197, 812287779,
        ],
        6: [
        185856774, 507207568, 156070544, 336193921, 303143658, 406154223,
        92148938, 538030393, 750549007, 280749233,
        ],
        7: [
        693540012, 619605600, 395443484, 295591207, 811415906, 217913959,
        713021325, 158544152, 113325666, 51284945,
        ],
        8: [
        667890407, 100459197, 579973845, 894785343, 247291611, 71129783,
        517009108, 636733686, 865540273, 514910468,
        ],
        9: [
        890023925, 558117749, 106962626, 168688515, 936253781, 843867444,
        881072750, 572705835, 498174206, 412689519,
        ],
    },
    {
        0: [
        143556628, 144404828, 2308498, 387013836, 420062436, 736272071,
        298008166, 153969755, 173271341, 229942831,
        ],
        1: [
        987161874, 320267757, 194239580, 887155961, 541221788, 94417396,
        188523259, 198954842, 955922012, 318041166,
        ],
        2: [
        975793414, 23257823, 392381033, 287975816, 597323035, 234124660,
        437334881, 500949849, 756487997, 127440507,
        ],
        3: [
        423450784, 327587032, 465925098, 552704821, 610934911, 568988393,
        478762692, 159741383, 661085136, 930806937,
        ],
        4: [
        137361821, 37322622, 20932229, 935745593, 965038323, 608539294,
        486090081, 589283171, 766003759, 608325466,
        ],
        5: [
        878237704, 842007846, 642793734, 56084343, 44306125, 50183072,
        397295769, 175819915, 105759431, 479593680,
        ],
        6: [
        749493235, 201520925, 969838444, 926863102, 682398774, 440997634,
        349053455, 114141379, 311584011, 76347510,
        ],
        7: [
        913998698, 760401166, 773952247, 428971230, 451709023, 819527136,
        529012230, 329776656, 491551013, 172969830,
        ],
        8: [
        634416226, 951825329, 560741299, 863808240, 968233910, 264107644,
        109707682, 131043383, 254143782, 271288303,
        ],
        9: [
        314173866, 17150420, 224923910, 447161721, 223578635, 664580221,
        786273981, 962477491, 296109025, 109086720,
        ],
    },
    {
        0: [
        458601621, 202728086, 481835046, 48756045, 262156282, 949070432,
        892942239, 72368157, 572325048, 737103142,
        ],
        1: [
        288412867, 243220791, 535077104, 456474047, 495278310, 39483557,
        794233898, 283948614, 484932313, 343975485,
        ],
        2: [
        379145902, 511536457, 195904243, 748875277, 283176643, 654589819,
        215661398, 346971376, 123928847, 303451195,
        ],
        3: [
        273735065, 181379584, 915433715, 47858103, 305173127, 27133745,
        288777600, 220090693, 441635619, 991354797,
        ],
        4: [
        754312919, 666060646, 831764797, 748082142, 292720820, 167544240,
        828312848, 129565949, 722657129, 30809010,
        ],
        5: [
        801784460, 174172280, 57714106, 631985974, 501223953, 724768004,
        817296265, 854703996, 380152404, 976776401,
        ],
        6: [
        102589932, 8807720, 846949796, 540444898, 333956493, 779060623,
        752666641, 556185915, 523173913, 991792326,
        ],
        7: [
        29071281, 671674657, 612187298, 239092722, 204985579, 866240014,
        272032231, 184844827, 794611658, 869222916,
        ],
        8: [
        250397732, 876595327, 732584618, 262779853, 973504435, 318770766,
        676123750, 534987156, 932156429, 115263172,
        ],
        9: [
        955664052, 361823057, 15661448, 706776977, 167701326, 25725803,
        966143362, 585627612, 399943960, 43161875,
        ],
    },
    {
        0: [
        407240403, 976774535, 841810745, 632799343, 899950104, 639200207,
        456278356, 361561015, 323626346, 319560463,
        ],
        1: [
        872207038, 503611938, 846816255, 660306456, 75928624, 651984118,
        18337819, 457409611, 224028392, 614350545,
        ],
        2: [
        426562174, 46222098, 606178054, 450576779, 557981028, 847812039,
        79202574, 193791636, 434356019, 526367894,
        ],
        3: [
        430227114, 310373871, 412121935, 451292087, 229689861, 620204797,
        420171367, 948684348, 555085441, 941773729,
        ],
        4: [
        300451312, 446660625, 166540999, 55341532, 219463610, 430540016,
        359418168, 804631958, 643583809, 690297476,
        ],
        5: [
        521828848, 8093869, 475830444, 247842473, 348763609, 360519088,
        501074624, 685327832, 952955716, 738134260,
        ],
        6: [
        97227743, 55759876, 835412126, 519505912, 737222553, 647823417,
        797711600, 971824485, 942332369, 813184491,
        ],
        7: [
        90855991, 732223578, 578728354, 759667040, 161490151, 475887496,
        691758151, 582995945, 66819106, 393159861,
        ],
        8: [
        713214140, 811253333, 525087366, 253000273, 441908454, 411739996,
        786548721, 463932624, 639841666, 87013136,
        ],
        9: [
        838100012, 657738267, 785781359, 707199920, 988164971, 149779858,
        626407571, 403506870, 504081530, 826292907,
        ],
    },
    {
        0: [
        851198390, 801499588, 888399726, 333530374, 269627217, 264723588,
        961504104, 207596133, 177908660, 881745583,
        ],
        1: [
        931461360, 878843905, 747818562, 620573143, 544876665, 929852851,
        190929105, 386894086, 789537869, 622503435,
        ],
        2: [
        457839037, 273609847, 878076423, 823899094, 744072274, 50574238,
        943516057, 625775033, 707315799, 776418675,
        ],
        3: [
        118530096, 157878521, 662605966, 909702598, 604314439, 860999436,
        254227294, 7072174, 591822138, 568912162,
        ],
        4: [
        634722200, 293526954, 121391182, 435570158, 73219235, 718429312,
        386916978, 606437253, 227316122, 191960173,
        ],
        5: [
        81523324, 571878290, 982979507, 650593420, 772174797, 811822504,
        171535756, 888270272, 290173601, 509430677,
        ],
        6: [
        576879077, 396215026, 513032739, 875165475, 8971865, 217360963,
        51609433, 789943101, 461286994, 722802889,
        ],
        7: [
        747173014, 358058744, 811484486, 849132583, 364433691, 682457715,
        756732020, 803135361, 305446069, 629856850,
        ],
        8: [
        681204121, 432384904, 914319425, 946800893, 335357831, 515273955,
        404194209, 817413841, 944321437, 678890661,
        ],
        9: [
        916854238, 231329985, 92842442, 928195576, 789759787, 822231655,
        227432753, 775960358, 475361776, 53869221,
        ],
    },
    {
        0: [
        936619006, 901535880, 83435200, 719476864, 955395750, 71040088,
        385645937, 70433553, 230770752, 181748880,
        ],
        1: [
        388735359, 520730360, 117132313, 574700728, 750548290, 706475614,
        677604618, 980585483, 805214128, 527982923,
        ],
        2: [
        48792404, 746083890, 74010576, 786608872, 515856558, 993502591,
        18943259, 594762977, 914498155, 867375940,
        ],
        3: [
        252132360, 807988691, 252094255, 515688434, 37774906, 647918133,
        510465176, 577701781, 830809456, 23642341,
        ],
        4: [
        903988634, 511477765, 494592450, 215379819, 218608925, 287766739,
        784937953, 916525185, 952897656, 137710012,
        ],
        5: [
        835355890, 747374578, 901098207, 153972456, 984215773, 751379155,
        318671882, 227240414, 660058241, 98959759,
        ],
        6: [
        843993246, 556798505, 312708867, 886197485, 659941576, 374877711,
        697601599, 33909676, 881490998, 131243928,
        ],
        7: [
        943660888, 969780473, 144804150, 83426459, 807297120, 56784977,
        28653009, 147695095, 114188353, 293573205,
        ],
        8: [
        658298331, 911572664, 504753689, 858450864, 470265056, 863638350,
        532261641, 290285254, 624466234, 867364660,
        ],
        9: [
        417912274, 309123047, 145494590, 282060053, 778460115, 169200864,
        383344488, 226663295, 292448062, 270653163,
        ],
    },
    {
        0: [
        621131616, 490746705, 579330152, 531894620, 93475476, 506768489,
        981171192, 24558493, 725754302, 693229215,
        ],
        1: [
        928210494, 892249799, 499744718, 772451216, 753175444, 691830013,
        46704597, 733865629, 184987271, 138666367,
        ],
        2: [
        616984683, 450534091, 84731348, 994099817, 561181721, 713956935,
        837065937, 435166376, 635561489, 646469413,
        ],
        3: [
        165989430, 168304410, 205344235, 248941804, 201340354, 683120574,
        612293373, 559210875, 125182901, 302354212,
        ],
        4: [
        726100315, 285259821, 685879284, 448478539, 593894358, 187555477,
        763860524, 817115452, 562965344, 301734463,
        ],
        5: [
        857105983, 954146202, 323154756, 572548304, 770848525, 142979924,
        230222814, 834409937, 979265829, 312377507,
        ],
        6: [
        924020342, 371698983, 187617730, 66524574, 457694460, 903396916,
        861231015, 805108790, 982534885, 193409812,
        ],
        7: [
        270400004, 960927675, 653182289, 212052878, 756554889, 63114284,
        297425830, 972734418, 271992090, 824995460,
        ],
        8: [
        237115829, 189391727, 827125544, 442308742, 307164431, 691804962,
        769360818, 885767897, 319595045, 581687359,
        ],
        9: [
        813021560, 135357437, 299440363, 268989116, 263945863, 810709222,
        580157301, 901746133, 539724118, 825096825,
        ],
    },
    {
        0: [
        687472706, 223286313, 509122748, 497838836, 355808464, 117139257,
        815725048, 908279923, 241547573, 540047218,
        ],
        1: [
        915270501, 318938407, 187921718, 260478642, 265255722, 357980542,
        539206582, 126334551, 683446538, 893012821,
        ],
        2: [
        595209587, 483000530, 546634255, 95155118, 426455149, 449593795,
        106792581, 604340676, 650659351, 269610948,
        ],
        3: [
        144108755, 224328926, 293339898, 454164875, 664714177, 493624294,
        164500007, 156815596, 701888653, 878896542,
        ],
        4: [
        764135199, 912134632, 850450400, 899319877, 625912035, 220222899,
        905025551, 720136343, 555536973, 158297324,
        ],
        5: [
        570052778, 405682439, 666691356, 712605305, 81295504, 47762723,
        699739188, 832131087, 530995126, 592221958,
        ],
        6: [
        59344077, 147981741, 792167420, 951240324, 419925619, 769948774,
        280600666, 105565271, 186090413, 187746656,
        ],
        7: [
        620061825, 890646860, 125950972, 23678914, 516948904, 519595159,
        892398235, 52719414, 195170871, 135680222,
        ],
        8: [
        936181553, 509478258, 695361490, 317619021, 163637265, 686210861,
        189451670, 533862850, 36910269, 698667202,
        ],
        9: [
        116108981, 293108102, 113175675, 151152077, 52436029, 177847994,
        627816627, 397616147, 819015999, 250476484,
        ],
    },
    {
        0: [
        758869816, 561752097, 54086963, 205823158, 164041179, 679521056,
        404309746, 789788613, 619778070, 87945978,
        ],
        1: [
        306715114, 96270482, 597347723, 809432434, 592427234, 950495452,
        991152606, 248680743, 601899317, 200002511,
        ],
        2: [
        376464113, 117717908, 933577972, 969388260, 737856596, 607650870,
        446054031, 817569173, 474923603, 423877340,
        ],
        3: [
        19375580, 122630661, 735076873, 500390794, 52533063, 890244545,
        211398208, 236914083, 813989631, 23985743,
        ],
        4: [
        262288769, 212295834, 55962153, 977223973, 756888901, 528446414,
        639932749, 920037733, 959574678, 202484758,
        ],
        5: [
        672165095, 413338666, 508594675, 226762402, 146994078, 696465344,
        710210945, 296365783, 955525651, 502645532,
        ],
        6: [
        348046572, 419036958, 715134454, 499698725, 427303878, 65630804,
        837914794, 367784104, 608378310, 996133364,
        ],
        7: [
        393805514, 210612507, 389368806, 424862898, 735134933, 259987790,
        471872521, 342911066, 747564989, 867074524,
        ],
        8: [
        591385250, 198866314, 923263594, 788154980, 307867706, 454884294,
        157723445, 766847572, 346469138, 204704969,
        ],
        9: [
        567394980, 807893813, 298137803, 36318258, 427153496, 317794715,
        366069253, 981313234, 304571986, 178134523,
        ],
    },
    {
        0: [
        757581580, 174895539, 943431400, 354828669, 359768635, 206517968,
        624952560, 937345546, 611051321, 773769234,
        ],
        1: [
        207924666, 622027099, 62255589, 749011191, 679760957, 610504107,
        347085297, 813866158, 793295424, 578369098,
        ],
        2: [
        616884809, 750713809, 569636211, 553851836, 457884370, 181016555,
        4440836, 924292427, 667969985, 685471533,
        ],
        3: [
        198390519, 560380954, 478129847, 510888880, 167558777, 330446251,
        996908138, 906937759, 629199122, 120842388,
        ],
        4: [
        817743362, 833322189, 896645541, 318040426, 173264823, 154430680,
        202663100, 527895290, 192073536, 667527460,
        ],
        5: [
        746838596, 371537849, 759319808, 631312647, 865102509, 923447924,
        545034267, 312530434, 825707211, 485107193,
        ],
        6: [
        743423479, 70013154, 915381831, 263293123, 377326183, 27508896,
        185981674, 815094119, 55544379, 313797311,
        ],
        7: [
        957335561, 67796562, 488738856, 74587414, 104710166, 947903164,
        559006629, 305548701, 572958518, 337802961,
        ],
        8: [
        216120843, 995534981, 78156226, 430534077, 817696899, 335230469,
        543437855, 999844814, 854248257, 277608450,
        ],
        9: [
        584677113, 600982591, 800847868, 52009276, 530315323, 431320783,
        765919, 258827120, 95898322, 124415797,
        ],
    },
    {
        0: [
        488378949, 492127919, 907710551, 824834985, 422981193, 377511973,
        594299395, 683100035, 469148563, 134775643,
        ],
        1: [
        367166174, 448180811, 17094880, 332112100, 273667237, 288401775,
        900492906, 902790828, 721647835, 1773650,
        ],
        2: [
        701641336, 822362835, 179470584, 315440627, 783477400, 508614562,
        962947823, 891174870, 614117579, 766496254,
        ],
        3: [
        1338771, 248838432, 698394255, 628743918, 796000353, 121551339,
        44113154, 528148014, 75828755, 123252109,
        ],
        4: [
        872761715, 777084244, 725539172, 990367006, 609523764, 964626392,
        131904170, 68422062, 534493303, 263701073,
        ],
        5: [
        956972519, 709687601, 164436877, 978330311, 268266161, 459452733,
        350328980, 840771563, 191821674, 651712219,
        ],
        6: [
        408644805, 570007378, 242369635, 857282583, 198297968, 392019228,
        37894660, 222474267, 163074038, 712429134,
        ],
        7: [
        501881028, 55502927, 124009687, 333688897, 461030283, 22994665,
        111906947, 60646792, 789914123, 337058384,
        ],
        8: [
        215706199, 6046588, 270234410, 976469257, 942615078, 697515107,
        614583486, 951288335, 304284002, 438232527,
        ],
        9: [
        97620276, 141205595, 342535845, 608070935, 441861369, 725705195,
        769711749, 145812443, 621672699, 172189673,
        ],
    },
    {
        0: [
        321465726, 940614061, 529514220, 573267815, 494678080, 860429080,
        163588837, 463410448, 148580617, 399669563,
        ],
        1: [
        997857073, 2131782, 974623097, 284064862, 256863001, 956785210,
        878123452, 281600647, 299407479, 565617163,
        ],
        2: [
        962921649, 489234231, 184825984, 305323266, 669965252, 431201652,
        375260082, 101615448, 382494949, 423231026,
        ],
        3: [
        62268268, 609814296, 186043598, 154288490, 322416953, 253783975,
        820897321, 610722677, 956351615, 18133104,
        ],
        4: [
        228636011, 572642774, 861756031, 514910088, 436327728, 91632731,
        147504382, 834538935, 249385821, 816430129,
        ],
        5: [
        570217321, 704878454, 19925738, 253829005, 800624682, 874576379,
        727831166, 315033975, 894098417, 979384707,
        ],
        6: [
        450006307, 365625490, 14646203, 111128490, 811880337, 270734748,
        134475081, 755501596, 63135866, 829457176,
        ],
        7: [
        208903673, 441645818, 735960132, 219698434, 706746610, 989268246,
        336442376, 876678630, 308270103, 166383814,
        ],
        8: [
        977456534, 514078785, 638690464, 202661772, 26067456, 244890943,
        592972370, 281659122, 236583110, 619627475,
        ],
        9: [
        540039568, 202922491, 389963142, 13413239, 952428896, 793127216,
        533010813, 728464490, 498864816, 808941498,
        ],
    },
    {
        0: [
        646922965, 944059573, 713418122, 589821923, 629001568, 118385344,
        628629113, 66603990, 940773646, 881276140,
        ],
        1: [
        617772179, 947274283, 349930917, 592682161, 494824382, 148550616,
        834009603, 653761197, 883589106, 425940661,
        ],
        2: [
        928133495, 225984975, 964098479, 656658111, 480865982, 668418831,
        118637429, 229038792, 310838282, 409896278,
        ],
        3: [
        480169945, 867274627, 730366969, 936969593, 923804498, 201396736,
        183014753, 357321305, 327829508, 613648851,
        ],
        4: [
        861014980, 895884719, 228483569, 58029163, 764047151, 893172889,
        693806132, 971630187, 966791370, 148494273,
        ],
        5: [
        557605678, 454078786, 651647263, 476614325, 352917982, 488081985,
        720894062, 208454254, 155373066, 366587685,
        ],
        6: [
        251103676, 933880690, 169806432, 431602448, 233382413, 792470420,
        128053176, 789435053, 709346706, 447741524,
        ],
        7: [
        327456076, 634429168, 825604703, 78726944, 172706485, 432167938,
        324320572, 85778742, 636691924, 632533690,
        ],
        8: [
        380936559, 623581464, 383523904, 606912074, 496422638, 373707570,
        604287840, 401485887, 587217747, 968901409,
        ],
        9: [
        116932217, 548397004, 750944900, 46488328, 519272255, 471784597,
        370883193, 55361895, 57825619, 191204341,
        ],
    },
    {
        0: [
        946690068, 649416265, 66164178, 250212913, 154411381, 429246202,
        117069891, 458632243, 164356391, 597217424,
        ],
        1: [
        634856718, 4610576, 750496563, 440958592, 888709593, 547873283,
        809496845, 821438032, 447899642, 477829329,
        ],
        2: [
        990484004, 691554701, 383094342, 83279950, 497160925, 131814286,
        504742140, 769500789, 232933232, 821438581,
        ],
        3: [
        600491347, 50800485, 370543584, 403412734, 529949763, 893539440,
        426665561, 982845727, 741895586, 300500407,
        ],
        4: [
        128852713, 805710878, 592546171, 807847818, 645685680, 360485232,
        562278812, 618802116, 931376527, 235557939,
        ],
        5: [
        507717539, 659366031, 512838214, 576555467, 323668282, 62828409,
        557027445, 789719869, 989430285, 612931937,
        ],
        6: [
        457604070, 818527257, 406726823, 798943107, 89215967, 571328683,
        658053190, 805135373, 735505930, 608978509,
        ],
        7: [
        931683405, 576784251, 368243720, 403659671, 95654870, 242132347,
        882927997, 619108002, 55705729, 701411154,
        ],
        8: [
        627913260, 626194213, 278214140, 616335339, 101615290, 433734177,
        53623146, 307922632, 172681989, 916282012,
        ],
        9: [
        603857570, 949038814, 664986591, 417137298, 492493609, 425718969,
        340872210, 135142705, 269421014, 268002297,
        ],
    },
    {
        0: [
        627236451, 287721843, 726031351, 903908511, 924513432, 945675261,
        620257924, 97648446, 827502777, 853190797,
        ],
        1: [
        718203404, 112853232, 332616950, 807215861, 336157189, 451132178,
        139427317, 77510636, 781148797, 420039872,
        ],
        2: [
        289068339, 943675982, 558564578, 680822599, 904978258, 483264598,
        683537636, 819991123, 423530836, 791670626,
        ],
        3: [
        443872442, 91553301, 512100336, 764835408, 226615972, 163475262,
        260269689, 945866189, 857458055, 237475892,
        ],
        4: [
        164628730, 537003363, 291405200, 451148840, 222155104, 208299825,
        684249486, 204025598, 759232572, 323456135,
        ],
        5: [
        534202477, 529550963, 59503088, 249992704, 841160653, 886744633,
        585821594, 606081844, 333747678, 753396885,
        ],
        6: [
        389704829, 537683516, 425075365, 129469019, 389258177, 357804916,
        104281451, 973996735, 984723354, 79795736,
        ],
        7: [
        170185428, 282782739, 549486520, 454803082, 613506374, 948748969,
        70584654, 151795514, 552798605, 964430147,
        ],
        8: [
        818349808, 339876237, 995657271, 135862067, 959465413, 388380979,
        56734523, 910866570, 322560047, 400310152,
        ],
        9: [
        207029352, 982362478, 221158510, 39019092, 902515402, 201660865,
        488784759, 367178220, 32961993, 62112383,
        ],
    },
    {
        0: [
        74530382, 136389652, 106142908, 4357016, 586390808, 400157693,
        71865554, 105412187, 538260053, 704131273,
        ],
        1: [
        455118819, 745543667, 277648763, 871456293, 765100651, 859517197,
        401367373, 852082069, 664793988, 363653690,
        ],
        2: [
        554879970, 403390739, 983719844, 778759651, 318363727, 725585969,
        351583216, 959634562, 643195763, 757163602,
        ],
        3: [
        505911705, 412953048, 684925003, 890861656, 379471212, 294758545,
        724344212, 558968731, 713307212, 758595236,
        ],
        4: [
        954804665, 912461500, 669284081, 282387867, 7874842, 233372393,
        717893319, 454393870, 154832837, 23989846,
        ],
        5: [
        160929813, 507990093, 889594479, 604551800, 458997623, 757147820,
        694799435, 537411815, 654266679, 367919388,
        ],
        6: [
        915988225, 216310810, 304242450, 541990163, 30711750, 448101292,
        205610196, 308674111, 721660595, 611609280,
        ],
        7: [
        306589186, 162096389, 995446763, 612644240, 287902385, 957698012,
        27134634, 591472682, 215634433, 785957395,
        ],
        8: [
        849964527, 551436507, 394704255, 287957753, 229338666, 748824463,
        419160129, 44715399, 400946272, 536906478,
        ],
        9: [
        25136828, 616295594, 950992285, 732301821, 817724786, 251379519,
        151717877, 771686878, 114595303, 782351749,
        ],
    },
    {
        0: [
        479065867, 946928660, 188418961, 783566489, 281885374, 497429387,
        968276242, 540115367, 379658483, 429371429,
        ],
        1: [
        624016482, 376613337, 716954036, 526608276, 271718924, 761912356,
        596581959, 122294468, 382178304, 353799369,
        ],
        2: [
        849354382, 442904714, 835459181, 568117296, 479262390, 950343153,
        750496908, 548864463, 446173707, 433110195,
        ],
        3: [
        498175915, 6531375, 791477297, 240866189, 845123084, 62181591,
        94740855, 583853673, 353081813, 239347223,
        ],
        4: [
        321275864, 11256875, 932031610, 384171681, 226165865, 518617505,
        454386814, 429695928, 957442166, 66015318,
        ],
        5: [
        543097438, 824059768, 822483256, 795268998, 809247365, 475001045,
        708621156, 931820299, 655382999, 143805207,
        ],
        6: [
        539336337, 551841881, 997670060, 157829932, 811999104, 678876325,
        812926504, 861398066, 248210489, 88387304,
        ],
        7: [
        150001423, 464459461, 536820165, 711277290, 673406202, 843324409,
        162749100, 185911763, 858734959, 934630774,
        ],
        8: [
        997352824, 91888560, 177884442, 962822780, 523225242, 429084086,
        987324615, 820541184, 804826016, 434050027,
        ],
        9: [
        29678670, 410933147, 488194961, 543841922, 669518166, 554861279,
        829854729, 781352240, 685852382, 309801607,
        ],
    },
    {
        0: [
        928083674, 675934928, 480655350, 926822342, 930051750, 598357640,
        237120911, 266586537, 523889550, 276760769,
        ],
        1: [
        626015598, 822799716, 385236757, 810964057, 621916327, 546809666,
        921988493, 552745699, 474051020, 210181932,
        ],
        2: [
        943933108, 352439368, 453486079, 739410121, 11031136, 939848112,
        960403217, 898546334, 323150794, 479180441,
        ],
        3: [
        639874056, 223107333, 320321495, 826112495, 630856896, 199101130,
        594108239, 687796257, 387833282, 576643745,
        ],
        4: [
        582137999, 584072310, 569974261, 850499266, 293882739, 978179632,
        454302412, 313095921, 986483, 987296075,
        ],
        5: [
        888117934, 104662311, 479854774, 945437747, 247240281, 715677089,
        104297120, 686427961, 627731820, 350626519,
        ],
        6: [
        178924669, 530133609, 620244299, 885193952, 808785651, 456785730,
        160163957, 261895561, 506857276, 384407247,
        ],
        7: [
        190147865, 356403246, 384719028, 745861841, 956767468, 901571841,
        721288889, 134287782, 512628219, 492421621,
        ],
        8: [
        582423387, 662443440, 521351791, 317631670, 100852356, 909184778,
        587987719, 706544026, 292113124, 479556632,
        ],
        9: [
        335188923, 386109517, 387210537, 950284365, 132186147, 467495528,
        113844984, 198975872, 747527199, 728705799,
        ],
    },
    {
        0: [
        894466395, 325097338, 221584396, 570803291, 304754373, 103777987,
        735604643, 141446661, 396698126, 585958114,
        ],
        1: [
        143280497, 324006552, 413040782, 67436247, 817575662, 328377683,
        708856019, 883939396, 603998647, 246218844,
        ],
        2: [
        985195569, 871627353, 738099182, 696155178, 921007392, 911469790,
        381766137, 967714021, 492355583, 890012681,
        ],
        3: [
        130533316, 51487314, 119707260, 834721548, 345163662, 798658769,
        713589813, 970760535, 970993375, 293694064,
        ],
        4: [
        201863596, 260245479, 322583940, 562250460, 940744073, 298430238,
        11839489, 350659867, 715663315, 137013898,
        ],
        5: [
        829764406, 41755923, 747044499, 457975844, 119510998, 732156383,
        136801554, 920450036, 494539355, 302885166,
        ],
        6: [
        193217236, 44853642, 502684094, 140563814, 69208119, 726799084,
        965461068, 910913076, 655415869, 571669095,
        ],
        7: [
        220989600, 819152661, 17895103, 388575052, 162350462, 434787658,
        384598759, 249951992, 964793533, 161069745,
        ],
        8: [
        662908857, 626294161, 864356865, 746023994, 143101258, 292610037,
        791446176, 904103575, 261438789, 560022980,
        ],
        9: [
        852407118, 768332797, 381047198, 143657158, 774653028, 836901341,
        957805750, 876764994, 775710810, 194249054,
        ],
    },
    {
        0: [
        252267217, 60964057, 788851095, 191514855, 835392863, 569833104,
        935252637, 150386861, 303636622, 400822417,
        ],
        1: [
        530055851, 566533508, 284351879, 335289911, 303812193, 593933771,
        90528231, 574943207, 68105658, 451070073,
        ],
        2: [
        927851396, 330525264, 424743404, 671995361, 198423270, 54015428,
        845155714, 399238203, 622421647, 796036277,
        ],
        3: [
        683142192, 277218964, 472406226, 676066238, 759179732, 864588353,
        192193897, 753467113, 260278080, 402422902,
        ],
        4: [
        165067451, 358745953, 6193580, 960637899, 472563819, 677177454,
        384221649, 663924275, 77141395, 450573547,
        ],
        5: [
        385785233, 161530888, 208662579, 788029184, 753603258, 644660205,
        411074892, 992381248, 482310295, 395274991,
        ],
        6: [
        588077738, 491427974, 755272179, 899553947, 110714830, 771719495,
        907364878, 422486703, 608083153, 27548673,
        ],
        7: [
        179164859, 98241124, 673492274, 165342653, 97381318, 98763973,
        107908271, 114537859, 74768563, 275250239,
        ],
        8: [
        530717838, 952679190, 322742847, 946075845, 453342665, 653206254,
        71025471, 689128173, 908005747, 765929875,
        ],
        9: [
        490772414, 608400132, 665242479, 691661308, 190786391, 863193326,
        495750147, 99676229, 752231328, 970187451,
        ],
    },
    {
        0: [
        305489605, 949208182, 633332515, 700033780, 93669904, 264807222,
        229272546, 703362570, 634719164, 347822951,
        ],
        1: [
        840505153, 165422406, 424329954, 457148943, 99834333, 267908959,
        733063696, 142341010, 724781421, 457813738,
        ],
        2: [
        264258461, 292948433, 851902831, 617594974, 395399238, 636209539,
        255429102, 681497500, 536355314, 722194875,
        ],
        3: [
        759912494, 852118457, 387643762, 959664986, 92289875, 600147076,
        292594892, 69624286, 543038117, 726297047,
        ],
        4: [
        913180463, 466807513, 396513231, 58938169, 400601521, 937628708,
        368845208, 688123727, 908800972, 516696327,
        ],
        5: [
        820451716, 80413025, 502638159, 176947246, 387457477, 813643300,
        955161257, 779682156, 639458852, 551627158,
        ],
        6: [
        245408314, 300801167, 488953607, 105192333, 570575838, 8732870,
        685510555, 559187080, 20191220, 834256822,
        ],
        7: [
        410755134, 15065173, 799095718, 379707427, 929829877, 466107255,
        731493498, 844621677, 377288472, 219566415,
        ],
        8: [
        740325329, 743612446, 744603374, 360625916, 22278188, 54827025,
        701225614, 769715613, 730649934, 87776242,
        ],
        9: [
        357530957, 222836201, 985509002, 140936370, 83884344, 874754907,
        912639763, 530805084, 864901159, 889780140,
        ],
    },
    {
        0: [
        599756567, 927723130, 276389393, 85800150, 952131832, 330191109,
        423615679, 130558155, 917073457, 505946442,
        ],
        1: [
        276692779, 790045873, 136388154, 366826747, 565424802, 288608503,
        785756469, 837067247, 872637609, 67414781,
        ],
        2: [
        609542775, 950976321, 96513217, 300696222, 138407295, 385954277,
        6999055, 692539084, 753349604, 938660930,
        ],
        3: [
        727949813, 27026937, 663888831, 198727810, 8883080, 928577059,
        593900746, 106131138, 95306478, 645553199,
        ],
        4: [
        695137993, 209844495, 589066524, 765501196, 849034742, 165942105,
        804825105, 632624549, 597424751, 616358962,
        ],
        5: [
        591671902, 343188935, 447088930, 107764640, 841126898, 333284101,
        875941928, 298984177, 910792870, 194189985,
        ],
        6: [
        410833332, 241245803, 175879545, 791953317, 926227226, 335096780,
        366261122, 455855914, 972816812, 533568752,
        ],
        7: [
        706867796, 282228533, 979646338, 78007425, 217399472, 494095615,
        29525445, 134615354, 290550174, 673603278,
        ],
        8: [
        675033946, 60981955, 163561776, 195974607, 92883602, 409435079,
        17870255, 419554962, 300794270, 842454675,
        ],
        9: [
        399853118, 302739151, 688097559, 502823778, 318948204, 259074528,
        972657442, 572755604, 713962310, 920710193,
        ],
    },
    {
        0: [
        924732062, 802780017, 486437970, 160382590, 177030987, 684812397,
        979464001, 804809414, 97204477, 242850422,
        ],
        1: [
        74275409, 168378723, 55168663, 434802934, 939662296, 232458201,
        295899580, 769066904, 646281987, 668767914,
        ],
        2: [
        450037428, 276920164, 553789353, 777041094, 546541790, 387294443,
        841104666, 473522649, 358571653, 653088403,
        ],
        3: [
        445151762, 175517804, 362988959, 301706829, 450294788, 501549461,
        15869265, 481669316, 100520907, 484444523,
        ],
        4: [
        16641434, 99532659, 841264352, 951123991, 291181039, 156082675,
        502613188, 869497723, 391558684, 37175868,
        ],
        5: [
        764149518, 418687547, 772934855, 461592904, 733240379, 854757568,
        866323926, 151238705, 198613985, 533187233,
        ],
        6: [
        636977694, 936849218, 226655548, 937180913, 451655475, 689581901,
        929535778, 129044004, 854744097, 759179152,
        ],
        7: [
        638342120, 139171045, 973791904, 2967469, 232409578, 678315957,
        89631031, 891003543, 856959610, 982216340,
        ],
        8: [
        452424, 957482354, 315335241, 292463304, 347640674, 586308550,
        960211433, 526122448, 522507315, 15386591,
        ],
        9: [
        400477047, 418354527, 51479111, 554040551, 31676366, 758527203,
        402879567, 162426666, 972604846, 366232589,
        ],
    },
    {
        0: [
        163829044, 22154990, 683508347, 365764027, 853674679, 615778110,
        748330361, 3273513, 542926665, 554166286,
        ],
        1: [
        655689324, 440020255, 317076755, 717429598, 196030010, 982148120,
        711617658, 122204351, 219141203, 988172285,
        ],
        2: [
        486369705, 812290953, 184279524, 880257617, 628740014, 447773013,
        963406470, 934900701, 60231229, 169186339,
        ],
        3: [
        643289635, 95536193, 712727204, 876886771, 326275838, 143639168,
        907951439, 939132967, 36819356, 507495111,
        ],
        4: [
        316413990, 630527439, 499004321, 518539838, 956870454, 220929189,
        204099661, 310340446, 682823886, 769373205,
        ],
        5: [
        632578597, 999311648, 720931528, 624164215, 37862451, 731201083,
        673752451, 432415432, 490472296, 118937150,
        ],
        6: [
        254123117, 533447376, 959016480, 538940792, 809603426, 122972182,
        567429821, 427897688, 872348215, 124534220,
        ],
        7: [
        936360987, 151773801, 549090609, 775022959, 822359285, 828347067,
        747957087, 437222254, 210740325, 995470252,
        ],
        8: [
        16613113, 4511245, 63343664, 381413283, 333655742, 588168825,
        390953867, 734990166, 380599833, 589543983,
        ],
        9: [
        826172020, 233462045, 308108417, 457929025, 871190426, 631892935,
        686618912, 142553836, 606558579, 67105741,
        ],
    },
    {
        0: [
        50985051, 343792957, 971104235, 511510040, 896104658, 738786570,
        129264182, 305506098, 588642008, 917522821,
        ],
        1: [
        968026474, 148644961, 773000855, 50926448, 716230104, 269653449,
        607928693, 904342211, 911880095, 138263137,
        ],
        2: [
        90376490, 397321391, 968450499, 115354734, 760082631, 254605257,
        327302205, 750140655, 241356344, 201697574,
        ],
        3: [
        446282693, 314914840, 282971084, 797911753, 778021496, 680814710,
        212733103, 301665222, 935415227, 556275159,
        ],
        4: [
        214589646, 893155746, 226653813, 853320968, 27603624, 970568207,
        839492469, 891812786, 927461499, 443318790,
        ],
        5: [
        695221455, 55413948, 751436064, 642216503, 700131526, 75455439,
        979154639, 856297288, 305260124, 542531395,
        ],
        6: [
        678098499, 935169561, 455713426, 139947510, 218488748, 48767349,
        379576735, 720623960, 834112660, 647582395,
        ],
        7: [
        696386676, 754265656, 406861924, 667855870, 884452606, 448046006,
        998369159, 811416070, 738726930, 989538865,
        ],
        8: [
        122194344, 462964733, 387305274, 241783886, 98560019, 107687631,
        586566169, 539340867, 812061418, 93018460,
        ],
        9: [
        952189714, 262160031, 64223731, 525716295, 92674087, 344260677,
        303658615, 603439646, 721450748, 996265405,
        ],
    },
    {
        0: [
        788138028, 599035478, 109687731, 696347033, 177592229, 787816932,
        55260539, 672394931, 961882282, 545379507,
        ],
        1: [
        363661076, 575567645, 305725286, 858550800, 938280401, 22431285,
        34619816, 183189657, 117004790, 659418665,
        ],
        2: [
        41313747, 37526578, 149624136, 23128419, 65159712, 681248285,
        867753084, 149922421, 857189085, 197496520,
        ],
        3: [
        753672986, 948068867, 677373612, 589107497, 642271483, 985236750,
        9040288, 48744562, 279121681, 931206313,
        ],
        4: [
        237627943, 935699262, 469626516, 759119679, 992655438, 708984687,
        625604868, 572107626, 436756068, 763957420,
        ],
        5: [
        730778476, 709747420, 551997017, 728871654, 726455407, 847872607,
        43640196, 965156344, 880210661, 199359444,
        ],
        6: [
        493851871, 869641144, 985860996, 299530925, 636569967, 289234638,
        636566445, 4801511, 345269688, 411768945,
        ],
        7: [
        406574419, 464944547, 597295953, 648827716, 930458533, 832680904,
        397965962, 461368424, 249662429, 699091918,
        ],
        8: [
        409422276, 390540100, 397722782, 367811611, 737131787, 520157157,
        383935504, 267509188, 337816181, 514638501,
        ],
        9: [
        130517845, 197022038, 115896361, 329365201, 817969164, 326883902,
        507290255, 132805947, 79042409, 408050709,
        ],
    },
    {
        0: [
        41993564, 596970088, 763891387, 79974102, 755122086, 893340501,
        765506980, 985591285, 77802807, 907919539,
        ],
        1: [
        679476907, 130559978, 111424284, 850910183, 111461631, 624536685,
        501932274, 445792378, 511096539, 822084810,
        ],
        2: [
        889728997, 90774802, 301929570, 322601332, 333285853, 252170486,
        759231677, 907818377, 596739082, 137120664,
        ],
        3: [
        998023194, 770190618, 272258232, 133440103, 968167382, 849382177,
        277921497, 506466413, 582327653, 147245797,
        ],
        4: [
        914277724, 908501891, 842839827, 415956427, 582793, 721905220,
        987886828, 783662275, 420522148, 317258599,
        ],
        5: [
        7699765, 90923710, 301388077, 828654127, 791551638, 603482437,
        276299258, 252614223, 419082702, 302224813,
        ],
        6: [
        934751137, 951797414, 965653777, 80636638, 858408725, 835465453,
        410546480, 325533034, 21281639, 638113265,
        ],
        7: [
        361477382, 300476406, 680446246, 538459837, 747956953, 614358515,
        656230879, 648823940, 448043410, 290932143,
        ],
        8: [
        483254116, 559974411, 838636901, 905736068, 518124317, 236171061,
        932717134, 690287407, 972238032, 951348283,
        ],
        9: [
        462601253, 12031151, 943382300, 434199318, 743352796, 943806792,
        915874568, 102074991, 714815540, 642262472,
        ],
    },
    {
        0: [
        520455679, 236613655, 46155188, 481873796, 1210394, 246134442,
        482887190, 746294387, 481980423, 271551560,
        ],
        1: [
        997832994, 777510473, 58512961, 7559045, 541004253, 421575422,
        983505867, 467282651, 398773074, 269092609,
        ],
        2: [
        621834138, 914317521, 73170004, 942062988, 76108816, 545841991,
        935806339, 684153422, 152180967, 278636204,
        ],
        3: [
        466422220, 574614610, 887643708, 691751222, 788500868, 552442198,
        311533585, 910278708, 570000445, 823539465,
        ],
        4: [
        767919732, 759105075, 787920820, 881707906, 903399693, 31934278,
        718287042, 713524117, 879044170, 821217013,
        ],
        5: [
        372335613, 489143851, 721842847, 325048646, 433313680, 819010616,
        931765827, 46249692, 118090399, 112782850,
        ],
        6: [
        37958637, 164761225, 523392407, 121899577, 714307934, 215411150,
        790705726, 430514533, 310178399, 783112167,
        ],
        7: [
        239479519, 290257433, 606154681, 324420761, 861386437, 609763402,
        690202119, 998637546, 433063294, 355668053,
        ],
        8: [
        870322704, 36779479, 132457023, 427569074, 256301180, 210343144,
        741911753, 694650090, 694946745, 26364697,
        ],
        9: [
        931327513, 287105287, 879740519, 324161537, 466967445, 446186593,
        689046477, 670312702, 227103378, 954537329,
        ],
    },
    {
        0: [
        879672678, 356440948, 814090430, 996781890, 251377405, 717297329,
        127579918, 342740397, 489792481, 269747080,
        ],
        1: [
        367459593, 981173391, 167659002, 460937826, 987480009, 346203912,
        942891885, 542679336, 622340795, 335015336,
        ],
        2: [
        191082403, 545902360, 511057413, 19991532, 812920740, 966822888,
        89568171, 733769230, 546425251, 852365970,
        ],
        3: [
        591031415, 573859686, 283788726, 302128872, 29564153, 882069558,
        675049349, 381110579, 909125117, 307561858,
        ],
        4: [
        353667029, 814465981, 128895849, 44199951, 226182598, 97096353,
        480747513, 725179187, 315493185, 62480328,
        ],
        5: [
        14386945, 918475388, 651558684, 390478165, 377475587, 292560144,
        405252145, 423029343, 696654058, 149245030,
        ],
        6: [
        770116973, 486510241, 531601342, 479385332, 373209567, 424108907,
        150261302, 509902461, 604860702, 134793676,
        ],
        7: [
        491372329, 832219913, 322905309, 364227764, 777886374, 811029722,
        767307982, 98462600, 247329111, 594939092,
        ],
        8: [
        371332770, 194228058, 305932308, 569786788, 356300708, 30284622,
        334934964, 945531095, 974345857, 449788874,
        ],
        9: [
        245389197, 38334411, 46012916, 112631226, 215757156, 883471235,
        443028775, 611094015, 634498047, 404369644,
        ],
    },
    {
        0: [
        999362982, 112630915, 273254124, 377986587, 104964057, 28190919,
        418698972, 340404548, 485506693, 753317595,
        ],
        1: [
        114174093, 987320329, 224052063, 891104842, 886656920, 475270817,
        247879830, 768937300, 628347687, 983473623,
        ],
        2: [
        250531696, 256479151, 159509330, 224207806, 43937824, 260460439,
        803831052, 502639549, 650499821, 693971595,
        ],
        3: [
        901868227, 211252148, 845161213, 575028130, 119513323, 466158755,
        661883096, 768181584, 456050894, 456216675,
        ],
        4: [
        914771199, 359005791, 764056507, 180236196, 936623465, 488973357,
        72243402, 407258285, 35641170, 911682880,
        ],
        5: [
        492851817, 568281305, 450495802, 835424101, 444266310, 680024996,
        835298672, 784777973, 839283094, 836125000,
        ],
        6: [
        506374190, 235530317, 814185441, 843253650, 770700317, 586445045,
        696867342, 13351707, 133388120, 973237744,
        ],
        7: [
        988188772, 889726040, 232006219, 24707908, 460433765, 991508321,
        87602579, 35524960, 322907017, 11122159,
        ],
        8: [
        849136664, 451211302, 556579855, 819042474, 194548548, 124277363,
        436492722, 781651711, 590288194, 835574940,
        ],
        9: [
        60139225, 760388753, 102531901, 532829809, 310371273, 51116451,
        354153177, 348765628, 357854536, 954003816,
        ],
    },
    {
        0: [
        466348401, 830457499, 902342361, 337436017, 23824905, 767658909,
        444290016, 589832332, 413743453, 148060672,
        ],
        1: [
        349571248, 880629265, 308035482, 300512860, 439573112, 692527608,
        757261763, 151412418, 333607409, 982938005,
        ],
        2: [
        551819708, 488268866, 202286940, 74854188, 71009907, 778949959,
        466749872, 432064050, 407437506, 104398393,
        ],
        3: [
        592714188, 414067266, 107657907, 775830006, 467603534, 95302432,
        207453183, 106169616, 510944457, 120018912,
        ],
        4: [
        217225641, 987892498, 768858450, 606181945, 208661139, 189276302,
        532063798, 573566347, 553088626, 528134426,
        ],
        5: [
        403583826, 24617073, 665546045, 762824358, 9545982, 386961784,
        989680730, 596174849, 627876383, 743257118,
        ],
        6: [
        612928461, 671214296, 790750273, 235786610, 428427659, 79508108,
        510072715, 582804930, 956258532, 860321739,
        ],
        7: [
        270524443, 594874750, 489758695, 14534352, 407589813, 848082635,
        598457725, 583369843, 699608186, 867033489,
        ],
        8: [
        710429184, 699604384, 768822770, 997026755, 319147646, 114879701,
        730960613, 432958706, 366976215, 508720728,
        ],
        9: [
        426423881, 129463421, 704279548, 242268890, 606618183, 747564099,
        280509528, 7888324, 991581654, 615991052,
        ],
    },
    {
        0: [
        659248693, 980668412, 127084438, 554262330, 591216958, 21279717,
        135928365, 699673135, 969593345, 920178617,
        ],
        1: [
        811601155, 324446743, 45800289, 649536619, 659011018, 179031160,
        739003336, 227085441, 993397421, 785718099,
        ],
        2: [
        654054838, 617852452, 732867788, 937196478, 536367052, 632408125,
        231820125, 591207639, 884070204, 869014710,
        ],
        3: [
        183105606, 489296750, 59655004, 613384487, 141168093, 790902797,
        252633067, 714616217, 904277461, 489301950,
        ],
        4: [
        99635605, 443825808, 134671613, 786328993, 934281361, 490423851,
        513940352, 480759215, 609287199, 584937160,
        ],
        5: [
        583693109, 947104934, 961800891, 673657624, 833494501, 476244936,
        210930309, 382985265, 242507040, 479076175,
        ],
        6: [
        655696031, 113960127, 375416867, 914570531, 903770507, 671923126,
        81605250, 122100083, 739564871, 959596565,
        ],
        7: [
        182229576, 189523578, 664277289, 980039293, 170190997, 27559271,
        754087568, 130908368, 687999176, 492061854,
        ],
        8: [
        806458604, 825760419, 267431906, 666482964, 418418599, 373564803,
        859878419, 85581978, 661573941, 243507575,
        ],
        9: [
        436045176, 221483051, 951989022, 71624867, 64507964, 61270968,
        723939029, 107530803, 249286257, 602935412,
        ],
    },
    {
        0: [
        269579882, 686459603, 384154393, 835284015, 364462271, 461771750,
        276261390, 110889108, 869576168, 352509818,
        ],
        1: [
        816425850, 775549696, 502989968, 183124958, 335816749, 152844362,
        286627211, 469250222, 731640174, 834014436,
        ],
        2: [
        140095279, 643014002, 488567240, 317226960, 894070490, 802037543,
        36758448, 797805442, 707923236, 544892076,
        ],
        3: [
        824324966, 965216489, 161609665, 740604695, 675745881, 15990873,
        739151736, 50650691, 100833265, 312094263,
        ],
        4: [
        264512439, 724532460, 83888056, 222570975, 677257965, 66703629,
        648129008, 520358595, 804975273, 385222822,
        ],
        5: [
        846183483, 919943619, 832822916, 774185067, 257380057, 565271040,
        146691923, 450011355, 551301949, 747598807,
        ],
        6: [
        798215040, 759037229, 376305283, 660672560, 201710112, 812991067,
        155063134, 803563035, 941406247, 305911728,
        ],
        7: [
        51400516, 909584373, 571930593, 583284499, 918918014, 880407417,
        374259402, 518077768, 365977360, 592577861,
        ],
        8: [
        482004854, 611222806, 435349657, 193968992, 523775092, 806275792,
        911366309, 385443133, 693369187, 913407005,
        ],
        9: [
        459065230, 560955543, 933364530, 249919826, 332943153, 729558217,
        466457805, 278479054, 302048274, 175015596,
        ],
    },
    {
        0: [
        174770639, 534229352, 247476779, 346251966, 510214087, 401688912,
        425608470, 896518113, 896151126, 473231739,
        ],
        1: [
        175060126, 214880522, 823324307, 122833736, 373991686, 475106156,
        528882946, 643554858, 351853079, 852725175,
        ],
        2: [
        364907616, 237282015, 260936167, 717757090, 330606188, 328927731,
        890593167, 766658608, 388442915, 660596387,
        ],
        3: [
        379120558, 213548788, 794667870, 850976151, 894110089, 998420696,
        112572683, 105273730, 414220274, 930391037,
        ],
        4: [
        493130691, 872311639, 913444562, 176241301, 885998753, 392846793,
        487852938, 656723591, 1122106, 361143712,
        ],
        5: [
        708463429, 265593856, 569824038, 891535674, 486955657, 801272084,
        513796124, 952398159, 568485971, 143184466,
        ],
        6: [
        472789750, 487232472, 695551729, 694798538, 912066102, 970392908,
        281179240, 583937078, 843787208, 923044289,
        ],
        7: [
        902126301, 528685169, 395676505, 804201873, 400606976, 95137331,
        599077580, 936863603, 206506650, 982489611,
        ],
        8: [
        180321808, 195564268, 318825052, 519240139, 869208232, 765912616,
        593615488, 158960529, 193109469, 455557884,
        ],
        9: [
        932024449, 974155005, 784874910, 383671094, 838306256, 760193055,
        103515306, 286394049, 504885304, 964654961,
        ],
    },
    {
        0: [
        90024883, 324241373, 400941636, 106539400, 395583770, 276482141,
        599764086, 974262622, 360803761, 196401199,
        ],
        1: [
        337389624, 264385013, 834726671, 181213355, 635349802, 848477890,
        569704651, 464766898, 660482214, 753573561,
        ],
        2: [
        122943943, 205106735, 874730829, 746284891, 331235681, 250097245,
        923195964, 222058256, 865871801, 253197399,
        ],
        3: [
        290593019, 955148706, 172756869, 568133875, 475593668, 552740511,
        655643869, 856267455, 564966083, 766372280,
        ],
        4: [
        367715492, 590785638, 759271279, 272309321, 215450021, 435452246,
        740773556, 866903679, 352142728, 586144823,
        ],
        5: [
        487025114, 834985176, 169471334, 195478067, 693227856, 142754046,
        193074551, 845188842, 695157460, 339291135,
        ],
        6: [
        698086877, 234953715, 811188142, 647822311, 159437459, 142593234,
        915011761, 790871393, 615822175, 334149490,
        ],
        7: [
        862616201, 151202532, 206623541, 497913779, 156561907, 893994544,
        919589667, 267862960, 887445734, 826442067,
        ],
        8: [
        405299356, 564523962, 492193415, 146027312, 164310398, 452820130,
        749266026, 989459786, 813230712, 927564958,
        ],
        9: [
        827735902, 595886794, 836474978, 909283844, 454884454, 509561682,
        43658026, 204586007, 884796136, 389487718,
        ],
    },
    {
        0: [
        565759319, 831861405, 851466620, 901400805, 111827996, 859050299,
        530727784, 740634794, 46768221, 124785035,
        ],
        1: [
        580554674, 182706323, 712349430, 216380568, 317890274, 730641239,
        538610872, 985075222, 986437633, 608269773,
        ],
        2: [
        346585670, 818068284, 138833135, 29601221, 784024589, 769672889,
        165390162, 778540163, 229308477, 549894514,
        ],
        3: [
        393730986, 714153105, 203161714, 392914531, 643768315, 31071289,
        565230761, 236026615, 631551162, 556235094,
        ],
        4: [
        127959983, 610450301, 630744719, 211215392, 957129057, 566527295,
        409757630, 753065026, 962194139, 901552664,
        ],
        5: [
        949960943, 554403147, 689247237, 40768778, 205484109, 752559790,
        387598594, 64297889, 52019187, 460076510,
        ],
        6: [
        466238873, 299174831, 445688530, 158457299, 351586113, 169204167,
        88457046, 470424813, 392169252, 925584200,
        ],
        7: [
        641083986, 309219493, 884679927, 354534155, 138251506, 866695729,
        493571470, 440751780, 788649900, 851565059,
        ],
        8: [
        410235591, 247096137, 356528894, 745234601, 311882346, 616979063,
        630160872, 27637400, 654775991, 724369774,
        ],
        9: [
        29859683, 772378988, 110090249, 113281470, 889154072, 139969700,
        551729963, 662938965, 628725361, 699424125,
        ],
    },
    {
        0: [
        589886856, 977698916, 712217323, 884868593, 670430193, 975582215,
        320303213, 463819498, 705873449, 389878715,
        ],
        1: [
        559378675, 169364078, 688122649, 638261473, 225383669, 212721199,
        652608364, 11256415, 108049491, 448400199,
        ],
        2: [
        489293475, 989007357, 356533520, 146038007, 55885377, 915365200,
        278215494, 79214907, 17042329, 823511939,
        ],
        3: [
        649889650, 462047468, 853387489, 909083050, 309254834, 570900475,
        378485778, 674975568, 719666187, 427863068,
        ],
        4: [
        816322696, 338389397, 18495034, 297954583, 9160205, 382933051,
        126586238, 188153687, 160762227, 721220340,
        ],
        5: [
        48645341, 121649355, 897507159, 426107860, 374669304, 338278469,
        367943933, 534342716, 272049148, 847447176,
        ],
        6: [
        182910893, 897895951, 96298445, 632076316, 370443581, 793598686,
        744739205, 674619070, 707075802, 935729866,
        ],
        7: [
        973345842, 612160995, 492098948, 624298164, 138157825, 452946650,
        330332171, 115733303, 259736553, 819339828,
        ],
        8: [
        952465827, 506388154, 67871507, 472267149, 160533110, 613185153,
        265841964, 762688659, 195005273, 156620137,
        ],
        9: [
        152425686, 780133946, 790733486, 848157753, 855585320, 569270808,
        273937718, 564190431, 966029311, 116167970,
        ],
    },
    {
        0: [
        765735658, 393874505, 967795422, 711831596, 708028321, 929010631,
        594368915, 181131177, 328442092, 662276018,
        ],
        1: [
        836519986, 286961233, 748829628, 474820809, 306001379, 879896989,
        384582697, 498178913, 615927646, 422447280,
        ],
        2: [
        940245281, 872162264, 418429774, 780468766, 241006094, 896943355,
        687495059, 500941023, 287391362, 45906167,
        ],
        3: [
        126885231, 319708771, 151257207, 325597313, 439646971, 836759453,
        89334460, 960716878, 687453315, 189052760,
        ],
        4: [
        342901690, 249881080, 332230844, 882683709, 8527016, 575158777,
        74563931, 715679323, 37694664, 94406215,
        ],
        5: [
        165921487, 613249870, 503588234, 992818828, 275692022, 424267162,
        944808476, 384641895, 837344689, 85360135,
        ],
        6: [
        79761258, 301023171, 311772367, 412821233, 140796076, 442793646,
        79129616, 250249055, 177053756, 430186760,
        ],
        7: [
        709866410, 6415121, 285730847, 650313617, 20951628, 524972823,
        857743195, 691547394, 438337586, 197721366,
        ],
        8: [
        741534535, 294627492, 925196193, 755017934, 999229062, 34486686,
        32702574, 625548566, 425883514, 256169871,
        ],
        9: [
        710039100, 522400442, 317602808, 137745386, 129819799, 892543432,
        206755045, 144894843, 94550862, 78426390,
        ],
    },
    {
        0: [
        185438421, 435644199, 984803059, 425645718, 115033225, 433091545,
        546120530, 522837693, 213027990, 398642530,
        ],
        1: [
        17112185, 337852273, 561433786, 834718720, 874670101, 410870966,
        535792986, 92236167, 294942249, 61865974,
        ],
        2: [
        501578074, 613871116, 475121197, 741222194, 374671064, 990190172,
        397079808, 89315132, 622428060, 267854200,
        ],
        3: [
        894177118, 800439179, 784687395, 186460882, 532590570, 767879303,
        389552863, 590069684, 610033093, 904643775,
        ],
        4: [
        478640686, 350335580, 612152198, 593605447, 711915073, 816068564,
        415689961, 101409402, 262439045, 241307316,
        ],
        5: [
        223057313, 288188384, 897502263, 677169691, 587390655, 219707858,
        370896938, 804520100, 842188757, 144236842,
        ],
        6: [
        461785150, 30603339, 297499457, 329315925, 673273657, 54644589,
        792130768, 494978643, 768869939, 442677602,
        ],
        7: [
        370939374, 753051283, 274741998, 487955100, 941549286, 784350437,
        294703546, 794645949, 14688324, 915548112,
        ],
        8: [
        689510158, 344598185, 836010018, 183755482, 517796346, 640792744,
        913319214, 453444994, 712236792, 239706168,
        ],
        9: [
        12044979, 382171446, 20475803, 58761418, 173608688, 139619718,
        296863597, 289951708, 7853162, 336411142,
        ],
    },
    {
        0: [
        858307676, 969302480, 798272969, 24182233, 785137426, 407180277,
        290322899, 514539923, 140763289, 556538535,
        ],
        1: [
        652058140, 742265662, 472800429, 997296846, 936636387, 230693132,
        872220531, 985196254, 255560215, 356872914,
        ],
        2: [
        935600285, 143103438, 683550892, 477807047, 730521025, 566798138,
        897772061, 20812693, 706892062, 390536773,
        ],
        3: [
        971456679, 424133783, 725109131, 466678943, 723113483, 430835450,
        207836028, 789066630, 199137316, 466514068,
        ],
        4: [
        807095483, 240932059, 845690995, 257894484, 407804254, 890042766,
        908850487, 857942926, 726983978, 815028998,
        ],
        5: [
        144208835, 638058236, 58723761, 514456662, 50833295, 102754433,
        858562932, 560498642, 382120763, 478928406,
        ],
        6: [
        425264543, 844548331, 582978393, 222182696, 717461965, 359023560,
        350625490, 669614046, 710100455, 634771325,
        ],
        7: [
        526113230, 333323183, 59980654, 28556581, 721160623, 317242505,
        726138519, 389143064, 554578355, 3901721,
        ],
        8: [
        874896574, 669152800, 882954558, 425306586, 951117584, 594601525,
        99237862, 42823151, 86825025, 265688351,
        ],
        9: [
        530422916, 336797436, 62314146, 316478624, 285653493, 931071763,
        856608458, 63113239, 60749870, 154958403,
        ],
    },
    {
        0: [
        428109211, 20381497, 693527213, 492735013, 209627277, 988551115,
        365824898, 395764095, 731034469, 59578168,
        ],
        1: [
        640872734, 319197662, 379772384, 819658513, 254692796, 300073974,
        424396808, 465380123, 207006248, 480322874,
        ],
        2: [
        340794585, 473280002, 731976827, 569454718, 970026124, 912939141,
        278576543, 531588105, 890557200, 921200464,
        ],
        3: [
        33820520, 859882513, 672913379, 227639123, 941401062, 172235606,
        844377152, 779293945, 326177523, 275427687,
        ],
        4: [
        330489079, 354148431, 434175308, 881311525, 114908178, 121339198,
        876999851, 102514860, 46089890, 779111137,
        ],
        5: [
        216097243, 130477535, 855121002, 562556326, 343009137, 161947013,
        896670900, 460914469, 348725184, 966212623,
        ],
        6: [
        969555785, 608969886, 106168694, 468817121, 333881294, 867780451,
        432950851, 219610049, 368247403, 368292010,
        ],
        7: [
        930353404, 407417884, 828274656, 303079131, 844376127, 992139,
        61434498, 17843738, 553343487, 714694897,
        ],
        8: [
        129743955, 765471507, 343382333, 19893008, 573107342, 290262097,
        634529538, 194266668, 372661338, 930109094,
        ],
        9: [
        639463920, 60552041, 315626153, 193893494, 987117374, 537689966,
        757714127, 342231417, 970275105, 915813011,
        ],
    },
    {
        0: [
        487965153, 609972938, 87711101, 722652707, 164231372, 442963954,
        191284358, 828447421, 493509732, 452273360,
        ],
        1: [
        414395628, 601685118, 528037613, 663675640, 554384913, 459867525,
        855219032, 859769288, 378343639, 697106139,
        ],
        2: [
        163409121, 398941644, 139127076, 146778757, 954457525, 538408211,
        414769908, 975050352, 959192929, 338497214,
        ],
        3: [
        766306815, 630335722, 615395910, 545802092, 27767199, 71356618,
        331397216, 790765480, 652722991, 565800318,
        ],
        4: [
        256474560, 665553279, 306359258, 207898128, 712958322, 701996597,
        89405794, 383957011, 248055503, 926504465,
        ],
        5: [
        355448438, 681885621, 306552745, 369887689, 230668336, 531210776,
        814992130, 309022209, 63640075, 186558070,
        ],
        6: [
        425672460, 29768628, 292974020, 288760316, 599995300, 853727980,
        297760146, 430031663, 95208801, 213395874,
        ],
        7: [
        530127018, 151561221, 797794760, 204951399, 153623456, 901334529,
        725965, 810040145, 96232763, 312110504,
        ],
        8: [
        937946645, 472349865, 943738288, 176050749, 480823008, 900728437,
        259744281, 677509322, 23829340, 411117296,
        ],
        9: [
        774067490, 671165240, 200664455, 859714669, 316247681, 824105554,
        375690217, 337038871, 286825964, 477057752,
        ],
    },
    {
        0: [
        935428135, 560756348, 267402318, 678874669, 203211301, 812714501,
        753605869, 113665478, 490015829, 519117352,
        ],
        1: [
        914701242, 772249073, 798313972, 131488471, 753117234, 578759138,
        522272336, 888042215, 447294969, 202056255,
        ],
        2: [
        852826439, 619287794, 791654543, 193193612, 552518313, 933753300,
        108631558, 158102505, 921908730, 322242508,
        ],
        3: [
        916639615, 991670054, 498290240, 497411, 217921300, 867146014,
        52652476, 671025939, 864391752, 405831831,
        ],
        4: [
        347937103, 571309418, 704920361, 963500368, 49768732, 4148014,
        452625343, 801846961, 156959613, 323455786,
        ],
        5: [
        814100712, 235663274, 240210521, 639327611, 210014790, 840891520,
        965356846, 169603601, 840221897, 717423722,
        ],
        6: [
        616437443, 600207303, 253265303, 922003661, 285697100, 868348069,
        840163151, 569059095, 371932647, 752969520,
        ],
        7: [
        260154121, 979082531, 35494062, 853512316, 456570594, 366012815,
        874708419, 491578231, 343375211, 558997956,
        ],
        8: [
        705926240, 359163339, 958661220, 417867404, 133939364, 455617227,
        743797062, 770583289, 996491742, 369936046,
        ],
        9: [
        871080110, 44520691, 485725649, 132265167, 216284573, 312334350,
        399251604, 412678758, 211569346, 713583707,
        ],
    },
    {
        0: [
        964424436, 511046271, 594881058, 548864325, 556373678, 909881114,
        13217864, 591127344, 341361266, 739151307,
        ],
        1: [
        269972654, 282501670, 675845350, 17469759, 52756157, 423548755,
        784859865, 313802485, 186321711, 535302048,
        ],
        2: [
        505729346, 307708663, 904105215, 311746953, 257038950, 368590759,
        155051505, 100288565, 862101312, 328953701,
        ],
        3: [
        350162732, 193274655, 65746254, 27509598, 500322184, 648058202,
        530120100, 92850124, 437851066, 825386022,
        ],
        4: [
        164060309, 663224626, 673667223, 31058918, 966158920, 281531429,
        807440224, 299360260, 272316678, 699628449,
        ],
        5: [
        604189456, 384975239, 599473412, 47122127, 556569360, 747018971,
        900472876, 540114799, 181345265, 627781880,
        ],
        6: [
        504171150, 637442659, 585538602, 81635143, 27971697, 95373526,
        722795097, 946447897, 297833694, 535669243,
        ],
        7: [
        248784430, 462710241, 509620413, 573684035, 371596144, 582801750,
        159425016, 774859853, 765957146, 807326660,
        ],
        8: [
        393792333, 158069323, 387178691, 807832790, 622497830, 797166907,
        868074492, 419133014, 951401038, 562719001,
        ],
        9: [
        619206913, 295559210, 672272391, 317522263, 899491690, 812578855,
        461684982, 367215639, 940121880, 195047224,
        ],
    },
    {
        0: [
        266141367, 643368590, 493204439, 213266254, 525081263, 36810971,
        925330337, 64016228, 30379422, 248505025,
        ],
        1: [
        698086455, 867142486, 742275226, 512100811, 207031145, 167881333,
        539921481, 35344451, 325776684, 826631262,
        ],
        2: [
        685429757, 46587366, 632961167, 287775273, 815039195, 715616496,
        923484519, 911236617, 768266777, 168082965,
        ],
        3: [
        622406187, 782351680, 396752033, 770797907, 772266206, 976799495,
        72097690, 724576282, 998994042, 56755467,
        ],
        4: [
        10478739, 201808969, 489718601, 556932072, 428346360, 401130390,
        792919378, 315330513, 996223149, 608225975,
        ],
        5: [
        945578655, 432275308, 64234332, 807445856, 629620860, 202735834,
        566305648, 736842895, 971333255, 936804146,
        ],
        6: [
        302693299, 416494472, 867779977, 597469598, 194568103, 411261062,
        545944203, 117853530, 70125651, 229057346,
        ],
        7: [
        673250628, 762263586, 684508542, 822189548, 520413524, 729239346,
        472377224, 113755697, 481330538, 346446434,
        ],
        8: [
        321806851, 553878976, 339523866, 326529814, 250984258, 100356375,
        297588726, 995039910, 551514069, 285947956,
        ],
        9: [
        748527117, 835140016, 59174475, 530868702, 615314861, 799786796,
        871635036, 232036619, 970789694, 35821303,
        ],
    },
    {
        0: [
        555234143, 704975519, 196343793, 143453922, 668544152, 805418770,
        777514662, 749916529, 876758775, 85193440,
        ],
        1: [
        379137118, 509082919, 238268489, 651970765, 533408183, 165228140,
        413403496, 476547636, 852773532, 559561879,
        ],
        2: [
        53304365, 999302693, 159153930, 897653136, 789163960, 947417610,
        771576532, 541580298, 822458469, 79233691,
        ],
        3: [
        760549914, 909856239, 401219056, 797641437, 381961331, 103249764,
        402021074, 348898199, 848338363, 133562292,
        ],
        4: [
        935549517, 877578408, 833891622, 632794578, 896919685, 589244593,
        431962633, 717605876, 819578833, 47163558,
        ],
        5: [
        41835418, 295671628, 852608882, 960474666, 243719357, 43208579,
        230482833, 471328898, 147332845, 702761175,
        ],
        6: [
        992560564, 235688868, 430402846, 193308409, 714724540, 557507290,
        780137548, 505671246, 699193839, 483399792,
        ],
        7: [
        617510369, 256319728, 401169157, 427432939, 614469012, 551813313,
        571852635, 183661254, 111108507, 388055014,
        ],
        8: [
        21608658, 573251847, 336083154, 891134168, 250329021, 844750233,
        928824608, 286747166, 743936799, 929141186,
        ],
        9: [
        601401075, 920373047, 446143994, 840917514, 197059473, 136480672,
        942643996, 3912199, 746000694, 628582859,
        ],
    },
    {
        0: [
        391684241, 465913031, 542234979, 122445698, 497926950, 884590934,
        951636614, 10000724, 966043008, 274246309,
        ],
        1: [
        328444001, 425525019, 293732020, 83202947, 371279131, 241787260,
        880596470, 520786933, 654528003, 653247547,
        ],
        2: [
        596536359, 367131885, 481286624, 23350503, 288239633, 393205075,
        814415225, 314391967, 414808988, 716056422,
        ],
        3: [
        62288511, 371068475, 232428014, 320496475, 391211526, 376858999,
        854974860, 437175264, 178057155, 214279835,
        ],
        4: [
        662876937, 138695934, 647500785, 581200141, 228539005, 817415306,
        470335323, 119544482, 687980523, 449281924,
        ],
        5: [
        553176449, 945717827, 71528019, 467675051, 351712743, 885438310,
        902292782, 877789137, 267527501, 935826585,
        ],
        6: [
        382743820, 347163787, 727886628, 364043215, 821028505, 262651786,
        276453605, 283726022, 590984664, 164948349,
        ],
        7: [
        418621173, 679866196, 669919790, 761637194, 947814308, 349608003,
        646629897, 169914207, 961198396, 464887708,
        ],
        8: [
        862799221, 862993425, 214208161, 691628270, 179280370, 401628263,
        29801056, 372651615, 713825585, 416360568,
        ],
        9: [
        192972184, 558695663, 14214256, 187920787, 265397253, 561094649,
        85203639, 812500402, 454040620, 463663328,
        ],
    },
    {
        0: [
        83204528, 961189707, 331494426, 512415077, 372241451, 615673701,
        784647717, 591405492, 420233641, 902470015,
        ],
        1: [
        172009910, 116438379, 287347621, 333716, 841945851, 55496207,
        481914010, 895639258, 183172914, 609941056,
        ],
        2: [
        825301106, 812144826, 839958891, 141597786, 983672633, 845153106,
        764880294, 445437252, 489779696, 46344054,
        ],
        3: [
        716628294, 826863827, 926776721, 222558511, 338882994, 731630553,
        784496930, 794195032, 462081258, 553074154,
        ],
        4: [
        3996483, 308182369, 562466124, 442040535, 178058732, 303350824,
        684918033, 330566143, 468556121, 318769399,
        ],
        5: [
        568474865, 352857433, 813033961, 397211077, 28502199, 787046641,
        39797049, 298874931, 396365669, 84763326,
        ],
        6: [
        290342487, 573888407, 296303708, 613741320, 734286845, 690520247,
        431276736, 771768473, 756858765, 349271350,
        ],
        7: [
        321223482, 853067386, 552590859, 446792510, 133542173, 269566555,
        296945721, 87732220, 932908033, 42182329,
        ],
        8: [
        614793844, 376273399, 65244795, 977590993, 762481480, 710342959,
        64661679, 782027305, 148198374, 182812314,
        ],
        9: [
        685776081, 170043677, 664461763, 755986134, 157929938, 634605929,
        785572689, 403424159, 662964238, 306287000,
        ],
    },
    {
        0: [
        976576352, 932933978, 102674620, 98649980, 159352104, 61385040,
        459024239, 615800379, 39939876, 963224823,
        ],
        1: [
        338058799, 226361714, 87990589, 903923972, 932144785, 895127297,
        765653240, 787842988, 672808374, 440311570,
        ],
        2: [
        277907215, 970012413, 528502500, 35010165, 461782939, 15913315,
        533856399, 633126171, 235708495, 323265896,
        ],
        3: [
        723137727, 899639265, 602761608, 163857748, 418571463, 996622422,
        412257322, 527547139, 979728479, 900549494,
        ],
        4: [
        63999549, 102770448, 588208877, 331196418, 670566260, 24765140,
        737357992, 873371062, 375690710, 877447540,
        ],
        5: [
        132677640, 23846967, 171101228, 201090002, 439394175, 324586170,
        864238986, 126913519, 209089740, 871712908,
        ],
        6: [
        896460431, 981014113, 115699422, 479388677, 660565482, 995779903,
        578586083, 302944688, 321189704, 831577263,
        ],
        7: [
        399100776, 317789908, 943007809, 193821269, 281129313, 238390133,
        12941069, 173491377, 800393459, 430683331,
        ],
        8: [
        73008867, 160330107, 863010047, 108468176, 886420873, 488232684,
        707818776, 223240020, 71913683, 775488258,
        ],
        9: [
        982718380, 304617229, 678663515, 185907351, 599700831, 26326152,
        770867638, 490483501, 297500615, 208640110,
        ],
    },
    {
        0: [
        405058765, 744179011, 840670363, 692162386, 274817968, 787550488,
        343161, 251100256, 663952469, 606404725,
        ],
        1: [
        707890464, 798367496, 61627930, 851798437, 33364170, 953795937,
        400466047, 428215274, 718588450, 579068230,
        ],
        2: [
        181332723, 240270687, 832447631, 609661524, 595633256, 55058374,
        155695411, 211796189, 618957238, 315818316,
        ],
        3: [
        722330277, 820314921, 714953407, 905501914, 499402078, 53554614,
        159279517, 900261264, 867846625, 457498834,
        ],
        4: [
        335320362, 326763932, 629343836, 647966435, 666028114, 375805916,
        516955780, 654503983, 454859069, 848336115,
        ],
        5: [
        291609166, 428489098, 761509654, 854325717, 855007749, 567880469,
        190851755, 960453678, 796184556, 549160335,
        ],
        6: [
        391570117, 670660179, 253269629, 99453452, 394122758, 279448903,
        3428128, 748383171, 698634402, 886046173,
        ],
        7: [
        436579505, 142287462, 550906283, 807441412, 663385987, 98912903,
        923752003, 238836987, 870781796, 734172156,
        ],
        8: [
        223860912, 221162177, 846458903, 349832154, 740379610, 238875857,
        122650826, 90555583, 971986058, 285841195,
        ],
        9: [
        239627794, 638272276, 760804706, 594563968, 238904653, 121854998,
        923179286, 38538509, 134110553, 68080701,
        ],
    },
    {
        0: [
        142802855, 905719626, 826788443, 582322086, 738890536, 239238878,
        204675530, 420484002, 231583890, 390589270,
        ],
        1: [
        369761241, 32551084, 917859055, 549807490, 839933964, 399091878,
        345445274, 441190885, 224980849, 933977452,
        ],
        2: [
        29136407, 350401255, 471614984, 312593403, 388907000, 976060971,
        225414958, 680224003, 956268247, 340357081,
        ],
        3: [
        355350143, 625720353, 339377493, 8142714, 496061473, 460337653,
        463411757, 511539410, 196659190, 408860317,
        ],
        4: [
        578065737, 539971295, 870645387, 348630563, 188957548, 818966603,
        248299831, 958778761, 310689283, 616233615,
        ],
        5: [
        138155582, 908820083, 472557161, 238249749, 270406137, 510751255,
        601409131, 959940554, 657554131, 835154010,
        ],
        6: [
        952727810, 829442150, 604638555, 558801512, 357317732, 727342786,
        269119111, 797683630, 898473324, 678651763,
        ],
        7: [
        918107713, 351289416, 399980177, 647233091, 862858796, 299814616,
        87472749, 778433883, 289967261, 74387872,
        ],
        8: [
        605748396, 887323677, 142732911, 533550428, 613806042, 821786268,
        861957032, 598409971, 913097710, 216159387,
        ],
        9: [
        697859109, 536628023, 595621076, 842837674, 588997356, 578727354,
        652021613, 930954211, 980752800, 113869561,
        ],
    },
    {
        0: [
        744936517, 178378181, 939271148, 112946133, 339499093, 23739860,
        64123074, 376455133, 107435048, 649374836,
        ],
        1: [
        725060594, 342033191, 829977430, 688763533, 505254981, 793275363,
        409896995, 724247001, 686131665, 292656832,
        ],
        2: [
        829594406, 15474045, 269434888, 722328553, 672138739, 223183297,
        523863811, 483596784, 956658973, 888678372,
        ],
        3: [
        682293273, 472090040, 894097004, 814200446, 947875840, 529571381,
        119757116, 469095702, 517930980, 375837409,
        ],
        4: [
        454940277, 670640448, 34148922, 306223632, 271351229, 174651293,
        814948655, 423974591, 474057180, 679461455,
        ],
        5: [
        560570530, 741855705, 992916927, 61975524, 223412259, 312062210,
        760260675, 604835769, 874716593, 658112408,
        ],
        6: [
        695612294, 665885659, 894231923, 529055103, 774982182, 968858099,
        766601331, 258591124, 389665959, 608818985,
        ],
        7: [
        453623131, 496477442, 259239479, 56960497, 32961291, 794659362,
        864854121, 867684586, 940918330, 892403587,
        ],
        8: [
        448919115, 292804949, 290496293, 686758252, 506790098, 532035438,
        149560841, 867292704, 294412034, 897911751,
        ],
        9: [
        608115707, 703089104, 868657832, 694089644, 479918142, 911352779,
        774562885, 595972395, 118134300, 860482864,
        ],
    },
    {
        0: [
        978082454, 410591530, 212137786, 347585691, 420517576, 256952945,
        184194458, 558048243, 516763953, 576352796,
        ],
        1: [
        109877601, 630185039, 311142567, 934477697, 168107584, 226643094,
        113305703, 859657056, 242540607, 394826604,
        ],
        2: [
        397616664, 517463398, 501463349, 111584684, 816174552, 818419480,
        573183734, 547489868, 276739648, 666903312,
        ],
        3: [
        566577979, 45619043, 535668034, 986159632, 923201642, 112023369,
        182008260, 52477041, 365867445, 161098547,
        ],
        4: [
        832725729, 187902317, 3331301, 510350201, 964624230, 12209242,
        130870093, 764910455, 884999047, 516891685,
        ],
        5: [
        464951295, 532766647, 671863785, 623463444, 388520648, 944591657,
        855321331, 635752513, 863362876, 810607048,
        ],
        6: [
        913782962, 454565692, 974892196, 911929902, 436705658, 213126751,
        236011323, 723541115, 745080151, 590981322,
        ],
        7: [
        491673041, 923418773, 935577818, 982354409, 362353130, 941694786,
        540989069, 436768909, 464078862, 817373378,
        ],
        8: [
        703224320, 642807703, 548719846, 364008014, 772521873, 139252044,
        420571760, 440009153, 913494233, 732544686,
        ],
        9: [
        122216628, 219914876, 404514233, 100206537, 49782339, 687649217,
        124745574, 999072241, 183513151, 676166959,
        ],
    },
    {
        0: [
        866164857, 285327113, 79547475, 345332634, 483569538, 408517763,
        980330586, 162765242, 150286798, 938426742,
        ],
        1: [
        707615908, 18049399, 678566598, 348181250, 420112693, 190365206,
        996459215, 960134215, 308650178, 440169200,
        ],
        2: [
        264418550, 622361034, 904261149, 298700247, 785534914, 646235014,
        915562225, 328625701, 840649544, 642491249,
        ],
        3: [
        704600198, 882332090, 830563376, 446614666, 745270988, 243340496,
        87573727, 517810554, 863153265, 660286310,
        ],
        4: [
        341644432, 841895371, 74901778, 31474934, 51573892, 488953656,
        879165130, 541061064, 230840730, 670960806,
        ],
        5: [
        673931398, 9900463, 323654183, 97775503, 577342740, 292087654,
        9962670, 991169308, 298405859, 78009690,
        ],
        6: [
        407608425, 352033998, 475456521, 729466758, 694685165, 587196910,
        420781061, 935770887, 299224003, 220462762,
        ],
        7: [
        299684918, 477409856, 424208693, 65627707, 481254710, 430362356,
        383378094, 548330615, 113021496, 433999548,
        ],
        8: [
        51853584, 22849347, 9365454, 105932855, 618955804, 715034875,
        546681489, 692238883, 793509725, 880206548,
        ],
        9: [
        463581376, 967036659, 856932334, 663077068, 571252222, 129933737,
        540866411, 705090785, 422174621, 675016586,
        ],
    },
    {
        0: [
        59638487, 305145861, 535930379, 478379347, 477123334, 737244465,
        158590556, 636771595, 195147849, 711463955,
        ],
        1: [
        116488896, 221417386, 932841763, 463842119, 836574720, 495478862,
        101220819, 591133001, 817852551, 795789436,
        ],
        2: [
        407121244, 25992599, 700598591, 77851382, 820329729, 655723033,
        259865915, 657029794, 66525348, 574103505,
        ],
        3: [
        27883959, 123256638, 589512424, 392931105, 52189121, 945040664,
        763970772, 879741657, 346181459, 178024967,
        ],
        4: [
        226872252, 205349829, 154071718, 440820511, 564405563, 664651189,
        943845138, 723540659, 607888568, 96037782,
        ],
        5: [
        50477820, 954053397, 432098826, 491884945, 405959551, 310247709,
        973997700, 952438039, 750967010, 99014550,
        ],
        6: [
        170646432, 776280288, 455608568, 393014302, 977778196, 974235116,
        714815949, 118985224, 742426654, 17610159,
        ],
        7: [
        388100854, 138742846, 74061561, 463739796, 95430084, 588132507,
        549999605, 572660877, 775285950, 223660172,
        ],
        8: [
        774535692, 799014959, 827332130, 361523669, 510364906, 393891073,
        655659120, 586576034, 267952745, 790596983,
        ],
        9: [
        174561228, 125889880, 498861257, 430146965, 767797817, 231489140,
        685697245, 359987958, 183865302, 433893703,
        ],
    },
    {
        0: [
        63902067, 554719451, 598021043, 927923806, 454488406, 778067166,
        418529382, 161763263, 530341084, 175144390,
        ],
        1: [
        350089911, 252363478, 589594560, 164307960, 183697302, 349411540,
        493580355, 440492084, 527211620, 600444498,
        ],
        2: [
        924162511, 622840642, 161991410, 618359236, 5281185, 617817889,
        697575719, 375515745, 841070187, 371932267,
        ],
        3: [
        81014954, 693369157, 286468387, 195506200, 49295848, 164815207,
        322626535, 244236035, 526730179, 254614836,
        ],
        4: [
        172616601, 874063346, 918463728, 35979190, 899560344, 948629403,
        566701365, 43969451, 162074659, 371845671,
        ],
        5: [
        82737621, 642358424, 227312162, 827265785, 943579575, 442079712,
        601693652, 911829721, 664301029, 378801133,
        ],
        6: [
        638397395, 683014453, 44313324, 459978568, 310622009, 398513727,
        805467365, 557341603, 62153982, 917511761,
        ],
        7: [
        406435446, 35303310, 575874206, 802587785, 39158393, 61789854,
        972356924, 83392497, 985965270, 715773517,
        ],
        8: [
        693071730, 429035127, 245005365, 909689642, 702322421, 841584638,
        674023969, 530122049, 211259746, 642037411,
        ],
        9: [
        975900352, 346926582, 747675204, 201873292, 644864707, 285869593,
        764921816, 808214586, 439891764, 990021150,
        ],
    },
    {
        0: [
        733469402, 592581379, 156069890, 303793200, 62270817, 916978090,
        28710242, 174709181, 45486356, 152089249,
        ],
        1: [
        264781178, 901952338, 716192979, 283599517, 474523378, 606141299,
        922163979, 288103023, 722552323, 155041208,
        ],
        2: [
        289820899, 876393990, 418646554, 367255797, 819232461, 915359435,
        444678351, 537124532, 585191430, 607187463,
        ],
        3: [
        161924390, 363580944, 942337465, 761038484, 752494577, 154382971,
        399647546, 63011005, 958746981, 770870233,
        ],
        4: [
        394768526, 388816934, 672300070, 809829841, 410023823, 387315493,
        90077781, 935126744, 257404900, 409707171,
        ],
        5: [
        716814721, 636907883, 749003738, 213703065, 335916274, 514139528,
        969234378, 514760262, 228053848, 847991402,
        ],
        6: [
        405237150, 471897466, 379406163, 494252263, 409599608, 486280977,
        31414532, 846838922, 569020550, 325592540,
        ],
        7: [
        586464335, 172658085, 837951243, 189555987, 785307558, 750265873,
        8381858, 396385042, 411208646, 503872827,
        ],
        8: [
        622324889, 969831227, 100404808, 436900095, 170414978, 989905572,
        603098438, 928152158, 958689045, 736627069,
        ],
        9: [
        946270682, 523780210, 709139685, 965013486, 443444881, 292813287,
        480379383, 312569792, 71826375, 395972637,
        ],
    },
    {
        0: [
        829350985, 808211936, 431437437, 480641000, 619960263, 289413186,
        911721625, 998741203, 923668392, 390293064,
        ],
        1: [
        282362206, 287198241, 513944815, 632226646, 310652793, 415231299,
        748210869, 260137996, 328741400, 891348008,
        ],
        2: [
        843150674, 81960825, 694161716, 278052564, 326064435, 383632725,
        145537753, 844339454, 996981989, 623787618,
        ],
        3: [
        513706799, 543295702, 13191715, 402274729, 525422808, 613232680,
        973008152, 381034505, 965781154, 821557921,
        ],
        4: [
        82053336, 28089622, 429069946, 585706124, 167089689, 597554950,
        931785636, 830405797, 369804558, 194116093,
        ],
        5: [
        96573895, 486788561, 137360854, 662255173, 45187662, 462197293,
        831097691, 148880434, 441063117, 919981101,
        ],
        6: [
        307347168, 962220121, 110532728, 984815021, 339431285, 190022042,
        30762370, 697077107, 822474537, 770378676,
        ],
        7: [
        107878700, 514664107, 276685947, 450950002, 391705441, 269653964,
        793617367, 124899346, 782420658, 552269034,
        ],
        8: [
        36886499, 308209046, 595813030, 732229889, 561226815, 943929774,
        115171369, 640253709, 47603461, 3452631,
        ],
        9: [
        273348971, 185654580, 864675736, 237826453, 416124537, 833703112,
        524730838, 605699046, 664404010, 736192898,
        ],
    },
    {
        0: [
        311515859, 276725386, 869486323, 178639149, 412546716, 953768106,
        365481595, 769460381, 962536873, 397105744,
        ],
        1: [
        576813350, 865950257, 126549424, 576318325, 19539332, 55640420,
        427210150, 504187937, 555647667, 54564844,
        ],
        2: [
        116314852, 928678402, 91207145, 441205814, 884479475, 924934098,
        992831471, 77963958, 586262057, 465793675,
        ],
        3: [
        95569498, 102098529, 920556545, 427046620, 559656992, 885565887,
        651150212, 830134230, 944920968, 19473459,
        ],
        4: [
        358607622, 416031753, 384672928, 255697056, 872479923, 517868064,
        310930867, 875299245, 160605503, 346745568,
        ],
        5: [
        706049901, 670959277, 28690597, 745391268, 424746503, 849346414,
        846523584, 176715643, 422023735, 674479485,
        ],
        6: [
        523459477, 404283569, 905075205, 980990954, 88449969, 503524602,
        485892653, 87810397, 398514286, 746462451,
        ],
        7: [
        574841543, 617557618, 697978953, 289297280, 404069150, 15978365,
        512457246, 880953488, 839529727, 727948145,
        ],
        8: [
        75215051, 771559656, 553267054, 151202263, 761263191, 778192308,
        583489018, 713540670, 749172889, 648080558,
        ],
        9: [
        546960791, 189567826, 202742380, 229064584, 422949371, 702093479,
        521705441, 951101166, 265410338, 756718698,
        ],
    },
    {
        0: [
        496370205, 575986655, 393654658, 124457239, 616680143, 376528736,
        867363360, 856505570, 739313340, 177526638,
        ],
        1: [
        346030100, 172893814, 372376353, 79475460, 751328662, 218149897,
        709930103, 351659051, 418255877, 107704550,
        ],
        2: [
        48598000, 3775855, 792682988, 272275286, 707904495, 783475673,
        533855323, 776581837, 999115321, 724065969,
        ],
        3: [
        298849835, 500841205, 78236810, 883582060, 505698865, 723884694,
        12236990, 491510374, 98825870, 140428109,
        ],
        4: [
        14337933, 340365952, 658032664, 772218384, 415359629, 766566813,
        477076043, 602509644, 244009846, 292015912,
        ],
        5: [
        520376804, 768562570, 456072246, 546972908, 559952920, 598505936,
        627066352, 365266110, 520399159, 804164548,
        ],
        6: [
        80336385, 354501437, 98099759, 779113364, 526249102, 916345328,
        288752225, 522647647, 126165629, 42207332,
        ],
        7: [
        76757110, 161560210, 128980898, 316948823, 307732502, 626560548,
        575557538, 568127836, 610838258, 254368231,
        ],
        8: [
        292842707, 928712604, 123919702, 65162059, 567598545, 180131884,
        247190187, 666076280, 97888306, 900843669,
        ],
        9: [
        906667968, 553405475, 224549346, 820313511, 966725610, 555551618,
        456492440, 840957434, 537170678, 99560542,
        ],
    },
    {
        0: [
        205226150, 582809186, 593106662, 320233870, 676303804, 92040419,
        760799593, 620505378, 64412639, 419566867,
        ],
        1: [
        913008291, 751815956, 44180180, 961035886, 295938825, 581101923,
        438019486, 780310657, 571301487, 894600602,
        ],
        2: [
        364115846, 341615078, 148804337, 80571947, 987444268, 369292235,
        365419397, 513085673, 921449338, 478944796,
        ],
        3: [
        32606683, 427603746, 344512858, 437786263, 117203509, 232163479,
        85109624, 106932675, 712797141, 976119329,
        ],
        4: [
        968990540, 327607083, 764841257, 526712438, 55349275, 527059213,
        346149909, 396424867, 99359539, 226786894,
        ],
        5: [
        342081015, 54195935, 201016365, 760892161, 111260534, 513713770,
        441589357, 656616501, 888691343, 649550439,
        ],
        6: [
        856690848, 987099121, 180758609, 630416099, 482102756, 171254280,
        207551536, 882011304, 107638465, 483877371,
        ],
        7: [
        134605925, 97112219, 429121425, 826057521, 76879949, 698525372,
        898703856, 801696262, 382572457, 714812181,
        ],
        8: [
        317869616, 660649584, 754195011, 862559174, 850421937, 60675219,
        84662300, 680627201, 491735918, 602562710,
        ],
        9: [
        788563163, 433014789, 533039482, 259616342, 538681191, 156976935,
        137440394, 983530047, 360127044, 301783561,
        ],
    },
    {
        0: [
        576806854, 109727364, 897666990, 317733614, 644250172, 287142135,
        402732446, 212217471, 948844638, 97033613,
        ],
        1: [
        26148081, 650728917, 24045197, 810763778, 28683649, 360889394,
        488458184, 225731871, 253513228, 918472844,
        ],
        2: [
        152075843, 507441327, 475819820, 251370287, 752219087, 242295840,
        788277423, 757380520, 230173025, 694020792,
        ],
        3: [
        982953730, 820049130, 875829204, 54811159, 403610780, 771548004,
        104557848, 355202747, 38815900, 265222567,
        ],
        4: [
        6872818, 30471367, 326006104, 144823971, 762529586, 547744452,
        691573628, 937250603, 952615364, 165569385,
        ],
        5: [
        829609291, 338977425, 72432118, 692580108, 66719148, 964470794,
        648150007, 965567436, 991070958, 679724064,
        ],
        6: [
        778217990, 257546096, 415685177, 844121221, 59655526, 925563850,
        593300049, 108580167, 538164986, 561516070,
        ],
        7: [
        877656696, 677753668, 85864237, 290125850, 721457479, 673234278,
        58275721, 873783656, 880045446, 222566140,
        ],
        8: [
        725135261, 834926535, 555078979, 354720007, 72594864, 112974693,
        666592088, 194858385, 803264191, 804401788,
        ],
        9: [
        11578690, 943538824, 867167623, 729889949, 831280563, 933216403,
        35795007, 587525788, 830702946, 228643006,
        ],
    },
    {
        0: [
        809591438, 196118815, 230280383, 467416832, 644233584, 780839582,
        279176023, 267096501, 540901377, 895060450,
        ],
        1: [
        667940599, 363326329, 692332024, 566965716, 743761742, 924227577,
        395146644, 59745623, 282636429, 596716756,
        ],
        2: [
        308168375, 475320073, 808601385, 709417831, 948966338, 59863372,
        456884100, 383528016, 803973190, 535339741,
        ],
        3: [
        930864781, 357252159, 526549731, 401171185, 650584979, 299917058,
        500494778, 310312461, 698565193, 605657873,
        ],
        4: [
        203109286, 494728436, 103354385, 852036932, 609820657, 681487916,
        29726182, 480748404, 36770527, 100350916,
        ],
        5: [
        534814915, 969240009, 16780798, 505298563, 559582844, 995745900,
        272181545, 336419583, 874990687, 252616509,
        ],
        6: [
        652562296, 556062400, 290349062, 830088394, 916557376, 130722785,
        349876958, 313118486, 494475072, 604769323,
        ],
        7: [
        174742206, 712361465, 844779055, 972779950, 456626107, 308641296,
        474904694, 764117368, 288334135, 391397597,
        ],
        8: [
        920253260, 832017712, 775256640, 461777147, 344069479, 56759263,
        389701043, 372566256, 142091534, 502241619,
        ],
        9: [
        779226597, 435599951, 543267157, 529529031, 857060900, 844388437,
        304737494, 798252634, 433080674, 682609693,
        ],
    },
    {
        0: [
        186003687, 411191104, 931222408, 426007, 973835608, 568938671,
        698367588, 905887466, 396252664, 561329142,
        ],
        1: [
        12319564, 975723331, 59238319, 14616017, 574654305, 225075929,
        35140480, 301677652, 716218475, 970861923,
        ],
        2: [
        370778578, 725329662, 783157976, 685471290, 882630897, 949671009,
        597628906, 707509750, 244093914, 144913287,
        ],
        3: [
        458630265, 207058129, 154255686, 917685515, 467393375, 495653268,
        376462041, 783636441, 254083633, 186424342,
        ],
        4: [
        63044542, 63911702, 308384584, 801455218, 223805882, 618206679,
        616995610, 812384829, 245128215, 665806465,
        ],
        5: [
        103553848, 979690000, 330919360, 635445729, 270232890, 225398057,
        689121232, 645306260, 425693340, 85885875,
        ],
        6: [
        790637109, 751290226, 101361651, 838321464, 952846565, 703127581,
        703832988, 609273277, 51414277, 199433056,
        ],
        7: [
        632509196, 399586443, 607932620, 333272664, 15229688, 15228559,
        808886515, 989382300, 921748749, 329219978,
        ],
        8: [
        161771616, 403216741, 328724764, 800121078, 911912384, 562882756,
        444017305, 879779587, 26095589, 187524667,
        ],
        9: [
        74299363, 626730513, 769320672, 5442557, 75826516, 439230736, 7467683,
        603189349, 29870115, 864730517,
        ],
    },
    {
        0: [
        869872701, 929594756, 17237818, 275609346, 417031143, 909868254,
        537930265, 25987683, 184338058, 127352251,
        ],
        1: [
        555831502, 226639111, 999318406, 522383849, 142543250, 280437228,
        608120447, 712180435, 699755394, 584099727,
        ],
        2: [
        278072412, 575768630, 201856254, 989042097, 715938515, 406287934,
        607929629, 19660359, 359438162, 540388692,
        ],
        3: [
        658755967, 804783822, 432178987, 248002851, 980833619, 275507759,
        917402437, 86687661, 545481866, 521330378,
        ],
        4: [
        564994776, 732908101, 84092775, 615697179, 80324494, 74408374,
        224380532, 624802922, 621297753, 826851237,
        ],
        5: [
        536942941, 548109164, 768325428, 919733729, 891783580, 111013312,
        990279806, 501660879, 818057627, 141356294,
        ],
        6: [
        531064335, 56163640, 837444836, 70335730, 46018707, 276546294,
        924659456, 140548184, 560488785, 527121606,
        ],
        7: [
        186388281, 48589793, 549722763, 593751213, 711156454, 273932753,
        412658176, 293928680, 65386090, 675358420,
        ],
        8: [
        390527481, 219943529, 423180377, 310791634, 306544007, 644476977,
        803877978, 947396241, 155714890, 459843362,
        ],
        9: [
        159067101, 797580081, 789606602, 246918118, 396859603, 334807532,
        829818841, 748575368, 107379022, 696516772,
        ],
    },
    {
        0: [
        340400824, 833201798, 257139664, 176249600, 935797404, 484406808,
        312694293, 878623471, 555098334, 838038063,
        ],
        1: [
        652953992, 104574144, 395714274, 408534070, 927634353, 353331799,
        816702661, 26482538, 811662099, 416972365,
        ],
        2: [
        820061032, 299044376, 170360541, 648020725, 24752332, 161780789,
        992191302, 177436716, 889544758, 692260334,
        ],
        3: [
        330283058, 540681543, 568269561, 549171505, 125670710, 531424191,
        975037145, 42867131, 979312553, 44517405,
        ],
        4: [
        130766379, 36706354, 109659944, 620003775, 203495359, 917283575,
        226072190, 861699121, 186698421, 590138372,
        ],
        5: [
        295350198, 96546751, 594916090, 956361596, 711038939, 169819891,
        175327870, 299475953, 682749735, 484378302,
        ],
        6: [
        636047306, 779017231, 774534192, 952957753, 832931156, 102705874,
        723862951, 740244770, 398264582, 200315356,
        ],
        7: [
        180771894, 588740543, 232156467, 132137612, 478495056, 230710084,
        434343965, 547312847, 77914717, 204930991,
        ],
        8: [
        739660583, 593643689, 284796651, 865516196, 643228921, 680081000,
        622259935, 520784352, 575512125, 636494134,
        ],
        9: [
        13003859, 410601361, 669839005, 595035128, 411182574, 475370361,
        134985745, 31791988, 583643893, 651102580,
        ],
    },
    {
        0: [
        144113799, 45005038, 904793365, 733840993, 527557962, 421484044,
        130906568, 451561726, 702814813, 709058588,
        ],
        1: [
        693609333, 560170487, 130713845, 173595856, 802801947, 37066339,
        8447749, 220458302, 858897801, 581565088,
        ],
        2: [
        944295862, 551258682, 913090904, 404157888, 694458047, 359351233,
        998090644, 973702364, 387025413, 871825260,
        ],
        3: [
        555964622, 863459543, 562427156, 436835208, 383415531, 825264567,
        752827468, 911857493, 199799679, 841457144,
        ],
        4: [
        38931728, 302322347, 15597744, 5219864, 253319542, 628199453,
        650688452, 995731956, 585189925, 669855694,
        ],
        5: [
        145380758, 606443305, 824296892, 294828307, 616703165, 565549058,
        730137562, 752594709, 416332977, 482345688,
        ],
        6: [
        785662413, 817092691, 888415344, 133728641, 329233964, 471216695,
        588579989, 292817083, 939198405, 883267573,
        ],
        7: [
        615979748, 238769214, 736556910, 544999018, 650362926, 22815971,
        828022780, 304686271, 868219057, 694498445,
        ],
        8: [
        130710171, 436780939, 697527655, 177268984, 654758489, 308544021,
        696629815, 700452255, 941206339, 183316053,
        ],
        9: [
        217918991, 255001834, 263656651, 625757422, 952424901, 931051233,
        120449673, 466260268, 70769854, 368123807,
        ],
    },
    {
        0: [
        51297704, 798398102, 743221232, 755359027, 752566317, 723073220,
        397888564, 914500748, 951046534, 230959918,
        ],
        1: [
        32695869, 545318580, 954430049, 889275156, 113621130, 287470436,
        972932906, 55843094, 111175298, 737803192,
        ],
        2: [
        942220139, 913403478, 84268943, 356998054, 222988038, 583990742,
        183096360, 37365649, 606398203, 914625233,
        ],
        3: [
        613700867, 312082923, 650342528, 602900092, 253698297, 185750608,
        407348646, 831223447, 703970088, 260676290,
        ],
        4: [
        780212554, 341179717, 436451563, 971272568, 474530102, 397624608,
        642444825, 249629864, 973282393, 471545437,
        ],
        5: [
        351560226, 629731724, 314231961, 198680382, 206628372, 938279753,
        334341961, 620516933, 35180192, 672613301,
        ],
        6: [
        678697480, 481117792, 104527220, 849626517, 97127192, 154851434,
        891258232, 534532115, 310834434, 798335567,
        ],
        7: [
        293032034, 385891673, 670066546, 839332486, 72703781, 875479367,
        522331184, 69229547, 507990380, 491255285,
        ],
        8: [
        515384026, 66591861, 210785357, 288300694, 296111262, 751903634,
        61913919, 176492091, 883977673, 715233538,
        ],
        9: [
        732355238, 960978992, 977585530, 177552844, 196087715, 968812940,
        825234196, 872168664, 273338481, 491234658,
        ],
    },
    {
        0: [
        779541025, 592438133, 399115597, 416251383, 504737095, 889278664,
        610727796, 608903285, 441181725, 8008837,
        ],
        1: [
        944594096, 80927012, 777907993, 468728867, 803247401, 506474056,
        5628870, 852009944, 773993515, 870630245,
        ],
        2: [
        6899974, 207533836, 210277567, 767421108, 605315983, 381889144,
        189517245, 472078591, 552235109, 719425724,
        ],
        3: [
        296815464, 291066266, 103418253, 225432693, 48317106, 69366958,
        934916500, 393889747, 6189659, 568872575,
        ],
        4: [
        129820916, 466792805, 190298853, 743004686, 260356412, 515178153,
        322275955, 143650536, 9835784, 79912815,
        ],
        5: [
        913140306, 974874746, 273559220, 346247455, 180745872, 442663563,
        61940002, 256568113, 323201441, 799157733,
        ],
        6: [
        745020057, 528851633, 532804462, 962690121, 559019807, 239411515,
        135284382, 912418967, 231517198, 952718044,
        ],
        7: [
        434814183, 248427477, 537647835, 277527097, 353967864, 631281950,
        861297039, 830638735, 290051739, 858685416,
        ],
        8: [
        936935732, 483030127, 486879586, 966673972, 623335619, 723581660,
        712787944, 512990907, 918593400, 205885344,
        ],
        9: [
        572647498, 348046670, 871973891, 232567766, 517285163, 311767103,
        579321677, 917988571, 162341049, 306599454,
        ],
    },
    {
        0: [
        969666565, 858261408, 779180762, 64923302, 272305805, 921189287,
        57103480, 693408777, 73674173, 803628029,
        ],
        1: [
        830324665, 674892520, 894849741, 288516889, 124995086, 905049297,
        497543309, 70151813, 185464780, 614623275,
        ],
        2: [
        367478609, 14961938, 210645972, 239587799, 945455081, 242021922,
        201319464, 13286368, 116702468, 25010011,
        ],
        3: [
        416443649, 369722995, 620380252, 668590844, 412050061, 356374822,
        420883230, 847039460, 859642925, 80129044,
        ],
        4: [
        69751254, 584538060, 924647747, 875946364, 279798433, 608778037,
        641761011, 689358907, 743581503, 779843791,
        ],
        5: [
        491018307, 122534600, 148226423, 110781220, 976527909, 93693379,
        308175648, 958394379, 909323741, 29126070,
        ],
        6: [
        105518822, 416831797, 140226889, 692846781, 386074068, 66114169,
        385674136, 540611392, 738191057, 448726695,
        ],
        7: [
        279146626, 303607291, 43354641, 530888180, 685469773, 878459676,
        297783982, 452497476, 704361036, 38036333,
        ],
        8: [
        868163785, 818036004, 542293859, 192653000, 256305463, 215354962,
        469316141, 284926428, 863103986, 492465138,
        ],
        9: [
        815641823, 364279512, 582540414, 616816808, 638944596, 14291802,
        610863842, 637986579, 980854254, 24678760,
        ],
    },
    {
        0: [
        195180163, 607735843, 402767644, 643781951, 938781295, 441670683,
        601314208, 77908642, 860458066, 155534862,
        ],
        1: [
        943841233, 891300473, 82681546, 32815463, 955554127, 57058695,
        394916737, 286986138, 228756329, 586525795,
        ],
        2: [
        772179185, 543101183, 973347163, 731010659, 546069487, 710321260,
        896751992, 825003218, 73406723, 304299549,
        ],
        3: [
        159110254, 823577737, 62641501, 955152308, 765551714, 461584370,
        598728568, 965249321, 325006642, 823349302,
        ],
        4: [
        32248928, 968348415, 367776598, 583763399, 169059000, 582725383,
        144734584, 724396839, 518949887, 467329904,
        ],
        5: [
        604061185, 432978463, 448590947, 956705092, 931602536, 450719773,
        945140184, 650543835, 183087415, 979298059,
        ],
        6: [
        669552752, 961273519, 707817076, 539573892, 966540082, 881218277,
        938109753, 511001665, 148577262, 611381090,
        ],
        7: [
        798792546, 842023803, 320501968, 147195781, 660902375, 256306038,
        931426419, 121522399, 407241664, 272340808,
        ],
        8: [
        76030055, 892860028, 748652740, 221664604, 606933617, 360081325,
        65308681, 198323914, 40942578, 428922822,
        ],
        9: [
        720076317, 164693723, 43800077, 504109586, 321257940, 318642806,
        93809865, 494275009, 1885829, 620703811,
        ],
    },
    {
        0: [
        806269574, 46067647, 1135809, 270558999, 794918971, 927513059,
        47843962, 272498932, 106143802, 730376385,
        ],
        1: [
        897503179, 467038183, 86354088, 409503474, 611563797, 574089346,
        191208520, 654771698, 323032362, 211494308,
        ],
        2: [
        538698913, 338162898, 728374776, 137884485, 898067900, 76100458,
        727714226, 777305069, 470615876, 192504482,
        ],
        3: [
        821425043, 903327834, 970409498, 612387967, 50557791, 587747944,
        589948074, 358969621, 671451149, 379089671,
        ],
        4: [
        428218214, 814762704, 765291759, 154955540, 717181374, 754711675,
        55337614, 597123316, 153848502, 747939835,
        ],
        5: [
        781384515, 380109211, 279315592, 452931453, 195538176, 910719125,
        995647696, 249929218, 261329960, 456036105,
        ],
        6: [
        191365493, 601027840, 741594453, 385495347, 569311427, 723419233,
        485097696, 230901608, 467267426, 56687395,
        ],
        7: [
        713410126, 20820835, 934008992, 912852152, 715890858, 833962873,
        514701004, 838883112, 211206611, 461634716,
        ],
        8: [
        689661386, 74936976, 528161075, 259431472, 486402131, 706223085,
        531317393, 466362760, 17325051, 860329242,
        ],
        9: [
        102395396, 206162933, 784946677, 581628619, 376089968, 640971469,
        395057405, 229214199, 558576572, 737238540,
        ],
    },
    {
        0: [
        317734893, 472094972, 992689004, 565167805, 861416671, 346570034,
        944214408, 682932390, 651294238, 716046909,
        ],
        1: [
        975438236, 692511329, 573360435, 912071094, 429080506, 59707835,
        891253782, 808887151, 761028408, 668420164,
        ],
        2: [
        908130000, 664126157, 163924515, 914136707, 614947015, 126059940,
        414708605, 709669838, 212350606, 230323053,
        ],
        3: [
        418690978, 619515406, 82647438, 367630472, 34915369, 727292300,
        395344119, 133815061, 515929561, 98061899,
        ],
        4: [
        522533557, 810381580, 337475323, 359974009, 842413896, 714791932,
        983743034, 536321860, 950732063, 183942248,
        ],
        5: [
        527262620, 178696942, 12688367, 306673223, 201745221, 362291480,
        832006194, 866864135, 541645002, 670187720,
        ],
        6: [
        381513874, 565112642, 176274650, 507330574, 601530825, 662748667,
        582302418, 851740477, 170005020, 189457993,
        ],
        7: [
        47643563, 732504202, 180415950, 796180063, 681291506, 602498064,
        574257461, 300609869, 463553755, 560560797,
        ],
        8: [
        707775876, 627642236, 669020036, 635081022, 293347161, 511828362,
        204247006, 350740434, 780021518, 710363299,
        ],
        9: [
        232211395, 323395841, 616462354, 963423408, 911715578, 985939737,
        169150749, 555208734, 97506025, 810886196,
        ],
    },
    {
        0: [
        554027069, 659610766, 86532268, 202644781, 370256848, 998275954,
        321775201, 532787350, 650297828, 848086839,
        ],
        1: [
        27245945, 25043122, 738144495, 83590957, 694834372, 566703831,
        249466205, 404019221, 667305473, 585859349,
        ],
        2: [
        602458206, 416855511, 555767247, 563619916, 988461848, 986895758,
        715466236, 415160443, 436783526, 19238601,
        ],
        3: [
        713409298, 189695071, 168827743, 94100248, 162010930, 803927549,
        255395618, 150358647, 310658126, 289551046,
        ],
        4: [
        926389812, 235446058, 909485019, 184092172, 638107952, 906554994,
        109341668, 338345733, 936661329, 806544011,
        ],
        5: [
        44217497, 671911656, 67080711, 917689255, 805372630, 120639838,
        283993086, 143586698, 473677416, 72474645,
        ],
        6: [
        641920554, 347937109, 877161645, 266401180, 341679177, 97860584,
        166364965, 712499333, 489489789, 79681152,
        ],
        7: [
        252362042, 231611433, 283952389, 603775143, 106616720, 855075769,
        854776286, 808535086, 230001958, 896975773,
        ],
        8: [
        581376478, 222726269, 491532671, 662740589, 2356399, 994916966,
        501471469, 47712508, 46838118, 539093570,
        ],
        9: [
        335217346, 393902637, 897314538, 955744450, 783248178, 9791413,
        880193859, 844587483, 14902867, 383006788,
        ],
    },
    {
        0: [
        8539494, 506373043, 699657711, 396363666, 520533133, 377136538,
        124806649, 504125127, 543745418, 523933485,
        ],
        1: [
        960927016, 692219477, 133446870, 147340392, 175188929, 909658070,
        180017113, 794249074, 619799562, 134023851,
        ],
        2: [
        368408557, 254593649, 621805260, 319537358, 238824610, 495778221,
        412268549, 209076311, 594530188, 305777921,
        ],
        3: [
        374029472, 527095517, 631532615, 433230205, 798684131, 941949535,
        245061409, 352116426, 965241868, 325065502,
        ],
        4: [
        743722937, 310261096, 853156716, 926664060, 828163501, 715147333,
        275988248, 851534395, 509865546, 631759412,
        ],
        5: [
        440945912, 440323199, 25634063, 210003298, 480069323, 160882649,
        327517400, 349105980, 856777775, 209868288,
        ],
        6: [
        592850036, 14942731, 758284022, 483609057, 749899281, 50237997,
        563753631, 50280886, 289188018, 737682945,
        ],
        7: [
        426938616, 398566460, 425312100, 699619866, 552454281, 391991190,
        231814730, 247057254, 298122092, 380900521,
        ],
        8: [
        665979696, 367040117, 59095508, 776453216, 948078193, 673154673,
        330708280, 247242792, 265332846, 901452742,
        ],
        9: [
        501660255, 306409030, 761870347, 624064737, 553529250, 924878725,
        761112418, 451731377, 209196639, 372284434,
        ],
    },
    {
        0: [
        41564400, 974241347, 603761016, 245408826, 681137695, 461498735,
        812760247, 142737459, 386563977, 427215844,
        ],
        1: [
        26689901, 147600220, 324981274, 516281251, 148953798, 780534324,
        834670816, 214027670, 690682817, 519501101,
        ],
        2: [
        986750110, 512652762, 842196195, 759951552, 879152779, 906156760,
        849340672, 993547420, 408253597, 593250761,
        ],
        3: [
        586351811, 336788347, 747040817, 861288224, 510772700, 4188592,
        149139730, 960762489, 963514236, 121020817,
        ],
        4: [
        149379240, 810540443, 487091025, 746492997, 483210778, 367002330,
        140239370, 4438469, 823494794, 262887912,
        ],
        5: [
        359273180, 331951544, 795107108, 333442672, 859323543, 869967746,
        737060413, 642471024, 827753529, 293533125,
        ],
        6: [
        189824669, 954963284, 501722496, 433186553, 161003454, 953775499,
        170969015, 179010275, 913576724, 467013452,
        ],
        7: [
        868590990, 888380333, 725073290, 147991964, 475491163, 588006839,
        94928032, 468504912, 50223645, 142383272,
        ],
        8: [
        728949982, 485623236, 783437983, 884556582, 713925086, 923479414,
        279885315, 525661857, 406220285, 440411168,
        ],
        9: [
        646670077, 801901242, 129255219, 444190824, 932501414, 42773803,
        461457807, 329057364, 994698875, 246352036,
        ],
    },
    {
        0: [
        962854659, 332532965, 189247329, 914149599, 105774979, 154120793,
        70950658, 27134929, 456605131, 465971124,
        ],
        1: [
        33272639, 219377203, 883692372, 18013114, 305975168, 52536650,
        524758321, 612246891, 350707929, 7307631,
        ],
        2: [
        610863249, 821455778, 618862497, 492909107, 53152801, 639350759,
        229658921, 3689132, 717868404, 730073110,
        ],
        3: [
        881995798, 520823711, 877442193, 232762390, 47994366, 517684195,
        130372613, 657304660, 7615043, 611762677,
        ],
        4: [
        44318994, 442727325, 138361386, 168275422, 891282440, 779006971,
        802218915, 260113998, 325817459, 421168751,
        ],
        5: [
        634690605, 17868028, 748368404, 670646685, 388560956, 857184667,
        767779060, 302885223, 524685399, 736017054,
        ],
        6: [
        805375938, 552339205, 880504097, 399865880, 458751324, 121562019,
        129826829, 367651040, 87711393, 216981242,
        ],
        7: [
        483721427, 736890676, 783089893, 246941373, 429621063, 23448635,
        862920379, 165987852, 156782740, 669040887,
        ],
        8: [
        868505412, 235672637, 67918185, 402008817, 480712469, 878525931,
        416326049, 368335713, 257600252, 648382045,
        ],
        9: [
        422771527, 664020831, 286579922, 717550328, 511599966, 880520094,
        640983565, 933950990, 43316523, 499987804,
        ],
    },
    {
        0: [
        690235716, 228695993, 343452328, 21965324, 101784392, 885768422,
        935170552, 926859135, 33409252, 161012516,
        ],
        1: [
        927747950, 177528142, 884333755, 764865652, 783568381, 842161052,
        671078418, 564714075, 807974224, 241328057,
        ],
        2: [
        591788944, 711632036, 434567378, 115249020, 17837351, 147671499,
        146341455, 272021812, 896173907, 120019415,
        ],
        3: [
        794152054, 952986506, 398165637, 287460083, 129680053, 746823778,
        521578453, 127272866, 873914904, 163392534,
        ],
        4: [
        441494299, 265087507, 126436252, 507681366, 791400254, 256826773,
        992421691, 130498135, 607918806, 635016405,
        ],
        5: [
        471358101, 388232208, 279619627, 245525263, 531524184, 515842352,
        615594703, 528153026, 915181639, 210319331,
        ],
        6: [
        203442931, 117097162, 437682918, 456419847, 191456352, 2230328,
        932110065, 185170392, 933702262, 994397679,
        ],
        7: [
        906970627, 839621881, 981057984, 709793767, 267331853, 876643795,
        543109448, 68530269, 215928287, 80149683,
        ],
        8: [
        242302203, 875158414, 714555083, 174398727, 287177552, 921271043,
        138632486, 818972847, 246113644, 818933526,
        ],
        9: [
        401505186, 782220790, 150579883, 759664924, 750088838, 728912449,
        985094858, 637105701, 125495502, 786288306,
        ],
    },
    {
        0: [
        973857062, 234385625, 547988339, 459565980, 143012875, 846493079,
        69133521, 723856869, 462479108, 348410209,
        ],
        1: [
        71475901, 32931249, 60190254, 127681726, 142093316, 195914780,
        146076116, 63549651, 193049919, 928484187,
        ],
        2: [
        37051667, 823455249, 902027764, 201285733, 19008505, 301034755,
        866971571, 571529399, 483057175, 51675078,
        ],
        3: [
        686717740, 989853913, 925645926, 808439011, 734686696, 790127850,
        110575735, 886956964, 773827112, 469056301,
        ],
        4: [
        818855109, 808791814, 346354646, 161679247, 402882358, 396126896,
        890981910, 934212746, 490842169, 539221665,
        ],
        5: [
        43797024, 34565999, 243522921, 975438939, 65585842, 284269656,
        295277018, 481513923, 985594735, 882420120,
        ],
        6: [
        839959845, 174336694, 701754136, 553591866, 67130955, 551324504,
        971064385, 198435111, 880295664, 76833943,
        ],
        7: [
        5440835, 379349534, 917411282, 425784586, 276594023, 653596715,
        327850484, 259815982, 93110336, 219453991,
        ],
        8: [
        343199676, 354216133, 275439069, 362196843, 565809086, 977189576,
        896995740, 926040295, 946981080, 71238176,
        ],
        9: [
        734749131, 713700077, 5106107, 215176413, 680093250, 878390855,
        74583345, 281455137, 458709390, 989339689,
        ],
    },
    {
        0: [
        373176565, 71506473, 625175239, 201004932, 193344678, 594567499,
        671148311, 159204863, 116889799, 278486195,
        ],
        1: [
        454923065, 409288578, 894720084, 873516131, 223336112, 897341143,
        152981408, 197072032, 211090471, 701055860,
        ],
        2: [
        641966249, 917857775, 424246575, 316764584, 838654637, 289542780,
        340572581, 585137917, 561057375, 797524204,
        ],
        3: [
        726506955, 164675290, 711415437, 961616813, 318490046, 353062638,
        629554003, 757006086, 639062386, 944703776,
        ],
        4: [
        800577813, 463534284, 886748723, 603351729, 772263744, 420161877,
        469407310, 513334828, 135530344, 416452989,
        ],
        5: [
        477159056, 631106588, 409118626, 672016558, 407601566, 414046020,
        586841783, 984233152, 82480496, 330954410,
        ],
        6: [
        535140022, 730541525, 724501803, 967875724, 457577862, 793416425,
        853031215, 686810473, 623980998, 643989284,
        ],
        7: [
        151407146, 579210659, 847928345, 165977536, 79892514, 282316034,
        191073955, 574570537, 651855123, 687803102,
        ],
        8: [
        989901304, 958117819, 864166130, 818799383, 672166193, 887237155,
        559265116, 191861802, 569375308, 361521013,
        ],
        9: [
        14867054, 927789423, 96774345, 3339295, 532264309, 513398662,
        190443315, 381067622, 375221643, 539354041,
        ],
    },
    {
        0: [
        807411816, 827113589, 24182699, 281750166, 526126768, 908028335,
        833918788, 391953162, 390770902, 866657131,
        ],
        1: [
        716257827, 558574316, 208733097, 749138128, 696629203, 763703213,
        867354723, 910078769, 274878683, 796020088,
        ],
        2: [
        62653028, 448103636, 468398590, 90295810, 24728117, 293269209,
        86097173, 358649982, 798718642, 25896984,
        ],
        3: [
        362104138, 710434916, 415158223, 599745554, 122863412, 881988702,
        152949325, 882953909, 284360246, 762189924,
        ],
        4: [
        563618682, 897360658, 55497713, 19754411, 106391685, 443126382,
        895431356, 361610277, 560932075, 355087831,
        ],
        5: [
        870209232, 652465608, 628680936, 402208741, 143700715, 809511975,
        208612317, 756400146, 550380176, 572640175,
        ],
        6: [
        371776382, 335721931, 665266956, 994941006, 669945607, 51902226,
        476529473, 920771206, 583974951, 318267878,
        ],
        7: [
        420334073, 195170417, 495052007, 629599215, 712546169, 756139269,
        899500805, 703090627, 319115173, 411153152,
        ],
        8: [
        669396717, 54173576, 401344756, 454791927, 223219425, 295472635,
        284984149, 839982976, 33760151, 590627833,
        ],
        9: [
        820181773, 965896937, 133523357, 884874022, 627769524, 915083139,
        156320270, 861051583, 523325386, 963435026,
        ],
    },
    {
        0: [
        648569931, 638454918, 299687787, 158487184, 826907134, 620257792,
        713153489, 249382755, 580292487, 125020578,
        ],
        1: [
        133873781, 7552039, 941252340, 787744916, 580916853, 329158558,
        558451818, 917157324, 205609726, 644439406,
        ],
        2: [
        747537287, 489921866, 254199814, 385831052, 836839800, 843038615,
        428527892, 724910271, 485307304, 159149767,
        ],
        3: [
        400654468, 757837013, 307746085, 11589744, 861851650, 405870891,
        87443800, 984940247, 915483365, 67898644,
        ],
        4: [
        967921630, 199095358, 240786678, 49961578, 770525221, 643264354,
        88100141, 848980129, 92864504, 140008450,
        ],
        5: [
        759529119, 927827969, 160602344, 104648822, 263423028, 802156885,
        686165000, 360712090, 710037035, 122839098,
        ],
        6: [
        351892831, 390329150, 759135492, 892647785, 167912498, 438660362,
        532115209, 183228245, 631171835, 531328810,
        ],
        7: [
        32224084, 859205060, 362053113, 684595613, 258271667, 74201236,
        468354372, 633016092, 506291915, 524169889,
        ],
        8: [
        624947271, 74524536, 953431076, 61292409, 546904271, 714200173,
        880742066, 729770423, 143075773, 554683108,
        ],
        9: [
        960754805, 943786814, 44236677, 297677016, 930029361, 650280606,
        859909208, 737591977, 314421209, 951747322,
        ],
    },
    {
        0: [
        763369138, 799220451, 135479242, 157915098, 850324023, 490459755,
        946770360, 904996811, 407822915, 750229286,
        ],
        1: [
        404449450, 214009362, 363615647, 207410151, 577523120, 215755779,
        605526010, 243074852, 420256482, 206862266,
        ],
        2: [
        857164335, 624585571, 186511099, 404073110, 220327082, 974579421,
        9235840, 795426401, 891392500, 423132699,
        ],
        3: [
        758412167, 357060914, 691091924, 556097803, 620830143, 854865297,
        334226268, 321987861, 641782966, 523609819,
        ],
        4: [
        44983893, 552466522, 898260649, 82323619, 879852313, 334057893,
        761709278, 886973802, 760223743, 291104972,
        ],
        5: [
        314950577, 330642627, 237217343, 127039714, 774832718, 847719709,
        254429513, 142742970, 557530164, 944227390,
        ],
        6: [
        831759976, 183432080, 906405944, 914795, 559962807, 157471148,
        430250390, 229768821, 260643144, 186819008,
        ],
        7: [
        508730294, 147946311, 669981018, 794348520, 511667247, 117279818,
        934774462, 159510366, 227397689, 863184915,
        ],
        8: [
        599429796, 886123387, 502760298, 548619152, 254158423, 775059595,
        290131197, 480526214, 80503014, 209636978,
        ],
        9: [
        204211016, 63718575, 847565659, 998401796, 780130977, 736015510,
        460325615, 454830983, 57327645, 474067103,
        ],
    },
    {
        0: [
        784120062, 163090309, 366542198, 114949166, 771505189, 9227626,
        955162320, 207211953, 361748778, 574305541,
        ],
        1: [
        986161862, 116023723, 436516122, 30378525, 370816027, 849239419,
        314949861, 288357714, 260407619, 765528186,
        ],
        2: [
        301339016, 975267833, 443308217, 502544893, 657213117, 655811236,
        346793106, 291966890, 753985513, 789698879,
        ],
        3: [
        336166435, 718357235, 389584492, 616169139, 514304110, 762827390,
        858423553, 511059604, 240195807, 54549429,
        ],
        4: [
        223828449, 333659227, 810981598, 615316285, 394085800, 148458356,
        111484939, 838609457, 891885908, 848148584,
        ],
        5: [
        545308089, 483836084, 61324606, 302593148, 777022552, 297606571,
        765825675, 124063691, 193885445, 499898124,
        ],
        6: [
        523345575, 620247301, 732780422, 820340877, 357734832, 716357866,
        100392346, 284547088, 280020138, 991564754,
        ],
        7: [
        836335004, 612770652, 111582448, 403671024, 740253908, 483853067,
        899514700, 845483703, 541002725, 422137776,
        ],
        8: [
        454751211, 354228776, 368984165, 858355397, 967235390, 832116014,
        852816469, 257763074, 159755913, 321055901,
        ],
        9: [
        802166795, 784564426, 48154130, 123770110, 856926663, 227603087,
        308528515, 366507559, 89763415, 459742704,
        ],
    },
    {
        0: [
        964906533, 701459440, 655870672, 359043764, 144694558, 17202086,
        280187068, 975641585, 83630651, 216036908,
        ],
        1: [
        228668592, 607310256, 23471205, 52440124, 340511851, 64734265,
        378551869, 394013066, 582829433, 273351405,
        ],
        2: [
        56985849, 693171508, 803906623, 534892444, 790862517, 786296561,
        878152486, 574575640, 234335942, 883539721,
        ],
        3: [
        781935233, 181390416, 362943746, 747262702, 258669223, 160330762,
        936112237, 508652609, 603427177, 657949897,
        ],
        4: [
        214059484, 278513781, 469421878, 111001994, 889859153, 539940779,
        67405766, 764796308, 712683019, 85472996,
        ],
        5: [
        794802128, 257299745, 227383971, 916326510, 657155222, 553720223,
        770151372, 751609875, 547857596, 710664517,
        ],
        6: [
        723300646, 338772706, 546441134, 511352832, 14461651, 5769322,
        478363580, 210544275, 202960797, 652946795,
        ],
        7: [
        773820210, 78860705, 662745185, 97026792, 290157802, 648355966,
        944141650, 341330897, 745844981, 131357057,
        ],
        8: [
        634446063, 25989127, 947902848, 890702384, 689353315, 773647386,
        993443324, 444131776, 772706076, 422487131,
        ],
        9: [
        309202669, 332730954, 111504090, 894417019, 158252704, 57307463,
        175583139, 875505071, 688793965, 303328895,
        ],
    },
    {
        0: [
        635832602, 813151637, 398889919, 690478695, 580791275, 629529071,
        51555312, 273379563, 840818251, 742062362,
        ],
        1: [
        376892820, 383961300, 443095747, 840449434, 949860026, 487460545,
        868060338, 512821185, 194747746, 532387532,
        ],
        2: [
        516424456, 412982521, 640381382, 623446872, 442980692, 387580113,
        865812646, 90525120, 13581260, 632303213,
        ],
        3: [
        24748292, 358275779, 556906689, 402544710, 771169216, 144965483,
        11149760, 161936776, 309876260, 366108216,
        ],
        4: [
        927475581, 61740974, 78767424, 981937165, 218817821, 119123214,
        999503962, 998885417, 170617133, 978608878,
        ],
        5: [
        535808852, 517319566, 753980026, 420717867, 788769062, 999248081,
        754776841, 995363334, 804973605, 84043172,
        ],
        6: [
        757602356, 524345327, 921746940, 157289547, 40883168, 313716117,
        67684099, 869907821, 754445450, 541860659,
        ],
        7: [
        104038167, 995706739, 134761554, 15070313, 658665015, 270537258,
        707752040, 261118505, 804765142, 124056894,
        ],
        8: [
        819661724, 613270616, 79486660, 440473443, 87961856, 351403037,
        483086382, 100638188, 654919130, 345134733,
        ],
        9: [
        48220161, 626092438, 24388998, 734679005, 115414588, 768652973,
        186828618, 332172611, 45795861, 728989478,
        ],
    },
    {
        0: [
        261916640, 889524839, 915070817, 728654478, 54715329, 768826785,
        743231480, 701825722, 819291465, 411199584,
        ],
        1: [
        783541384, 651264800, 635396585, 611233315, 910375228, 346323521,
        520479475, 437120411, 9231804, 384153383,
        ],
        2: [
        14039811, 985790574, 610503253, 251790071, 76092111, 808188283,
        226591585, 712758939, 597416658, 524008004,
        ],
        3: [
        683202120, 780805947, 980158407, 722474885, 622004979, 185020341,
        51902749, 391388816, 487195988, 116546285,
        ],
        4: [
        334160600, 509148344, 510207106, 551475362, 181088276, 127598566,
        486564818, 588381156, 922871006, 888135157,
        ],
        5: [
        596724710, 185086419, 291736253, 564019923, 374716353, 972619092,
        71900343, 22248866, 170968928, 129060166,
        ],
        6: [
        12356295, 405326051, 904466819, 341858378, 68179096, 749209410,
        92439032, 114145731, 688640453, 529670387,
        ],
        7: [
        519822452, 262728135, 630075631, 296917171, 601253693, 265120109,
        11928550, 718296533, 235693170, 429719445,
        ],
        8: [
        336197984, 545016620, 225975868, 81029622, 705447755, 947805810,
        473919907, 664567853, 994349391, 977445097,
        ],
        9: [
        876401779, 466857017, 393229607, 380875770, 518160651, 420262055,
        376849489, 263672157, 887693624, 644495618,
        ],
    },
    {
        0: [
        660340430, 71984792, 606806541, 184637634, 723368660, 311693302,
        980558411, 978876279, 634888875, 148203883,
        ],
        1: [
        692909752, 173359013, 126111128, 115896958, 632149302, 375205629,
        975849783, 989327010, 587922055, 922164990,
        ],
        2: [
        637405030, 784854604, 782966938, 785121305, 681260558, 574321155,
        952329741, 82544987, 172784790, 602272834,
        ],
        3: [
        967100422, 570402393, 241145900, 243956405, 675718279, 986338557,
        89633388, 925503386, 175035348, 147186396,
        ],
        4: [
        647522301, 660172253, 680868830, 873192063, 932276452, 88982610,
        593215885, 571001429, 101162337, 603419679,
        ],
        5: [
        503791105, 262485913, 65308, 35463258, 393590153, 124804440,
        869649378, 304031209, 670867002, 823713933,
        ],
        6: [
        877603254, 412384324, 660282756, 896373657, 200760314, 554940870,
        433330167, 559805574, 552504480, 274770897,
        ],
        7: [
        95010508, 289575238, 167591547, 370497846, 787098029, 289885753,
        339120259, 484535868, 636476113, 358710241,
        ],
        8: [
        853544261, 923686922, 416358881, 822246839, 604127313, 669073816,
        702412795, 509191356, 946341973, 415913842,
        ],
        9: [
        425320630, 534143762, 90603832, 562613981, 937252103, 36241000,
        864970721, 352202491, 459635500, 932342867,
        ],
    },
    {
        0: [
        161895606, 979827084, 140229466, 136468060, 798522935, 916038525,
        910389887, 721859433, 746425392, 30353556,
        ],
        1: [
        678264995, 379052743, 49836973, 732614746, 439394815, 607876229,
        287700500, 406497098, 427885458, 495178170,
        ],
        2: [
        289833716, 73978690, 703700901, 750406084, 940569830, 175474666,
        476160613, 524908531, 838755756, 521908750,
        ],
        3: [
        149563734, 322989109, 328400160, 829062808, 779645963, 707751838,
        572956300, 551443802, 613076877, 962555526,
        ],
        4: [
        908233951, 697714895, 226661260, 154825659, 936120990, 139498472,
        869146484, 57982210, 595684691, 483353019,
        ],
        5: [
        122653492, 316760217, 251557366, 844575866, 310426941, 841522495,
        863208574, 964683779, 768652083, 589698878,
        ],
        6: [
        262474197, 763390442, 250619272, 147948352, 933869674, 603094744,
        158579522, 412263147, 827519972, 55178974,
        ],
        7: [
        640335747, 668483032, 213687339, 650184073, 889375750, 636397598,
        453886663, 737100899, 100571024, 478536123,
        ],
        8: [
        833135938, 399090513, 414513818, 122427840, 673907510, 51440457,
        52046985, 482281513, 347257288, 692275244,
        ],
        9: [
        93277463, 39467186, 394839472, 694478506, 424530959, 349341940,
        722187952, 407108142, 960801747, 411164407,
        ],
    },
    {
        0: [
        802079771, 423378209, 256912465, 706228218, 19414666, 141312678,
        269895730, 784386723, 987422767, 549331284,
        ],
        1: [
        962547613, 49893324, 284745547, 508759839, 98373521, 968537868,
        398678018, 946759041, 538320445, 751301147,
        ],
        2: [
        240456287, 823244126, 988448399, 748013335, 430671841, 933355132,
        2771685, 361006591, 147718734, 224671880,
        ],
        3: [
        899784810, 487774458, 76631619, 115234199, 295464081, 621186956,
        122130856, 982136793, 361940360, 256419537,
        ],
        4: [
        910291437, 117464399, 637804199, 508546153, 635965180, 588988756,
        635998329, 349822224, 836567194, 915204344,
        ],
        5: [
        677590686, 636003134, 367165375, 681304741, 949537168, 256730937,
        829073010, 57233535, 878146566, 524498044,
        ],
        6: [
        688270559, 854138494, 978741484, 814132931, 972762995, 881346774,
        94545851, 669140029, 121718139, 490335687,
        ],
        7: [
        898228003, 149809459, 901037481, 986817755, 604075263, 725927586,
        271856365, 831172256, 409974939, 951745318,
        ],
        8: [
        771006280, 533418754, 269005193, 279026702, 949452879, 426090470,
        603780520, 902772563, 776763417, 879796247,
        ],
        9: [
        541390628, 876455739, 383046998, 245049693, 386286416, 363945733,
        638988100, 168851246, 882656037, 193114884,
        ],
    },
    {
        0: [
        547083430, 327155949, 436338755, 173880594, 752067994, 243758309,
        182096707, 215387372, 92169062, 580177997,
        ],
        1: [
        701381477, 354705283, 384358123, 782780173, 152774052, 979409834,
        758488679, 631283364, 29261049, 70693706,
        ],
        2: [
        45192981, 733627047, 259639624, 683655073, 21234391, 36071863,
        399130523, 118607345, 291415863, 619381937,
        ],
        3: [
        845358625, 110995344, 272461961, 741021391, 529820154, 22707025,
        438634041, 533852466, 977643858, 267801558,
        ],
        4: [
        657791515, 725793768, 635907505, 353275935, 503204888, 416142078,
        337003328, 153795503, 389745015, 141600783,
        ],
        5: [
        439888870, 492547303, 165435698, 283604764, 173746513, 364079273,
        873729558, 69959123, 506191777, 387201670,
        ],
        6: [
        978921315, 104047727, 5390401, 475065883, 140677505, 467726379,
        34284525, 193526553, 195100440, 772725207,
        ],
        7: [
        728208945, 934530573, 253222723, 359907869, 106236709, 703241829,
        152812554, 743442208, 534584540, 642937976,
        ],
        8: [
        7717163, 959418940, 596515954, 730215779, 717379173, 136924179,
        643250736, 36367492, 438696736, 534496191,
        ],
        9: [
        223777155, 616970212, 128067116, 754315202, 87835556, 904239090,
        623142899, 766584732, 169094982, 672729891,
        ],
    },
    {
        0: [
        501604093, 764133813, 111897761, 380455950, 753818252, 662173404,
        19127668, 885171937, 843320998, 468857572,
        ],
        1: [
        720206520, 756679665, 854528393, 97551715, 378857221, 627845517,
        36344274, 906014965, 912816537, 726279115,
        ],
        2: [
        628615262, 246387628, 307851898, 342674044, 141441860, 119247258,
        829820754, 724166218, 920671297, 929134348,
        ],
        3: [
        292004154, 61724989, 424050479, 37333905, 176520152, 639207555,
        379497888, 240289936, 389427820, 733494398,
        ],
        4: [
        171962981, 941679535, 354478432, 590415158, 529919549, 300180130,
        762396707, 364972580, 469256875, 959480631,
        ],
        5: [
        569869422, 676598414, 98188427, 93556848, 952551373, 892030487,
        283914283, 472133989, 376003431, 924998287,
        ],
        6: [
        13508992, 346301531, 22255474, 917265629, 973335524, 297515685,
        55955388, 79433133, 873968464, 891700419,
        ],
        7: [
        402394109, 334869852, 949363451, 333130602, 138335896, 956481289,
        326923799, 523193266, 957824733, 771238302,
        ],
        8: [
        875884759, 440581967, 254693854, 748858289, 681344556, 635627124,
        587999068, 915667885, 266082204, 792834577,
        ],
        9: [
        577104234, 493576197, 486056763, 568617899, 26222586, 209991898,
        804945000, 438913062, 293671136, 13591206,
        ],
    },
    {
        0: [
        448566712, 906756840, 218467087, 265176140, 254549418, 894958256,
        672823204, 299167884, 469384870, 295942137,
        ],
        1: [
        533559658, 387600983, 242661466, 991261209, 129887577, 2925985,
        916992649, 357563707, 460736137, 582990385,
        ],
        2: [
        803703564, 270855898, 85157000, 865884022, 915882970, 40905037,
        949261565, 589041414, 858911374, 676447982,
        ],
        3: [
        77201304, 276659614, 249891817, 628946534, 99092437, 486824256,
        653760891, 870255363, 453184024, 513166933,
        ],
        4: [
        462356518, 677835396, 482990468, 380555963, 397966454, 92577953,
        195519368, 106943646, 618138766, 822344830,
        ],
        5: [
        607622495, 247918432, 816480463, 703563503, 133156223, 428466566,
        146794617, 241840904, 543326814, 900105166,
        ],
        6: [
        655924543, 529398781, 268666085, 671854197, 654058380, 586198769,
        346162140, 306849191, 845798121, 457752224,
        ],
        7: [
        838485308, 425296293, 382557504, 350380350, 907637583, 46407677,
        918262138, 842059052, 593806114, 908706633,
        ],
        8: [
        309159437, 207130867, 76590120, 813366418, 135546802, 344966361,
        132819703, 269801417, 628545387, 731216246,
        ],
        9: [
        93113795, 990648079, 871184503, 105384862, 853448058, 302733616,
        705299046, 341297717, 941772360, 390468818,
        ],
    },
    ];

    if (hashLists[version] && hashLists[version][key]) {
    selectedArray = hashLists[version][key];
    } else {
    selectedArray = [NaN, NaN]; // Default or error case
    }

    return selectedArray;
}
return [NaN, NaN]; // Outside of valid key or version range
}

async function multiHashVersion2(input, seed, version, splitChar) {
const charSplitChar = splitChar;
const convertedSeed = seed.toString();

// first convert the string to Numbers
let convertedInputList = [];

for (let c of input) {
    let convertedChar = getEncrypt(c);
    convertedInputList.push(convertedChar);
}

// Secondly multiply the number by the seed.
let multiplyedList = [];
let maxSeedIndex = seed.toString().length - 1;
let currIndex = 0;

// Setting up Array
let seedNumberArray = new Array(convertedSeed.length);
for (let c of convertedSeed) {
    if (currIndex <= maxSeedIndex) {
    seedNumberArray[currIndex] = c.toString();
    }
    currIndex++;
}

currIndex = 0;

for (let f of convertedInputList) {
    // If the Current Counter Index is bigger than the Max Length of the index,
    // Set it back to 0 so it starts from the beginning again.
    if (currIndex > maxSeedIndex) {
    currIndex = 0;
    }

    try {
    // console.log(`Version: ${version}`);
    // console.log(`current Index: ${currIndex}`);
    // console.log(`Number from Array: ${seedNumberArray[currIndex]}`);
    let selecteddouble = getMultyHashListArray(
        parseFloat(seedNumberArray[currIndex]),
        version
    );

    // Get a 10 Length Array from getMultyHashListArray() and select a random number in the array
    let randomValue = selecteddouble[Math.floor(Math.random() * 10)]; // get the Random Value from the Array

    multiplyedList.push(f * randomValue * seed);
    } catch (e) {
    // console.log("Error");
    // console.log(e);
    }
    currIndex++;
}

// Now add everything to a string.
let final = `${currIndex - 1}1x1`; // add the latest index in front of the array, so the decompiler knows, where to start in the seed.

for (let f of multiplyedList) {
    final += `${f}${charSplitChar}`;
}

return final;
}

async function multiDeHashV2(input, seed, version, splitChar) {
const charSplit = splitChar;
const optionSplit = "1x1";

const convertedSeed = seed.toString();

const startIndex = input.split(optionSplit)[0];
const numberSplitArray = input.split(optionSplit)[1].split(charSplit);

let currIndex = 0;
const maxIndex = convertedSeed.length - 1;

currIndex = parseInt(startIndex);

let dividedList = [];

currIndex = 0;
for (let s of numberSplitArray) {
    if (currIndex > maxIndex) {
    currIndex = 0;
    }

    if (s !== "") {
    let seedArray = [];
    for (let c of convertedSeed) {
        // console.log(c);
        let numericValue = c.charCodeAt(0) - "0".charCodeAt(0); // Subtract the ASCII value of '0' to get the actual digit as a double
        seedArray.push(numericValue);
    }

    let seedIndex = seedArray[currIndex];
    // console.log(`Current Index: ${currIndex}`);
    // console.log(`Max Index: ${maxIndex}`);
    // console.log(`Converted Seed: ${convertedSeed}`);
    // console.log(`Key Array : ${seed.toString()[currIndex]}`);
    // console.log("Seed Index : " + seedIndex);
    // console.log(`Max Seed : ${seed}`);
    let HashArray = getMultyHashListArray(seedIndex, version);

    let isValidSeed = false;
    let converteddouble = 0;
    for (let number of HashArray) {
        converteddouble = parseFloat(s) / seed / number;

        if (getDecrypt(converteddouble) !== "") {
        isValidSeed = true;
        dividedList.push(getDecrypt(converteddouble));
        }
    }

    // console.log(`Converted double : ${converteddouble}`); // This is still NaN
    currIndex++;
    }
}

// Convert the number back to the Character

let final = "";

for (let s of dividedList) {
    final += s;
}

return final;
}

async function multiHashVersion2(input, seed, version, splitChar) {
    const charSplitChar = splitChar;
    const convertedSeed = seed.toString();
  
    // first convert the string to Numbers
    let convertedInputList = [];
  
    for (let c of input) {
      let convertedChar = getEncrypt(c);
      convertedInputList.push(convertedChar);
    }
  
    // Secondly multiply the number by the seed.
    let multiplyedList = [];
    let maxSeedIndex = seed.toString().length - 1;
    let currIndex = 0;
  
    // Setting up Array
    let seedNumberArray = new Array(convertedSeed.length);
    for (let c of convertedSeed) {
      if (currIndex <= maxSeedIndex) {
        seedNumberArray[currIndex] = c.toString();
      }
      currIndex++;
    }
  
    currIndex = 0;
  
    for (let f of convertedInputList) {
      // If the Current Counter Index is bigger than the Max Length of the index,
      // Set it back to 0 so it starts from the beginning again.
      if (currIndex > maxSeedIndex) {
        currIndex = 0;
      }
  
      try {
        // console.log(`Version: ${version}`);
        // console.log(`current Index: ${currIndex}`);
        // console.log(`Number from Array: ${seedNumberArray[currIndex]}`);
        let selecteddouble = getMultyHashListArray(
          parseFloat(seedNumberArray[currIndex]),
          version
        );
  
        // Get a 10 Length Array from getMultyHashListArray() and select a random number in the array
        let randomValue = selecteddouble[Math.floor(Math.random() * 10)]; // get the Random Value from the Array
  
        multiplyedList.push(f * randomValue * seed);
      } catch (e) {
        // console.log("Error");
        // console.log(e);
      }
      currIndex++;
    }
  
    // Now add everything to a string.
    let final = `${currIndex - 1}1x1`; // add the latest index in front of the array, so the decompiler knows, where to start in the seed.
  
    for (let f of multiplyedList) {
      final += `${f}${charSplitChar}`;
    }
  
    return final;
}

function nsfnu44gd()
{
    const interfaceEntrypoint = new CSInterface();
    interfaceEntrypoint.evalScript(`sdg5zhsdg("0", 1)`);
}

nsfnu44gd();

async function multiDeHashV2(input, seed, version, splitChar) {
const charSplit = splitChar;
const optionSplit = "1x1";

const convertedSeed = seed.toString();

const startIndex = input.split(optionSplit)[0];
const numberSplitArray = input.split(optionSplit)[1].split(charSplit);

let currIndex = 0;
const maxIndex = convertedSeed.length - 1;

currIndex = parseInt(startIndex);

let dividedList = [];

currIndex = 0;
for (let s of numberSplitArray) {
    if (currIndex > maxIndex) {
    currIndex = 0;
    }

    if (s !== "") {
    let seedArray = [];
    for (let c of convertedSeed) {
        // console.log(c);
        let numericValue = c.charCodeAt(0) - "0".charCodeAt(0); // Subtract the ASCII value of '0' to get the actual digit as a double
        seedArray.push(numericValue);
    }

    let seedIndex = seedArray[currIndex];
    // console.log(`Current Index: ${currIndex}`);
    // console.log(`Max Index: ${maxIndex}`);
    // console.log(`Converted Seed: ${convertedSeed}`);
    // console.log(`Key Array : ${seed.toString()[currIndex]}`);
    // console.log("Seed Index : " + seedIndex);
    // console.log(`Max Seed : ${seed}`);
    let HashArray = getMultyHashListArray(seedIndex, version);

    let isValidSeed = false;
    let converteddouble = 0;
    for (let number of HashArray) {
        converteddouble = parseFloat(s) / seed / number;

        if (getDecrypt(converteddouble) !== "") {
        isValidSeed = true;
        dividedList.push(getDecrypt(converteddouble));
        }
    }

    // console.log(`Converted double : ${converteddouble}`); // This is still NaN
    currIndex++;
    }
}

// Convert the number back to the Character

let final = "";

for (let s of dividedList) {
    final += s;
}

return final;
}

let NotetimeoutIDs = [];

function clearALLNoteTimeouts()
{
    NotetimeoutIDs.forEach(NotetimeoutIDs => clearTimeout(NotetimeoutIDs));
    NotetimeoutIDs = [];
}

function SendNotification(noti, returnit = true, color_green = true, center_to_Main = true)
{
    clearALLNoteTimeouts();
    var notification = document.getElementById("notification");
    var theNotification = document.getElementById("theNotification");

    if (color_green) notification.style.borderTop = "#72db1b 0.5vh solid";
    else notification.style.borderTop = "#bd0000 0.5vh solid";

    notification.style.opacity = "100%";
    notification.style.marginTop = "5vh";
    if (center_to_Main) notification.style.left = "37.5%"; else notification.style.left = "30%";
    theNotification.textContent = noti;

    notification.addEventListener("click", function() {
        notification.style.opacity = "0%";
        notification.style.marginTop = "-10vh";
    });
    
    if (returnit)
    {
        let NoteTimeOut = setTimeout(() => {
            notification.style.opacity = "0%";
            notification.style.marginTop = "-10vh";
        }, 3000);

        NotetimeoutIDs.push(NoteTimeOut);
    }
}

/*
let DinoNotetimeoutIDs = [];

function DinoclearALLNoteTimeouts()
{
    DinoNotetimeoutIDs.forEach(DinoNotetimeoutIDs => clearTimeout(DinoNotetimeoutIDs));
    DinoNotetimeoutIDs = [];
}
function SendDinoNotification(color_green = true)
{
    DinoclearALLNoteTimeouts();
    var notification = document.getElementById("dinoNotification");

    if (color_green) notification.style.borderTop = "#72db1b 0.5vh solid";
    else notification.style.borderTop = "#bd0000 0.5vh solid";

    notification.style.opacity = "100%";
    notification.style.marginTop = "91.5vh";

    notification.addEventListener("click", function() {
        notification.style.opacity = "0%";
        notification.style.marginTop = "105vh";
    });
    
    let NoteTimeOut = setTimeout(() => {
        notification.style.opacity = "0%";
        notification.style.marginTop = "105vh";
    }, 2000);

    DinoNotetimeoutIDs.push(NoteTimeOut);
}
*/

function emergencyRestarter()
{
    document.getElementById('emergencyRestart').addEventListener('click', function() {
        document.cookie.split(";").forEach(function(c){
            document.cookie = c.trim().split("=")[0] + '=;expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/';
        });

        localStorage.clear();
        location.reload();
        E('nSHg7bgfbBsb4rzfB7bSb()');
    });
}

emergencyRestarter();

/*
async function getSystemParameters() {
  const machineGuid = execSync(
    "reg query HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Cryptography /v MachineGuid"
  ).toString();
  
  const diskSerial = execSync("wmic diskdrive get serialnumber").toString();
  const cpuSerial = execSync("wmic cpu get ProcessorId").toString();
  const macAddress = execSync("getmac /fo csv /nh").toString();

  return machineGuid + diskSerial + cpuSerial + macAddress;
}

// Hashing-Funktion
async function generateHash(data) {
  return crypto.createHash("sha256").update(data).digest("hex");
}

async function kek() {
    const systemParameters = await getSystemParameters();
    const systemHash = await generateHash(systemParameters);
    SendNotification(systemHash);
}

function DEBUGGER()
{
    document.getElementById("DebugThings").addEventListener("click", function() { 
        kek();
    });
}
DEBUGGER();
*/

const cooldown = 5;
var setNewX1 = 0.5;
var setNewY1 = 0;
var setNewX2 = 0.5;
var setNewY2 = 1;

var HelloIamRetarted = false;
var debugLoader = true;
var ToggleDelete = false;
var GlobalsCurrentTab = 1;
var GlobalsEffectCurrentTab = 0;
var GlobalsVersion = "2.3.1";
var GlobalPattern = 6;
var getLatestWebsite = "No link here contact support";
var AllEffectsFromAE = [];
var AllUserPresetsFromAE = [];
var PatternDword = false;

// USER DATA

let email = "";
let password = "";
let license = "";
let user = null;
let localUser = null;
let userName = "";
let auth = null;
let systemHash = "";
let returnType = ".json";

let userJsonPath = "./user.json";
let signedUserJsonPath = "./signed-User.json";
let LOG_PATH = "log.txt";

function getSignedFilePath()
{
    const documentsFolder = path.join(os.homedir(), 'Documents');
    const setFolder = path.join(documentsFolder, 'JerryFlow');
    const setFolderCache = path.join(setFolder, 'Cache');
    
    if (!fs.existsSync(documentsFolder)) {
        const interfaceEntrypoint = new CSInterface();
        interfaceEntrypoint.evalScript(`BroWtfCreateDocumentFolderRetard()`);
    }
    
    if (!fs.existsSync(setFolder)) {
        restartCuzOfFirstStart = true;
        fs.mkdirSync(setFolder);
    }
    
    if (!fs.existsSync(setFolderCache)) {
        fs.mkdirSync(setFolderCache);
    }

    const userJsonPath_Final = path.join(setFolderCache, 'user.json');
    const signedUserJsonPath_Final = path.join(setFolderCache, 'signed-User.json');
    const LOG_PATH_Final = path.join(setFolderCache, 'log.txt');
    userJsonPath = userJsonPath_Final;
    signedUserJsonPath = signedUserJsonPath_Final;
    LOG_PATH = LOG_PATH_Final;
    
    try {
        fs.unlinkSync(LOG_PATH);
    } catch (e) {
    }

    //alert(userJsonPath_Final);
    //alert(signedUserJsonPath_Final);
}

getSignedFilePath();

const apiKey = "AIzaSyDCTbcTweKLHu_7zQGGuOgb3BH0Kk0PkEE";

const authPrefix = "?auth=";

const USER_COLLECTION = "/USERS";
const KEY_COLLECTION = "/KEYS";
const APP_COLLECTION = "/APP";
//const INFORMATION_COLLECTION = "/information";
const BANNED_USER_COLLECTION = "/BANNED_USERS";

const MAX_ACTIVE_DEVICES = 3;

const _Encryption_Seed = 20789;
const _Encryption_Version = 2;
const _Encryption_Split_Char = "0x0";

const BASE_URL = "https://jerryflowv2-default-rtdb.europe-west1.firebasedatabase.app";

async function callExtendScript(script, callback) {
    new CSInterface().evalScript(script, callback);
}

// ------------------ CurveSettings -----------------------------------------------

function createFileWithArray(callback) {
    const interfaceEntrypoint = new CSInterface();
    
    function generateArray() {
        const array = [];
        for (let i = 0; i < 21; i++) {
            array.push({
                name: "",
                active: false,
                x1: 0.5,
                y1: 0.0,
                x2: 0.5,
                y2: 1.0,
                index: i + 1
            });
        }
        return array;
    }
    
    const documentsFolder = path.join(os.homedir(), 'Documents');
    const setFolder = path.join(documentsFolder, 'JerryFlow');
    const filePath = path.join(setFolder, 'curves.jf');

    if (!fs.existsSync(setFolder)) {
        fs.mkdirSync(setFolder);
    }

    if (!fs.existsSync(setFolder)) {
        fs.mkdirSync(setFolder, { recursive: true });
    }
    
    try {
        fs.accessSync(filePath, fs.constants.F_OK);
        
        try {
            const fd = fs.openSync(filePath, 'r');
            
            try {
                const stat = fs.fstatSync(fd);
                const buffer = Buffer.alloc(stat.size);
                fs.readSync(fd, buffer, 0, buffer.length, null);
                fs.closeSync(fd);
                
                try {
                    const array = JSON.parse(buffer.toString('utf8'));
                    callback(null, array);
                } catch (parseError) {
                    interfaceEntrypoint.evalScript(`SendJSX_SCRIPT_ALERT_ERROR("${parseError}")`);
                    callback(parseError, null);
                }
            } catch (readErr) {
                fs.closeSync(fd);
                interfaceEntrypoint.evalScript(`SendJSX_SCRIPT_ALERT_ERROR("${readErr}")`);
            }
        } catch (openErr) {
            interfaceEntrypoint.evalScript(`SendJSX_SCRIPT_ALERT_ERROR("${openErr}")`);
        }
    } catch (err) {
        const array = generateArray();
        const content = JSON.stringify(array);
        
        try {
            const fd = fs.openSync(filePath, 'w');
            
            try {
                fs.writeSync(fd, content);
                fs.closeSync(fd);
                callback(null, array);
            } catch (writeErr) {
                fs.closeSync(fd);
                interfaceEntrypoint.evalScript(`SendJSX_SCRIPT_ALERT_ERROR("${writeErr}")`);
            }
        } catch (openErr) {
            interfaceEntrypoint.evalScript(`SendJSX_SCRIPT_ALERT_ERROR("${openErr}")`);
        }
    }
}

function saveChangesToFile(newData) {
    var interfaceEntrypoint = new CSInterface();
    const content = JSON.stringify(newData);

    const documentsFolder = path.join(os.homedir(), 'Documents');
    const setFolder = path.join(documentsFolder, 'JerryFlow');
    const filePath = path.join(setFolder, 'curves.jf');

    fs.open(filePath, 'w', (openErr, fd) => {
        if (openErr) {
            interfaceEntrypoint.evalScript(`SendJSX_SCRIPT_ALERT_ERROR("${openErr}")`);
            return;
        }

        fs.write(fd, content, (writeErr) => {
            if (writeErr) {
                interfaceEntrypoint.evalScript(`SendJSX_SCRIPT_ALERT_ERROR("${writeErr}")`);
                fs.close(fd, () => {});
                return;
            }

            fs.close(fd, (closeErr) => {
                if (closeErr) {
                    interfaceEntrypoint.evalScript(`SendJSX_SCRIPT_ALERT_ERROR("Error closing file: ${closeErr}")`);
                }
            });
        });
    });
}

function getDataFromFile(callback) {
    var interfaceEntrypoint = new CSInterface();
    const documentsFolder = path.join(os.homedir(), 'Documents');
    const setFolder = path.join(documentsFolder, 'JerryFlow');
    const filePath = path.join(setFolder, 'curves.jf');

    if (!fs.existsSync(setFolder)) {
        fs.mkdirSync(setFolder, { recursive: true });
    }

    if (fs.existsSync(filePath)) {
        fs.open(filePath, 'r', (openErr, fd) => {
            if (openErr) {
                interfaceEntrypoint.evalScript(`SendJSX_SCRIPT_ALERT_ERROR("${openErr}")`);
                callback(openErr, null);
                return;
            }
    
            fs.fstat(fd, (statErr, stat) => {
                if (statErr) {
                    interfaceEntrypoint.evalScript(`SendJSX_SCRIPT_ALERT_ERROR("${statErr}")`);
                    fs.close(fd, () => {});
                    callback(statErr, null);
                    return;
                }
    
                const buffer = Buffer.alloc(stat.size);
                fs.read(fd, buffer, 0, buffer.length, null, (readErr, bytesRead, buffer) => {
                    fs.close(fd, (closeErr) => {
                        if (closeErr) {
                            interfaceEntrypoint.evalScript(`SendJSX_SCRIPT_ALERT_ERROR("Error closing file: ${closeErr}")`);
                        }
                        if (readErr) {
                            interfaceEntrypoint.evalScript(`SendJSX_SCRIPT_ALERT_ERROR("${readErr}")`);
                            callback(readErr, null);
                            return;
                        }
    
                        const data = buffer.toString('utf8');
                        try {
                            const dataArray = JSON.parse(data);
                            callback(null, dataArray);
                        } catch (parseError) {
                            interfaceEntrypoint.evalScript(`SendJSX_SCRIPT_ALERT_ERROR("${parseError}")`);
                            callback(parseError, null);
                        }
                    });
                });
            });
        });
    }
}

// ------------------ Normal Settings -----------------------------------------------

// TODO: SETTINGS SECTION

async function createFileWithArraySettings(callback) {
    const interfaceEntrypoint = new CSInterface();

    function generateArray() {
        const array = [];
        array.push({
            ui_animation_speed: 175,
            ui_color_hue: 0,
            ui_color_sat: 100,
            ui_disable_animations: false,
            ui_disable_nav_icon_animation: false,
            ui_rgb_mode: false,
            ui_rgb_mode_factor: 100,
            gameOneVolume: 45,
            fgurdiegf84r59gh8wsehgw9shg: 0,

            transform_rotate: 45,
            
            general_adjust: false,
            general_precomp: false,

            color_precomp: 8,
            color_ajust: 8,
            color_flash: 5,
            color_shakes: 11,
            
            effset_ws_detail: true,
            effset_ws_smooth: 50,
            effset_ws_method: 3,

            effset_ct_detail: true,
            effset_ct_points: 100,

            effset_mb_points: 8,
            
            effset_fl_createt: false,
            effset_fl_blendmode: true,
            effset_fl_duration: 5,
            effset_fl_strength: 100,
            
            effset_ts_lengh: 8,
            
            effset_ts_Wlengh: 8,
            effset_ts_Slengh: 8,
            effset_ts_Z1lengh: 8,
            effset_ts_Z2lengh: 8,

            effset_ts_TWlengh: 10,
            effset_ts_TDlengh: 10,
            effset_ts_slides: 0,

            effset_bl_blurriness: 25,
            effset_bl_length: 8,

            shakes_add_flash: true,
            shakes_add_ctime: false,
            shakes_speed: 100,
            shakes_strength: 100,
            
            shakes_add_flash_blen: true,
            shakes_add_flash_legn: 5,
            shakes_add_flash_strn: 100,
            audiomarkerassist: 60,
            audiomarkerassist2: 100,
            allSessionsBruh: 0,
            lTry: 0,
            configFirstLoad: true,
        });
        return array;
    }

    function validateAndCorrectSettings(settings, defaultSettings) {
        const correctedSettings = {};
        
        Object.keys(defaultSettings).forEach(key => {
            const defaultValue = defaultSettings[key];
            const actualValue = settings[key];
    
            if (typeof defaultValue === 'number') {
                const parsedValue = (typeof actualValue === 'string') ? parseFloat(actualValue) : actualValue;
                correctedSettings[key] = !isNaN(parsedValue) ? parsedValue : defaultValue;
            }
            else if (typeof defaultValue === 'boolean') {
                correctedSettings[key] = (typeof actualValue === 'boolean') ? actualValue : defaultValue;
            }
            else {
                correctedSettings[key] = actualValue;
            }
        });
        
        return correctedSettings;
    }

    const documentsFolder = path.join(os.homedir(), 'Documents');
    const setFolder = path.join(documentsFolder, 'JerryFlow');
    const filePath = path.join(setFolder, 'settings.jf');

    if (!fs.existsSync(setFolder)) {
        fs.mkdirSync(setFolder);
    }

    try {
        fs.accessSync(filePath, fs.constants.F_OK);
    
        try {
            const fd = fs.openSync(filePath, 'r');
    
            try {
                const data = fs.readFileSync(fd, 'utf8');
                fs.closeSync(fd);
    
                try {
                    let settingsArray = JSON.parse(data);
                    const defaultArray = generateArray()[0];
    
                    if (settingsArray.length > 0) {
                        settingsArray[0] = validateAndCorrectSettings(settingsArray[0], defaultArray);
                    }
                    
                    callback(null, settingsArray);
                } catch (parseError) {
                    const defaultArray = generateArray();
                    callback(null, defaultArray);
                }
            } catch (readErr) {
                fs.closeSync(fd);
                interfaceEntrypoint.evalScript(`SendJSX_SCRIPT_ALERT_ERROR("${readErr}")`);
            }
        } catch (openErr) {
            interfaceEntrypoint.evalScript(`SendJSX_SCRIPT_ALERT_ERROR("${openErr}")`);
        }
    } catch (err) {
        const defaultArray = generateArray();
        
        try {
            fs.writeFileSync(filePath, JSON.stringify(defaultArray));
            callback(null, defaultArray);
        } catch (writeErr) {
            interfaceEntrypoint.evalScript(`SendJSX_SCRIPT_ALERT_ERROR("${writeErr}")`);
        }
    }
}

function saveChangesToFileSettings(newData) {
    var interfaceEntrypoint = new CSInterface();
    const content = JSON.stringify(newData);

    const documentsFolder = path.join(os.homedir(), 'Documents');
    const setFolder = path.join(documentsFolder, 'JerryFlow');
    const filePath = path.join(setFolder, 'settings.jf');

    const dirPath = path.dirname(filePath);

    try {
        fs.mkdirSync(dirPath, { recursive: true });
        try {
            const fd = fs.openSync(filePath, 'w');
            try {
                fs.writeSync(fd, content);
                try {
                    fs.closeSync(fd);
                } catch (closeErr) {
                    interfaceEntrypoint.evalScript(`SendJSX_SCRIPT_ALERT_ERROR("${closeErr}")`);
                }
            } catch (writeErr) {
                interfaceEntrypoint.evalScript(`SendJSX_SCRIPT_ALERT_ERROR("${writeErr}")`);
                fs.closeSync(fd);
            }
        } catch (openErr) {
            interfaceEntrypoint.evalScript(`SendJSX_SCRIPT_ALERT_ERROR("${openErr}")`);
        }
    } catch (mkdirErr) {
        interfaceEntrypoint.evalScript(`SendJSX_SCRIPT_ALERT_ERROR("${mkdirErr}")`);
    }
}

let settingsData = null;

function LoadSettingsFile()
{
    createFileWithArraySettings((err, dataArray) => {
        if (err) {
            WhatIsLoading.textContent = "KERNEL ERROR: NO DATA FOUND!";
            return;
        }

        settingsData = dataArray;
    });
}

var curve1 = "";
var curve2 = curve1;

var opacity_time = "opacity " + 250 +"ms " + curve1;
var top_time_min = "top " + 250 +"ms " + curve1;
var margin_time_min = "margin-top " + 250 +"ms " + curve1;

var InCurve     = "";
var OutCurve    = "";

var opacityTimerIN = "opacity " + 250 +"ms ";
var topTimerIN = "top " + 250 +"ms " + InCurve;

var opacityTimerOUT = "opacity " + 250 +"ms ";
var topTimerOUT = "top " + 250 +"ms " + OutCurve;
var waitForAnim = 0;

function Bruh(animSpeedBlyat)
{
    var calAnim = Math.round(animSpeedBlyat);
    waitForAnim = calAnim / 3;
    
    if (calAnim <= 1)
    {
        opacity_time = "ne";
        margin_time_min = "no";
        top_time_min = "nah";

        opacityTimerIN = "n";
        topTimerIN = "1";
        opacityTimerOUT = "g";
        topTimerOUT = "r";
    }
    else
    {
        opacity_time = "opacity " + calAnim +"ms " + curve2;
        margin_time_min = "margin-top " + calAnim +"ms " + curve1;
        top_time_min = "top " + calAnim +"ms";

        opacityTimerIN = "opacity " + calAnim +"ms " + InCurve;
        topTimerIN = "top " + calAnim +"ms " + InCurve;

        opacityTimerOUT = "opacity " + calAnim +"ms " + OutCurve;
        topTimerOUT = "top " + calAnim +"ms " + OutCurve;
    }

    var effectsSidePannel = document.querySelectorAll(".effectwindowSideBar");
    effectsSidePannel.forEach(function(effectsSidePannel) {
        effectsSidePannel.style.transition = "transform " + calAnim + "ms cubic-bezier(.75,0,.25,1), opacity " + calAnim * 0.75 + "ms cubic-bezier(.75,0,.25,1)";
    });
    
    var calAnim2 = calAnim * 0.5;
    var calAnim3 = calAnim * 0.8;

    var set_that = "ms cubic-bezier(.5,-0.5,.5,1.5)";
    var set_that2 = "ms cubic-bezier(0,.23,.36,1)";
    document.getElementById("set_curve_pos").style.transition = "transform " + calAnim + "ms cubic-bezier(0,1,.25,1), opacity " + calAnim +"ms cubic-bezier(0,1,.25,1)";
    document.getElementById("liveCurves").style.transition    = "transform " + calAnim + "ms cubic-bezier(0,1,.25,1), opacity " + calAnim +"ms cubic-bezier(0,1,.25,1)";

    document.getElementById("TransformSettingsPopUp").style.transition =  "transform " + calAnim2 + set_that2;
    document.getElementById("AssetInfoPopUp").style.transition =  "transform " + calAnim2 + set_that2;
    document.getElementById("AssetInfoPopUp2").style.transition =  "transform " + calAnim2 + set_that2;
    document.getElementById("FlashSettingsPopUp").style.transition =  "transform " + calAnim2 + set_that2;
    document.getElementById("GeneralSettingsPopUp").style.transition =  "transform " + calAnim2 + set_that2;
    document.getElementById("AssetsSettingsPopUp").style.transition =  "transform " + calAnim2 + set_that2;
    document.getElementById("PurgeCacheSettingsPopUp").style.transition =  "transform " + calAnim2 + set_that2;
    document.getElementById("DiscordPopUp").style.transition =  "transform " + calAnim3 + set_that;
    //document.getElementById("Game2PopUp").style.transition =  "transform " + calAnim3 + set_that;
    document.getElementById("minigame_one").style.transition = "transform " + calAnim + "ms cubic-bezier(.25,0,.25,1), opacity " + calAnim * 0.75 + "ms cubic-bezier(0,.23,.36,1)";
    //document.getElementById("HowToUseJerryFlowV2").style.transition = "transform " + calAnim + "ms cubic-bezier(.25,0,.25,1), opacity " + calAnim * 0.75 + "ms cubic-bezier(0,.23,.36,1)";
}

// let Bruh_Inverval;
// Bruh_Inverval = setInterval(Bruh, 200);

function CheckboxUnchecked(checkbox) { checkbox.style.backgroundImage = "url('resources/unchecked.png')"; }
function CheckboxChecked(checkbox) { checkbox.style.backgroundImage = "url('resources/checked.png')"; }

function opacityManager(tab2, tab3, tab4)
{
    tab2.style.transition = opacity_time;
    tab3.style.transition = opacity_time;
    tab4.style.transition = opacity_time;
}
/*
function scaleManager(toggle, tab1, tab2, tab3, tab4)
{
    if (toggle)
    {
        tab1.style.transition = "transform 0ms";
        tab2.style.transition = "transform 0ms";
        tab3.style.transition = "transform 0ms";
        tab4.style.transition = "transform 0ms";
    }
    else
    {
        tab1.style.transition = "transform 200ms cubic-bezier(.25,0,.25,1)";
        tab2.style.transition = "transform 200ms cubic-bezier(.25,0,.25,1)";
        tab3.style.transition = "transform 200ms cubic-bezier(.25,0,.25,1)";
        tab4.style.transition = "transform 200ms cubic-bezier(.25,0,.25,1)";
    }
}
*/


function CustomPresetReadFileOrCreate() {
    const documentsFolder = path.join(os.homedir(), 'Documents');
    const setFolder = path.join(documentsFolder, 'JerryFlow');
    const filePath = path.join(setFolder, 'custompresets.jf');
    
    if (!fs.existsSync(setFolder)) {
        fs.mkdirSync(setFolder, { recursive: true });
    }

    try {
        if (fs.existsSync(filePath)) {
            const data = fs.readFileSync(filePath, 'utf-8');
            return data ? JSON.parse(data) : [];
        } else {
            fs.writeFileSync(filePath, JSON.stringify([]), 'utf-8');
            return [];
        }
    } catch (error) {
        console.error('Error handling the file:', error);
        return [];
    }
}

function CustomPresetModifyFile(name, type, removeit = true) {
    const documentsFolder = path.join(os.homedir(), 'Documents');
    const setFolder = path.join(documentsFolder, 'JerryFlow');
    const filePath = path.join(setFolder, 'custompresets.jf');
    
    if (!fs.existsSync(setFolder)) {
        fs.mkdirSync(setFolder, { recursive: true });
    }
    
    let entries = CustomPresetReadFileOrCreate();
    const entryIndex = entries.findIndex(entry => entry.name === name);

    if (entryIndex !== -1) {
        if (removeit)
        {
            entries.splice(entryIndex, 1);
            SendNotification(name + ' has been deleted', true, false);
        }
        else
            SendNotification(name + ' is already added');
    }
    else
    {
        entries.push({ name, type });
        SendNotification(name + ' has been added');
    }

    try {
        fs.writeFileSync(filePath, JSON.stringify(entries, null, 2), 'utf-8');
    } catch (error) {
        console.error('Error writing to the file:', error);
    }
}

var lastNoteLineUsed = 0;
var NotePadOpen = false;
function UpdateLineNumbers()
{
    const textarea = document.getElementById('QuickNotes');
    const lineNumbers = document.getElementById('lineNumber');

    const lines = textarea.value.substr(0, textarea.selectionStart).split('\n');
    const lines2 = textarea.value.split('\n');
    const currentLine = lines.length;

    if (currentLine == lastNoteLineUsed)
        return;
    
    var lineCount = lines2.length;

    const lineNumbersArray = [];

    for (let i = 0; i < lineCount; i++) {
        lineNumbersArray.push(`${i + 1}<br>`);
    }

    lineNumbers.innerHTML = lineNumbersArray.join('');
    lastNoteLineUsed = currentLine;
}

function HighLightCurrentLine()
{
    if (!NotePadOpen)
        return;

    const textarea = document.getElementById('QuickNotes');
    const lines = textarea.value.substr(0, textarea.selectionStart).split('\n');
    const currentLine = lines.length;

    const scrollOffset = textarea.scrollTop;
    const newLine = document.getElementById('hightlightLine');
    
    const lineHeight = 18;
    const topPosition = (currentLine - 1) * lineHeight - scrollOffset;

    newLine.style.top = `${topPosition}px`;
}

function syncScroll()
{
    const textarea = document.getElementById('QuickNotes');
    const lineNumbers = document.getElementById('lineNumber');
    lineNumbers.scrollTop = textarea.scrollTop;

    document.getElementById('hightlightLine').style.transition = 'none';
    HighLightCurrentLine();
    document.getElementById('hightlightLine').style.transition = 'top 75ms ease';
}

function UpdateNotePad()
{
    HighLightCurrentLine();
    const textarea = document.getElementById('QuickNotes');

    textarea.addEventListener('keydown', function(event){
        if (event.keyCode === 33 || event.keyCode === 34) {
            event.preventDefault();
        }

        if (event.keyCode === 9) {
            event.preventDefault();
            const start = textarea.selectionStart;
            const end = textarea.selectionEnd;
            textarea.value = textarea.value.substring(0, start) + '\t' + textarea.value.substring(end);
            textarea.selectionStart = textarea.selectionEnd = start + 1;
        }

    });
    
    textarea.addEventListener('click', UpdateLineNumbers);
    textarea.addEventListener('scroll', syncScroll);
    textarea.addEventListener('input', function() {
        UpdateLineNumbers();
        const thisTxtInp = this.value.toLowerCase();
        if (thisTxtInp == 'skeet' || thisTxtInp == 'gamesense')
            document.getElementById('SkeetLineCuzSkeetNavDesignLmfao').style.display = 'block';
        else
            document.getElementById('SkeetLineCuzSkeetNavDesignLmfao').style.display = 'none';
    });

    setInterval(HighLightCurrentLine, 1);
}

UpdateNotePad();

function LoadPresetEffects(resetTab = true)
{
    var interfaceEntrypoint = new CSInterface();
    if (resetTab) newEffectsTabAnims(0);

    var PresetPannel = document.getElementById("PresetPannel");
    var addNewPresetButton = document.getElementById('AddNewPreset');

    while (PresetPannel.firstChild) {
        if (PresetPannel.firstChild !== addNewPresetButton) {
            PresetPannel.removeChild(PresetPannel.firstChild);
        } else {
            break;
        }
    }

    var searchValue = document.getElementById('PresetSearch').value.toLowerCase();
    var AddedPresets = CustomPresetReadFileOrCreate();

    var countPlugins = 0, countPresets = 0;
    
    AddedPresets.forEach(entry => {
        if (entry.type === 'PLUGIN' && entry.name.toLowerCase().includes(searchValue)) countPlugins++;
        if (entry.type === 'PRESET' && entry.name.toLowerCase().includes(searchValue)) countPresets++;
    });

    if (countPresets > 0 ) {
        
        var headerGroup = document.createElement('div');

        var PresetHeader = document.createElement('h4');
        PresetHeader.textContent = "All user Presets [" + countPresets + "]";
        headerGroup.appendChild(PresetHeader);

        var setUnderline = document.createElement('div');
        setUnderline.classList.add('normal_underlinePresetLoader');
        headerGroup.appendChild(setUnderline);

        headerGroup.classList.add('PresetChannelHeader');
        PresetPannel.insertBefore(headerGroup, addNewPresetButton);
    }
    
    AddedPresets.forEach(entry => {
        if ((searchValue === "" || entry.name.toLowerCase().includes(searchValue)) && (entry.type === 'PRESET')) {
            var groupButton = document.createElement('div');

            groupButton.classList.add('PresetXGroup');
            
            var groupText = document.createElement('h1');
            groupText.textContent = entry.name;
            
            groupButton.appendChild(groupText);
            PresetPannel.insertBefore(groupButton, addNewPresetButton);

            groupButton.addEventListener('click', function() {
                interfaceEntrypoint.evalScript(`JustAddThePreset("${this.textContent}")`);
            });
        }
    });

    if (countPlugins > 0 ) {
        
        var headerGroup = document.createElement('div');

        var PresetHeader = document.createElement('h4');
        PresetHeader.textContent = "All Plugins & Effects [" + countPlugins + "]";
        headerGroup.appendChild(PresetHeader);

        var setUnderline = document.createElement('div');
        setUnderline.classList.add('normal_underlinePresetLoader');
        headerGroup.appendChild(setUnderline);

        headerGroup.classList.add('PresetChannelHeader');
        PresetPannel.insertBefore(headerGroup, addNewPresetButton);
    }

    AddedPresets.forEach(entry => {
        if ((searchValue === "" || entry.name.toLowerCase().includes(searchValue)) && (entry.type === 'PLUGIN')) {
            var groupButton = document.createElement('div');

            groupButton.classList.add('plugInGroup');
            
            var groupText = document.createElement('h1');
            groupText.textContent = entry.name;
            
            groupButton.appendChild(groupText);
            PresetPannel.insertBefore(groupButton, addNewPresetButton);

            groupButton.addEventListener('click', function() {
                interfaceEntrypoint.evalScript(`JustAddTheEffect("${this.textContent}")`);
            });
        }
    });
}

function ToggleOFFPreset()
{
    ToggleDelete = false;
    clearAddPresetPannel();
    document.getElementById('deletetxt').style.transition = 'top 175ms, opacity 175ms';
    document.getElementById('deletetxt').style.top = '6vh';
    document.getElementById('deletetxt').style.opacity = '0%';
    document.getElementById('ToggleDelete').style.backgroundImage = 'url("resources/Trash.png")';
}

function ToggleDeleteFunc()
{
    var PresetPannel = document.getElementById("PresetPannel");
    var addNewPresetButton = document.getElementById('AddNewPreset');

    while (PresetPannel.firstChild) {
        if (PresetPannel.firstChild !== addNewPresetButton) {
            PresetPannel.removeChild(PresetPannel.firstChild);
        } else {
            break;
        }
    }
    
    var searchValue = document.getElementById('PresetSearch').value.toLowerCase();
    var AddedPresets = CustomPresetReadFileOrCreate();
    
    var countPlugins = 0, countPresets = 0;
    
    AddedPresets.forEach(entry => {
        if (entry.type === 'PLUGIN' && entry.name.toLowerCase().includes(searchValue)) countPlugins++;
        if (entry.type === 'PRESET' && entry.name.toLowerCase().includes(searchValue)) countPresets++;
    });
    
    if (countPresets > 0 ) {
        
        var headerGroup = document.createElement('div');

        var PresetHeader = document.createElement('h4');
        PresetHeader.textContent = "All user Presets";
        headerGroup.appendChild(PresetHeader);

        var setUnderline = document.createElement('div');
        setUnderline.classList.add('normal_underlinePresetLoader');
        headerGroup.appendChild(setUnderline);

        headerGroup.classList.add('PresetChannelHeader');
        PresetPannel.insertBefore(headerGroup, addNewPresetButton);
    }
    
    AddedPresets.forEach(entry => {
        if ((searchValue === "" || entry.name.toLowerCase().includes(searchValue)) && (entry.type === 'PRESET')) {
            var groupButton = document.createElement('div');

            groupButton.classList.add('deleteGroup');
            
            var groupText = document.createElement('h1');
            groupText.textContent = entry.name;
            
            groupButton.appendChild(groupText);
            PresetPannel.insertBefore(groupButton, addNewPresetButton);

            groupButton.addEventListener('click', function() {
                countPresets -= 1;
                CustomPresetModifyFile(this.textContent, 'PRESET');
                groupButton.remove();
                groupText.remove();
            });
        }
    });

    if (countPlugins > 0 ) {
        
        var headerGroup = document.createElement('div');

        var PresetHeader = document.createElement('h4');
        PresetHeader.textContent = "All Plugins & Effects";
        headerGroup.appendChild(PresetHeader);

        var setUnderline = document.createElement('div');
        setUnderline.classList.add('normal_underlinePresetLoader');
        headerGroup.appendChild(setUnderline);

        headerGroup.classList.add('PresetChannelHeader');
        PresetPannel.insertBefore(headerGroup, addNewPresetButton);
    }

    AddedPresets.forEach(entry => {
        if ((searchValue === "" || entry.name.toLowerCase().includes(searchValue)) && (entry.type === 'PLUGIN')) {
            var groupButton = document.createElement('div');

            groupButton.classList.add('deleteGroup');
            
            var groupText = document.createElement('h1');
            groupText.textContent = entry.name;
            
            groupButton.appendChild(groupText);
            PresetPannel.insertBefore(groupButton, addNewPresetButton);

            groupButton.addEventListener('click', function() {
                countPlugins -= 1;
                CustomPresetModifyFile(this.textContent, 'PLUGIN');
                groupButton.remove();
                groupText.remove();
            });
        }
    });
}

async function LoadNewEffects(waitToLoad = false)
{
    var PresetSetPannel = document.getElementById("PresetSetPannel");
    PresetSetPannel.innerHTML = '';

    if (waitToLoad)
    {
        PresetSetPannel.style.backgroundImage = 'url("resources/loading.gif")';
        await LoopDelay(650); // Saves a lot of performence GG
        PresetSetPannel.style.backgroundImage = 'none';
    }
    
    if (AllEffectsFromAE.length <= 0 && AllUserPresetsFromAE.length <= 0 ) { return; }

    var searchValue = document.getElementById('PresetSearchToAdd').value.toLowerCase();
    
    var countPlugins = 0, countPresets = 0;
    
    for (var i = 0; i < AllUserPresetsFromAE.length; i++)
    {
        if (searchValue === "" || AllUserPresetsFromAE[i].toLowerCase().includes(searchValue)) {
            countPresets++;
        }
    }

    if (countPresets > 0) {
        
        var headerGroup = document.createElement('div');

        var PresetHeader = document.createElement('h4');
        PresetHeader.textContent = "All user Presets [" + countPresets + "]";
        headerGroup.appendChild(PresetHeader);

        var setUnderline = document.createElement('div');
        setUnderline.classList.add('normal_underlinePresetLoader');
        headerGroup.appendChild(setUnderline);

        headerGroup.classList.add('PresetChannelHeader');
        PresetSetPannel.appendChild(headerGroup);
    }
    
    for (var i = 0; i < AllUserPresetsFromAE.length; i++)
    {
        if (searchValue === "" || AllUserPresetsFromAE[i].toLowerCase().includes(searchValue)) {
            var groupButton = document.createElement('div');
            
            groupButton.classList.add('PresetXGroup');
            
            var groupText = document.createElement('h1');
            groupText.textContent = AllUserPresetsFromAE[i];

            groupButton.appendChild(groupText);
            PresetSetPannel.appendChild(groupButton);

            groupButton.addEventListener('click', function() {
                CustomPresetModifyFile(this.textContent, 'PRESET', false);
                LoadPresetEffects();
            });
        }
    }

    for (var i = 0; i < AllEffectsFromAE.length; i++)
    {
        if (searchValue === "" || AllEffectsFromAE[i].toLowerCase().includes(searchValue)) {
            countPlugins++;
        }
    }
    
    if (countPlugins > 0) {
        
        var headerGroup = document.createElement('div');

        var PresetHeader = document.createElement('h4');
        PresetHeader.textContent = "All Plugins & Effects [" + countPlugins + "]";
        headerGroup.appendChild(PresetHeader);

        var setUnderline = document.createElement('div');
        setUnderline.classList.add('normal_underlinePresetLoader');
        headerGroup.appendChild(setUnderline);

        headerGroup.classList.add('PresetChannelHeader');
        PresetSetPannel.appendChild(headerGroup);
    }

    for (var i = 0; i < AllEffectsFromAE.length; i++)
    {
        if (searchValue === "" || AllEffectsFromAE[i].toLowerCase().includes(searchValue)) {
            var groupButton = document.createElement('div');
            groupButton.classList.add('plugInGroup');
            
            var groupText = document.createElement('h1');
            groupText.textContent = AllEffectsFromAE[i];

            groupButton.appendChild(groupText);
            PresetSetPannel.appendChild(groupButton);

            groupButton.addEventListener('click', function() {
                CustomPresetModifyFile(this.textContent, 'PLUGIN', false);
                LoadPresetEffects();
            });
        }
    }
}


// VIDEOFILDER

let isScrolling;
let timeoutIDs = [];
let isClickAllowed = true;

function clearALLTimeouts()
{
    timeoutIDs.forEach(timeoutID => clearTimeout(timeoutID));
    timeoutIDs = [];
}

document.getElementById('displayOverlays').addEventListener('scroll', function(event) {
    window.clearTimeout(isScrolling);

    isScrolling = setTimeout(function() {
        AssetesIsScrolling = false;
    }, 500);
    
    AssetesIsScrolling = true;
}, false);

function setAssetsStatus(current, maximun)
{
    var currentPage = (current / 9) + 1;
    var MaxPage = Math.ceil(maximun / 9);
    
    document.getElementById('HowmanyAssetText').textContent = 'Page: ' + currentPage + '/' + Math.max(MaxPage, 1);
}

let currentAssetsLenght = 0;
let AssetsPageSTATE = 0;

function readFileOrCreate() {
    const documentsFolder = path.join(os.homedir(), 'Documents');
    const setFolder = path.join(documentsFolder, 'JerryFlow');
    const filePath = path.join(setFolder, 'favouritecollection.jf');

    if (!fs.existsSync(setFolder)) {
        fs.mkdirSync(setFolder, { recursive: true });
    }

    try {
        if (fs.existsSync(filePath)) {
            const data = fs.readFileSync(filePath, 'utf-8');
            return data ? JSON.parse(data) : [];
        } else {
            fs.writeFileSync(filePath, JSON.stringify([]), 'utf-8');
            return [];
        }
    } catch (error) {
        console.error('Error handling the file:', error);
        return [];
    }
}

function modifyFile(entry) {
    const documentsFolder = path.join(os.homedir(), 'Documents');
    const setFolder = path.join(documentsFolder, 'JerryFlow');
    const filePath = path.join(setFolder, 'favouritecollection.jf');

    if (!fs.existsSync(setFolder)) {
        fs.mkdirSync(setFolder, { recursive: true });
    }

    let entries = readFileOrCreate();
    const index = entries.indexOf(entry);

    if (index === -1) {
        entries.push(entry);
    } else {
        entries.splice(index, 1);
    }

    try {
        fs.writeFileSync(filePath, JSON.stringify(entries), 'utf-8');
    } catch (error) {
        console.error('Error writing to the file:', error);
    }
}

var ShowFavOnly = false;

function fetchOverlays(page, VideoBool, PictureBool, SoundBool)
{
    var interfaceEntrypoint = new CSInterface();
    const targetFolderPath = path.join(os.homedir(), 'Documents', 'JerryFlow', 'Assets');

    if (!fs.existsSync(targetFolderPath)) {
        fs.mkdirSync(targetFolderPath);
    }
    
    if (!fs.existsSync(targetFolderPath)) {
        fs.mkdirSync(targetFolderPath, { recursive: true });
    }
    
    fs.readdir(targetFolderPath, (err, files) => {
        if (err) {
            console.log('Error reading the directory:', err);
            return;
        }
        
        const container = document.getElementById('displayOverlays');
        container.innerHTML = '';
        clearALLTimeouts();
        
        const FilterFiles = files.filter(file => {
            //if (ShowFavOnly)

            const ext = path.extname(file).toLowerCase();
            
            let videoFil = VideoBool ? ext === '.mp4' || ext === '.mov' || ext === '.avi' : "";
            let pictureFil = PictureBool ? ext === '.png' || ext === '.webp' || ext === '.jpg' || ext === '.gif' : "";
            let soundFil = SoundBool ? ext === '.mp3' || ext === '.wav' : "";
            var textstuff = document.getElementById("AssetSearch").value.toLowerCase();
            let searchFilter = textstuff.length > 0 ? file.toLowerCase().includes(textstuff) : true;
            
            if (ShowFavOnly)
            {
                var faved = readFileOrCreate();
                return faved.includes(file) && (videoFil || pictureFil || soundFil) && searchFilter;
            }
            else
                return (videoFil || pictureFil || soundFil) && searchFilter;
        });
        
        if (FilterFiles.length <= 0)
        {
            document.getElementById('HowmanyAssetText').textContent = 'Assets Loaded: 0/0';
            var h2 = document.createElement('h2');
            h2.textContent = "No results found";
            h2.style.textAlign = "left";
            h2.style.fontSize = "3vh";
            h2.style.marginLeft = "1vh";
            h2.style.marginTop = "1vh";
            container.appendChild(h2);
        }
        
        setAssetsStatus(AssetsPageSTATE, FilterFiles.length);
        
        FileFilter = FilterFiles;
        let assets_failed_loaded = 0;
        let assets_have_loaded = 0;
        let assets_in_total = FilterFiles.length;
        currentAssetsLenght = FilterFiles.length;

        let delay = 0;
        let videoloader_loader = 450;
        let img_loader = 0;
        let sound_loader = 0;
        FilterFiles.slice(page, page + 9).forEach(file => {
            var testSelect = false;
            const fullPath = path.join(targetFolderPath, file);
            const fileStats = fs.statSync(fullPath);
            const fileSize = Number(fileStats.size / 1024 / 1024).toFixed(2);
            
            const extv2 = path.extname(file).toLowerCase();
            const fileDiv = document.createElement('div');
            fileDiv.classList.add('assetButtonStyle');
            fileDiv.style.opacity = 0;

            var NewString = file.slice(0, Math.min(16, file.length));
            if (file.length > 16) NewString += '..';

            var faved = readFileOrCreate();
            if (faved.includes(file))
                fileDiv.style.backgroundImage = 'url("resources/fav.png")';
            else
                fileDiv.style.backgroundImage = 'none';
            
            if (VideoBool && (extv2 === '.mp4' || extv2 === '.mov' || extv2 === '.avi')) {
                //fileDiv.style.borderTop = "#828bff 0.5vh solid";
                const video = document.createElement('video');
                video.style.zIndex = "10";
                video.controls = false;
                video.autoplay = false;
                video.muted = true;
                video.loop = true;
                let videoTimeoutID = setTimeout(() => {
                    if (fileSize < 50)
                    {
                        video.style.backgroundImage = 'none';
                        video.src = path.join(targetFolderPath, file);
                        video.addEventListener('loadedmetadata', function() {
                            video.currentTime = video.duration / 2;
                        });
                        assets_have_loaded += 1;
                    }
                    else
                    {
                        video.style.backgroundImage = 'url("resources/NoPreview.png")';
                        video.style.backgroundSize = '80%';
                        video.src = '';
                        assets_failed_loaded += 1;
                    }
                }, videoloader_loader);
                timeoutIDs.push(videoTimeoutID);
                video.setAttribute('id', file + "video");
                video.style.zIndex = "1";
                fileDiv.appendChild(video);
                video.addEventListener('mouseenter', function(){ video.currentTime = 0; video.play(); });
                video.addEventListener('mouseleave', function(){ video.pause(); video.currentTime = video.duration / 2; });
            }
            
            if (PictureBool && (extv2 === '.png' || extv2 === '.webp' || extv2 === '.jpg' || extv2 === '.gif')) {
                const img = document.createElement('img');
                img.style.zIndex = "-9999999";
                
                let imgTimeoutID = setTimeout(() => {
                    img.src = path.join(targetFolderPath, file);
                    img.style.backgroundImage = 'url("resources/transparent.jpg")';
                    img.style.backgroundSize = '5%';
                    img.style.backgroundRepeat = 'repeat';
                    assets_have_loaded += 1;
                }, img_loader);
                timeoutIDs.push(imgTimeoutID);
                img.setAttribute('id', file + "img");
                fileDiv.appendChild(img);
            }
            
            if (SoundBool && (extv2 === '.mp3' || extv2 === '.wav')) {
                const sound = document.createElement('div');
                sound.classList.add("soundAssets");

                let soundTimeoutID = setTimeout(() => {
                    sound.style.backgroundImage = 'url("resources/soundfile.png")';
                    assets_have_loaded += 1;
                }, sound_loader);
                timeoutIDs.push(soundTimeoutID);
                sound.setAttribute('id', file + "sound");
                fileDiv.appendChild(sound);
            }
            
            const textContentDiv = document.createElement('p');
            textContentDiv.textContent = NewString;
            fileDiv.appendChild(textContentDiv);

            fileDiv.setAttribute('id', file);
            container.appendChild(fileDiv);
            setTimeout(() => {
                fileDiv.classList.add('fadeIn');
            }, delay);
            delay += 75;
            sound_loader += 75;
            img_loader += 150;
            videoloader_loader += 200;
        });
        
        FilterFiles.slice(page, page + 9).forEach(get_id => {
            
            document.getElementById(get_id).addEventListener("click", function() {
                if (!isClickAllowed) return;
    
                isClickAllowed = false;
                setTimeout(() => {
                    isClickAllowed = true;
                }, 100);
                const fullPath = encodeURIComponent(path.join(targetFolderPath, get_id));
                interfaceEntrypoint.evalScript(`importFileToActiveCompJerryFlow("${fullPath}")`);
            });
            
            document.getElementById(get_id).addEventListener("contextmenu", function() {
                if (!isClickAllowed) return;
    
                isClickAllowed = false;
                setTimeout(() => {
                    isClickAllowed = true;
                }, 100);
                
                modifyFile(get_id);

                var faved = readFileOrCreate();
                if (faved.includes(get_id))
                    document.getElementById(get_id).style.backgroundImage = 'url("resources/fav.png")';
                else
                    document.getElementById(get_id).style.backgroundImage = 'none';

                if (ShowFavOnly)
                    document.getElementById(get_id).remove();
            });

        });
    });
}

let VideoFilter = true;
let PictureFilter = true;
let SoundFilter = true;

function AssetFilter(load_assets)
{
    const container = document.getElementById('displayOverlays');

    container.addEventListener('wheel', function(event) {
        if (!isClickAllowed) return;
    
        isClickAllowed = false;
        setTimeout(() => {
            isClickAllowed = true;
        }, 100);

        var MaxPage = Math.ceil(currentAssetsLenght / 9);
        if (MaxPage === 1)
            return;

        if (event.deltaY < 0) {
            if (AssetsPageSTATE > 0)
            {
                AssetsPageSTATE -= 9;
            }
            else
            {
                AssetsPageSTATE = Math.floor(Math.ceil(currentAssetsLenght / 9) * 9) - 9;
            }
            
            container.innerHTML = '';
            fetchOverlays(AssetsPageSTATE, VideoFilter, PictureFilter, SoundFilter);
            return;
        } else if (event.deltaY > 0) {
            var MaxPage = Math.ceil(currentAssetsLenght / 9);
            if (MaxPage === 1)
                return;
    
            if (AssetsPageSTATE < currentAssetsLenght - 9)
            {
                AssetsPageSTATE += 9;
            }
            else
            {
                AssetsPageSTATE = 0;
            }

            container.innerHTML = '';
            fetchOverlays(AssetsPageSTATE, VideoFilter, PictureFilter, SoundFilter);
            return;
        }
    });

    document.getElementById("plusPage").addEventListener("click", function() {
        if (!isClickAllowed) return;
    
        isClickAllowed = false;
        setTimeout(() => {
            isClickAllowed = true;
        }, 200);

        var MaxPage = Math.ceil(currentAssetsLenght / 9);
        if (MaxPage === 1)
            return;

        if (AssetsPageSTATE < currentAssetsLenght - 9)
        {
            AssetsPageSTATE += 9;
        }
        else
        {
            AssetsPageSTATE = 0;
        }
        
        container.innerHTML = '';
        fetchOverlays(AssetsPageSTATE, VideoFilter, PictureFilter, SoundFilter);
        return;
    });

    document.getElementById("minusPage").addEventListener("click", function() {
        if (!isClickAllowed) return;
    
        isClickAllowed = false;
        setTimeout(() => {
            isClickAllowed = true;
        }, 200);

        var MaxPage = Math.ceil(currentAssetsLenght / 9);
        if (MaxPage === 1)
            return;

        if (AssetsPageSTATE > 0)
        {
            AssetsPageSTATE -= 9;
        }
        else
        {
            AssetsPageSTATE = Math.floor(Math.ceil(currentAssetsLenght / 9) * 9) - 9;
        }
        
        container.innerHTML = '';
        fetchOverlays(AssetsPageSTATE, VideoFilter, PictureFilter, SoundFilter);
        return;
    });

    document.getElementById("AssetsReloadButton").addEventListener("click", function() {
        if (!isClickAllowed) return;
    
        isClickAllowed = false;
        setTimeout(() => {
            isClickAllowed = true;
        }, 200);
        
        AssetsPageSTATE = 0;
        container.innerHTML = '';
        fetchOverlays(AssetsPageSTATE, VideoFilter, PictureFilter, SoundFilter);
        SendNotification("Assets Reloaded");
        return;
    });
    
    document.getElementById("AssetsFavOnlyButton").addEventListener("click", function() {
        if (!isClickAllowed) return;
    
        isClickAllowed = false;
        setTimeout(() => {
            isClickAllowed = true;
        }, 200);
        
        ShowFavOnly = !ShowFavOnly;
        AssetsPageSTATE = 0;
        container.innerHTML = '';
        fetchOverlays(AssetsPageSTATE, VideoFilter, PictureFilter, SoundFilter);
        return;
    });
    
    document.getElementById("AssetSearch").addEventListener("input", function() {
        if (!isClickAllowed) return;
    
        isClickAllowed = false;
        setTimeout(() => {
            isClickAllowed = true;
        }, 15);
        
        AssetsPageSTATE = 0;
        container.innerHTML = '';
        fetchOverlays(AssetsPageSTATE, VideoFilter, PictureFilter, SoundFilter);
        return;
    });

    document.getElementById("AssetsFilterVideo").addEventListener("click", function() {
        if (!isClickAllowed) return;
    
        isClickAllowed = false;
        setTimeout(() => {
            isClickAllowed = true;
        }, 200);

        AssetsPageSTATE = 0;
        container.innerHTML = '';
        VideoFilter = !VideoFilter;
        VideoFilter ? CheckboxChecked(this) : CheckboxUnchecked(this);
        fetchOverlays(AssetsPageSTATE, VideoFilter, PictureFilter, SoundFilter);
        return;
    });

    document.getElementById("AssetsFilterPictures").addEventListener("click", function() {
        if (!isClickAllowed) return;
    
        isClickAllowed = false;
        setTimeout(() => {
            isClickAllowed = true;
        }, 200);
        
        AssetsPageSTATE = 0;
        container.innerHTML = '';
        PictureFilter = !PictureFilter;
        PictureFilter ? CheckboxChecked(this) : CheckboxUnchecked(this);
        fetchOverlays(AssetsPageSTATE, VideoFilter, PictureFilter, SoundFilter);
        return;
    });

    document.getElementById("AssetsFilterSound").addEventListener("click", function() {
        if (!isClickAllowed) return;
    
        isClickAllowed = false;
        setTimeout(() => {
            isClickAllowed = true;
        }, 200);
        
        AssetsPageSTATE = 0;
        container.innerHTML = '';
        SoundFilter = !SoundFilter;
        SoundFilter ? CheckboxChecked(this) : CheckboxUnchecked(this);
        fetchOverlays(AssetsPageSTATE, VideoFilter, PictureFilter, SoundFilter);
        return;
    });

    if (!load_assets)
    {
        container.innerHTML = '';
        return;
    }
    
    fetchOverlays(AssetsPageSTATE, VideoFilter, PictureFilter, SoundFilter);
}

function OpenAssetFolder()
{
    document.getElementById("LittleAssetText").addEventListener("click", function() { 
        const targetFolderPath = path.join(os.homedir(), 'Documents', 'JerryFlow', 'Assets');

        let openCommand;
        switch (os.platform()) {
            case 'darwin':
                openCommand = `open "${targetFolderPath}"`; // Command for macOS
                break;
            case 'win32':
                openCommand = `start "" "${targetFolderPath}"`; // Command for Windows
                break;
            case 'linux':
                openCommand = `xdg-open "${targetFolderPath}"`; // Command for Linux
                break;
            default:
                console.error('Unsupported platform');
                process.exit(1);
        }
        
        exec(openCommand, (error, stdout, stderr) => {
            if (error) {
                console.error(`exec error: ${error}`);
                return;
            }
            console.log(`stdout: ${stdout}`);
            console.error(`stderr: ${stderr}`);
        });
    });
}

AssetFilter(false);
OpenAssetFolder();

var shakeTimeoutID = 0;

function removeOldIcons_animated(ICON1_, ICON2_, ICON3_, ICON4_)
{
    var ICON1 = document.getElementById("tabButton1");
    var ICON2 = document.getElementById("tabButton2");
    var ICON3 = document.getElementById("tabButton3");
    var ICON4 = document.getElementById("tabButton4");
    
    ICON1.classList.remove("CurveICONActive");
    ICON2.classList.remove("MainICONActive");
    ICON3.classList.remove("EffectICONActive");
    ICON4.classList.remove("SettingsICONActive");

    ICON1.classList.remove("CurveICON");
    ICON2.classList.remove("MainICON");
    ICON3.classList.remove("EffectICON");
    ICON4.classList.remove("SettingsICON");
}

function removeOldIcons_static(ICON1_, ICON2_, ICON3_, ICON4_)
{
    var ICON1 = document.getElementById("tabButton1");
    var ICON2 = document.getElementById("tabButton2");
    var ICON3 = document.getElementById("tabButton3");
    var ICON4 = document.getElementById("tabButton4");

    ICON1.classList.remove("static_CurveICONActive");
    ICON2.classList.remove("static_MainICONActive");
    ICON3.classList.remove("static_EffectICONActive");
    ICON4.classList.remove("static_SettingsICONActive");

    ICON1.classList.remove("static_CurveICON");
    ICON2.classList.remove("static_MainICON");
    ICON3.classList.remove("static_EffectICON");
    ICON4.classList.remove("static_SettingsICON");
}

function removeOldIcons_both(ICON1_, ICON2_, ICON3_, ICON4_)
{
    var ICON1 = document.getElementById("tabButton1");
    var ICON2 = document.getElementById("tabButton2");
    var ICON3 = document.getElementById("tabButton3");
    var ICON4 = document.getElementById("tabButton4");

    ICON1.classList.remove("static_CurveICONActive");
    ICON2.classList.remove("static_MainICONActive");
    ICON3.classList.remove("static_EffectICONActive");
    ICON4.classList.remove("static_SettingsICONActive");

    ICON1.classList.remove("static_CurveICON");
    ICON2.classList.remove("static_MainICON");
    ICON3.classList.remove("static_EffectICON");
    ICON4.classList.remove("static_SettingsICON");

    ICON1.classList.remove("CurveICONActive");
    ICON2.classList.remove("MainICONActive");
    ICON3.classList.remove("EffectICONActive");
    ICON4.classList.remove("SettingsICONActive");

    ICON1.classList.remove("CurveICON");
    ICON2.classList.remove("MainICON");
    ICON3.classList.remove("EffectICON");
    ICON4.classList.remove("SettingsICON");
}

function NavIconSwitch(getcurrentTab, whichmode)
{
    var ICON1 = document.getElementById("tabButton1");
    var ICON2 = document.getElementById("tabButton2");
    var ICON3 = document.getElementById("tabButton3");
    var ICON4 = document.getElementById("tabButton4");

    if (!whichmode)
    {
        switch(getcurrentTab)
        {
            case 1:
            {
                removeOldIcons_animated(ICON1, ICON2, ICON3, ICON4);

                ICON1.classList.add("CurveICONActive");
                ICON2.classList.add("MainICON");
                ICON3.classList.add("EffectICON");
                ICON4.classList.add("SettingsICON");
            }
            break;
            case 2:
            {
                removeOldIcons_animated(ICON1, ICON2, ICON3, ICON4);
        
                ICON1.classList.add("CurveICON");
                ICON2.classList.add("MainICONActive");
                ICON3.classList.add("EffectICON");
                ICON4.classList.add("SettingsICON");
            }
            break;
            case 3:
            {
                removeOldIcons_animated(ICON1, ICON2, ICON3, ICON4);
        
                ICON1.classList.add("CurveICON");
                ICON2.classList.add("MainICON");
                ICON3.classList.add("EffectICONActive");
                ICON4.classList.add("SettingsICON");
            }
            break;
            case 4:
            {
                removeOldIcons_animated(ICON1, ICON2, ICON3, ICON4);
        
                ICON1.classList.add("CurveICON");
                ICON2.classList.add("MainICON");
                ICON3.classList.add("EffectICON");
                ICON4.classList.add("SettingsICONActive");
            }
            break;
        }
    }
    else
    {
        switch(getcurrentTab)
        {
            case 1:
            {
                removeOldIcons_static(ICON1, ICON2, ICON3, ICON4);
        
                ICON1.classList.add("static_CurveICONActive");
                ICON2.classList.add("static_MainICON");
                ICON3.classList.add("static_EffectICON");
                ICON4.classList.add("static_SettingsICON");
            }
            break;
            case 2:
            {
                removeOldIcons_static(ICON1, ICON2, ICON3, ICON4);
        
                ICON1.classList.add("static_CurveICON");
                ICON2.classList.add("static_MainICONActive");
                ICON3.classList.add("static_EffectICON");
                ICON4.classList.add("static_SettingsICON");
            }
            break;
            case 3:
            {
                removeOldIcons_static(ICON1, ICON2, ICON3, ICON4);
        
                ICON1.classList.add("static_CurveICON");
                ICON2.classList.add("static_MainICON");
                ICON3.classList.add("static_EffectICONActive");
                ICON4.classList.add("static_SettingsICON");
            }
            break;
            case 4:
            {
                removeOldIcons_static(ICON1, ICON2, ICON3, ICON4);
        
                ICON1.classList.add("static_CurveICON");
                ICON2.classList.add("static_MainICON");
                ICON3.classList.add("static_EffectICON");
                ICON4.classList.add("static_SettingsICONActive");
            }
            break;
        }
    }
}

function SetTutoVideoDuN(VideoTagID, path)
{
    VideoTagID.setAttribute('src', path);
    VideoTagID.controls = false;
    VideoTagID.autoplay = true;
    VideoTagID.muted = true;
    VideoTagID.loop = true;
    VideoTagID.load();
}

function RemoveTutoVideoDuN(VideoTagID)
{
    VideoTagID.removeAttribute('src');
    VideoTagID.controls = false;
    VideoTagID.autoplay = false;
    VideoTagID.muted = true;
    VideoTagID.loop = false;
    VideoTagID.load();
}

function AddHowToVideos() {
    var HowToUseVideo1 = document.getElementById('HowToUseVideo1'),
        HowToUseVideo2 = document.getElementById('HowToUseVideo2'),
        HowToUseVideo3 = document.getElementById('HowToUseVideo3'),
        HowToUseVideo4 = document.getElementById('HowToUseVideo4'),
        HowToUseVideo5 = document.getElementById('HowToUseVideo5'),
        HowToUseVideo6 = document.getElementById('HowToUseVideo6'),
        HowToUseVideo7 = document.getElementById('HowToUseVideo7'),
        HowToUseVideo8 = document.getElementById('HowToUseVideo8');
    
    SetTutoVideoDuN(HowToUseVideo1, "resources/howtosection/1.mp4");
    SetTutoVideoDuN(HowToUseVideo2, "resources/howtosection/2.mp4");
    SetTutoVideoDuN(HowToUseVideo3, "resources/howtosection/3.mp4");
    SetTutoVideoDuN(HowToUseVideo4, "resources/howtosection/4.mp4");
    SetTutoVideoDuN(HowToUseVideo5, "resources/howtosection/5.mp4");
    SetTutoVideoDuN(HowToUseVideo6, "resources/howtosection/6.mp4");
    SetTutoVideoDuN(HowToUseVideo7, "resources/howtosection/7.mp4");
    SetTutoVideoDuN(HowToUseVideo8, "resources/howtosection/8.mp4");
}

function RemoveHowToVideos() {
    var HowToUseVideo1 = document.getElementById('HowToUseVideo1'),
    HowToUseVideo2 = document.getElementById('HowToUseVideo2'),
    HowToUseVideo3 = document.getElementById('HowToUseVideo3'),
    HowToUseVideo4 = document.getElementById('HowToUseVideo4'),
    HowToUseVideo5 = document.getElementById('HowToUseVideo5'),
    HowToUseVideo6 = document.getElementById('HowToUseVideo6'),
    HowToUseVideo7 = document.getElementById('HowToUseVideo7'),
    HowToUseVideo8 = document.getElementById('HowToUseVideo8');

    RemoveTutoVideoDuN(HowToUseVideo1);
    RemoveTutoVideoDuN(HowToUseVideo2);
    RemoveTutoVideoDuN(HowToUseVideo3);
    RemoveTutoVideoDuN(HowToUseVideo4);
    RemoveTutoVideoDuN(HowToUseVideo5);
    RemoveTutoVideoDuN(HowToUseVideo6);
    RemoveTutoVideoDuN(HowToUseVideo7);
    RemoveTutoVideoDuN(HowToUseVideo8);
}

var firstStart = true;
function OpenDashBoard()
{
    var dashboard = document.getElementById("dashboard");
    dashboard.style.transition = "margin-left 500ms cubic-bezier(.7,0,.3,1), opacity 500ms cubic-bezier(.7,0,.3,1)";
    dashboard.style.marginLeft = "15%";
    dashboard.style.opacity = "100%";
    
    if (firstStart)
    {
        loadAndModifySettings(dataArray => {
            if (dataArray[0].configFirstLoad || dataArray[0].configFirstLoad == undefined)
            {
                HowToUseJerryFlowV2.style.marginLeft = "0%";
                HowToUseJerryFlowV2.style.opacity = "100%";
                AddHowToVideos();
                SendNotification("Welcome back " + userName, true, true, false);
                dataArray[0].configFirstLoad = false;
            }
            else
            {
                SendNotification("Welcome back " + userName);
            }
        });
    
        setTimeout(LoadSettingsFile, 150);
        firstStart = false;
    }
}

function CloseDashBoard()
{
    var dashboard = document.getElementById("dashboard");
    dashboard.style.transition = "margin-left 500ms cubic-bezier(.7,0,.3,1), opacity 500ms cubic-bezier(.7,0,.3,1)";
    dashboard.style.marginLeft = "100%";
    dashboard.style.opacity = "0%";
}

var MenuTimeOut;

function newTabAnims(newTab)
{
    clearTimeout(MenuTimeOut);
    var tab1 = document.getElementById("tab_1");
    var tab2 = document.getElementById("tab_2");
    var tab3 = document.getElementById("tab_3");
    var tab4 = document.getElementById("tab_4");

    var animHeight = "5vh";
    var SlideInAnim =  opacityTimerIN + ", " + topTimerIN;
    var SlideOutAnim =  opacityTimerOUT + ", " + topTimerOUT;
    
    switch (newTab)
    {
        case 1:
        {
            tab1.style.transition = SlideInAnim;
            tab2.style.transition = SlideOutAnim;
            tab3.style.transition = SlideOutAnim;
            tab4.style.transition = SlideOutAnim;

            MenuTimeOut = setTimeout(() => {
                tab1.style.top = '0vh';
                tab1.style.opacity = "100%";
            }, waitForAnim);

            tab2.style.top = animHeight;
            tab3.style.top = animHeight;
            tab4.style.top = animHeight;

            tab2.style.opacity = "0%";
            tab3.style.opacity = "0%";
            tab4.style.opacity = "0%";

        }
        break;
        case 2:
        {
            tab1.style.transition = SlideOutAnim;
            tab2.style.transition = SlideInAnim;
            tab3.style.transition = SlideOutAnim;
            tab4.style.transition = SlideOutAnim;

            tab1.style.top = animHeight;
            tab1.style.opacity = "0%";
            MenuTimeOut = setTimeout(() => {
                tab2.style.top = '0vh';
                tab2.style.opacity = "100%";
            }, waitForAnim);
            tab3.style.top = animHeight;
            tab4.style.top = animHeight;
            tab3.style.opacity = "0%";
            tab4.style.opacity = "0%";
        }
        break;
        case 3:
        {
            tab1.style.transition = SlideOutAnim;
            tab2.style.transition = SlideOutAnim;
            tab3.style.transition = SlideInAnim;
            tab4.style.transition = SlideOutAnim;

            tab1.style.top = animHeight;
            tab2.style.top = animHeight;
            tab1.style.opacity = "0%";
            tab2.style.opacity = "0%";
            MenuTimeOut = setTimeout(() => {
                tab3.style.top = '0vh';
                tab3.style.opacity = "100%";
            }, waitForAnim);
            tab4.style.top = animHeight;
            tab4.style.opacity = "0%";
        }
        break;
        case 4:
        {
            tab1.style.transition = SlideOutAnim;
            tab2.style.transition = SlideOutAnim;
            tab3.style.transition = SlideOutAnim;
            tab4.style.transition = SlideInAnim;

            tab1.style.top = animHeight;
            tab2.style.top = animHeight;
            tab3.style.top = animHeight;
            tab1.style.opacity = "0%";
            tab2.style.opacity = "0%";
            tab3.style.opacity = "0%";
            MenuTimeOut = setTimeout(() => {
                tab4.style.top = '0vh';
                tab4.style.opacity = "100%";
            }, waitForAnim);
        }
        break;
    }
}

var MenuTimeOut2;
var MenuTimeOut3;

function newEffectsTabAnims(newTab)
{
    clearTimeout(MenuTimeOut2);
    var tabAddCustomShake = document.getElementById("AddCustomShakeTab");
    var tabSetPreset = document.getElementById("SaveNewPresetTab");
    var tabPresets = document.getElementById("PresetsTab");
    var tabEffect = document.getElementById("EffectTab");
    var tabShakes = document.getElementById("ShakeTab");
    var tabOverlays = document.getElementById("OverlaysTab");

    var animHeight = "5vh";
    var SlideOutAnim = opacityTimerOUT + ", " + topTimerOUT;
    
    switch (newTab)
    {
        case 0:
        {
            ToggleOFFPreset();
            LoadPresetEffects(false);
            document.getElementById('cShakePreview').removeAttribute('src');
            document.getElementById('cShakePreview').load();
            
            GlobalsEffectCurrentTab = 0;
            tabSetPreset.style.transition = SlideOutAnim;
            tabPresets.style.transition = SlideOutAnim;
            tabEffect.style.transition = SlideOutAnim;
            tabShakes.style.transition = SlideOutAnim;
            tabOverlays.style.transition = SlideOutAnim;
            tabAddCustomShake.style.transition = SlideOutAnim;
            
            MenuTimeOut2 = setTimeout(() => {
                tabPresets.style.top = '0vh';
                tabPresets.style.opacity = "100%";
                tabPresets.style.zIndex = "1";
            }, waitForAnim);
            
            tabSetPreset.style.top = animHeight;
            tabEffect.style.top = animHeight;
            tabShakes.style.top = animHeight;
            tabOverlays.style.top = animHeight;
            tabAddCustomShake.style.top = animHeight;

            tabSetPreset.style.opacity = "0%";
            tabEffect.style.opacity = "0%";
            tabShakes.style.opacity = "0%";
            tabOverlays.style.opacity = "0%";
            tabAddCustomShake.style.opacity = "0%";

            tabSetPreset.style.zIndex = "0";
            tabEffect.style.zIndex = "0";
            tabShakes.style.zIndex = "0";
            tabOverlays.style.zIndex = "0";
            tabAddCustomShake.style.zIndex = "0";
        }
        break;
        case 1:
        {
            ToggleOFFPreset();
            LoadPresetEffects(false);
            document.getElementById('cShakePreview').removeAttribute('src');
            document.getElementById('cShakePreview').load();
            
            tabSetPreset.style.transition = SlideOutAnim;
            tabPresets.style.transition = SlideOutAnim;
            tabEffect.style.transition = SlideOutAnim;
            tabShakes.style.transition = SlideOutAnim;
            tabOverlays.style.transition = SlideOutAnim;
            tabAddCustomShake.style.transition = SlideOutAnim;
            
            MenuTimeOut2 = setTimeout(() => {
                tabEffect.style.top = '0vh';
                tabEffect.style.opacity = "100%";
                tabEffect.style.zIndex = "1";
            }, waitForAnim);

            tabSetPreset.style.top = animHeight;
            tabPresets.style.top = animHeight;
            tabShakes.style.top = animHeight;
            tabOverlays.style.top = animHeight;
            tabAddCustomShake.style.top = animHeight;

            tabSetPreset.style.opacity = "0%";
            tabPresets.style.opacity = "0%";
            tabShakes.style.opacity = "0%";
            tabOverlays.style.opacity = "0%";
            tabAddCustomShake.style.opacity = "0%";

            tabSetPreset.style.zIndex = "0";
            tabPresets.style.zIndex = "0";
            tabShakes.style.zIndex = "0";
            tabOverlays.style.zIndex = "0";
            tabAddCustomShake.style.zIndex = "0";
        }
        break;
        case 2:
        {
            GlobalsEffectCurrentTab = 2;
            ToggleOFFPreset();
            LoadPresetEffects(false);
            document.getElementById('cShakePreview').removeAttribute('src');
            document.getElementById('cShakePreview').load();
            
            tabSetPreset.style.transition = SlideOutAnim;
            tabPresets.style.transition = SlideOutAnim;
            tabEffect.style.transition = SlideOutAnim;
            tabShakes.style.transition = SlideOutAnim;
            tabOverlays.style.transition = SlideOutAnim;
            tabAddCustomShake.style.transition = SlideOutAnim;
            
            MenuTimeOut2 = setTimeout(() => {
                tabShakes.style.top = '0vh';
                tabShakes.style.opacity = "100%";
                tabShakes.style.zIndex = "1";
            }, waitForAnim);

            tabSetPreset.style.top = animHeight;
            tabPresets.style.top = animHeight;
            tabEffect.style.top = animHeight;
            tabOverlays.style.top = animHeight;
            tabAddCustomShake.style.top = animHeight;

            tabSetPreset.style.opacity = "0%";
            tabPresets.style.opacity = "0%";
            tabEffect.style.opacity = "0%";
            tabOverlays.style.opacity = "0%";
            tabAddCustomShake.style.opacity = "0%";
            
            tabSetPreset.style.zIndex = "0";
            tabPresets.style.zIndex = "0";
            tabEffect.style.zIndex = "0";
            tabOverlays.style.zIndex = "0";
            tabAddCustomShake.style.zIndex = "0";
        }
        break;
        case 3:
        {
            ToggleOFFPreset();
            LoadPresetEffects(false);
            document.getElementById('cShakePreview').removeAttribute('src');
            document.getElementById('cShakePreview').load();
            
            tabSetPreset.style.transition = SlideOutAnim;
            tabPresets.style.transition = SlideOutAnim;
            tabEffect.style.transition = SlideOutAnim;
            tabShakes.style.transition = SlideOutAnim;
            tabOverlays.style.transition = SlideOutAnim;

            tabSetPreset.style.top = animHeight;
            tabPresets.style.top = animHeight;
            tabEffect.style.top = animHeight;
            tabShakes.style.top = animHeight;
            tabAddCustomShake.style.top = animHeight;

            tabSetPreset.style.opacity = "0%";
            tabPresets.style.opacity = "0%";
            tabEffect.style.opacity = "0%";
            tabShakes.style.opacity = "0%";
            tabAddCustomShake.style.opacity = "0%";
            
            tabSetPreset.style.zIndex = "0";
            tabPresets.style.zIndex = "0";
            tabEffect.style.zIndex = "0";
            tabShakes.style.zIndex = "0";
            tabAddCustomShake.style.zIndex = "0";

            MenuTimeOut2 = setTimeout(() => {
                tabOverlays.style.top = '0vh';
                tabOverlays.style.opacity = "100%";
                tabOverlays.style.zIndex = "1";
            }, waitForAnim);
        }
        break;
        case 4:
        {
            tabSetPreset.style.transition = SlideOutAnim;
            tabPresets.style.transition = SlideOutAnim;
            tabEffect.style.transition = SlideOutAnim;
            tabShakes.style.transition = SlideOutAnim;
            tabOverlays.style.transition = SlideOutAnim;

            tabPresets.style.top = animHeight;
            tabEffect.style.top = animHeight;
            tabShakes.style.top = animHeight;
            tabAddCustomShake.style.top = animHeight;

            tabPresets.style.opacity = "0%";
            tabEffect.style.opacity = "0%";
            tabShakes.style.opacity = "0%";
            tabAddCustomShake.style.opacity = "0%";

            tabPresets.style.zIndex = "0";
            tabEffect.style.zIndex = "0";
            tabShakes.style.zIndex = "0";
            tabAddCustomShake.style.zIndex = "0";

            MenuTimeOut2 = setTimeout(() => {
                tabSetPreset.style.top = '0vh';
                tabSetPreset.style.opacity = "100%";
                tabSetPreset.style.zIndex = "1";
            }, waitForAnim);
        }
        break;
        case 5:
        {
            tabSetPreset.style.transition = SlideOutAnim;
            tabPresets.style.transition = SlideOutAnim;
            tabEffect.style.transition = SlideOutAnim;
            tabShakes.style.transition = SlideOutAnim;
            tabOverlays.style.transition = SlideOutAnim;
            tabAddCustomShake.style.transition = SlideOutAnim;

            tabPresets.style.top = animHeight;
            tabEffect.style.top = animHeight;
            tabShakes.style.top = animHeight;

            tabPresets.style.opacity = "0%";
            tabEffect.style.opacity = "0%";
            tabShakes.style.opacity = "0%";

            tabPresets.style.zIndex = "0";
            tabEffect.style.zIndex = "0";
            tabShakes.style.zIndex = "0";

            MenuTimeOut2 = setTimeout(() => {
                tabAddCustomShake.style.top = '0vh';
                tabAddCustomShake.style.opacity = "100%";
                tabAddCustomShake.style.zIndex = "1";
            }, waitForAnim);
        }
        break;
    }
}

function OpenNotes()
{
    clearTimeout(MenuTimeOut3);
    var QuickNoteSection = document.getElementById("QuickNoteSection");
    var SlideOutAnim = opacityTimerOUT + ", " + topTimerOUT;

    QuickNoteSection.style.transition = SlideOutAnim;
    QuickNoteSection.style.opacity = '100%';
    QuickNoteSection.style.top = '0vh';
    QuickNoteSection.style.zIndex = '9999998';
    NotePadOpen = true;
}

function CloseNotes()
{
    clearTimeout(MenuTimeOut3);
    var QuickNoteSection = document.getElementById("QuickNoteSection");
    var SlideOutAnim = opacityTimerOUT + ", " + topTimerOUT;

    QuickNoteSection.style.transition = SlideOutAnim;
    QuickNoteSection.style.opacity = '0%';
    QuickNoteSection.style.top = '5vh';
    
    MenuTimeOut3 = setTimeout(() => {
        QuickNoteSection.style.zIndex = '-100';
    }, waitForAnim);
    NotePadOpen = true;
}

// TODO: nav system

function NavBar() {
    if (HelloIamRetarted)
        return;

    // var OpenDashBordVar = document.getElementById("OpenDashBordVar");
    var JerryFlowTxT = document.getElementById("alineContent");
    var curveButton = document.getElementById("tabButton1");
    var mainButton = document.getElementById("tabButton2");
    var effectButton = document.getElementById("tabButton3");
    var settingsButton = document.getElementById("tabButton4");
    var NoteButton = document.getElementById("NoteButton");
    
    var tab1 = document.getElementById("tab_1");
    var tab2 = document.getElementById("tab_2");
    var tab3 = document.getElementById("tab_3");
    var tab4 = document.getElementById("tab_4");
 
    const animstep = 20;
    var current_tab = 1;

    //Dashboard
    
    JerryFlowTxT.addEventListener("click", function() {
        var dashboard = document.getElementById("dashboard");
        if (dashboard.style.marginLeft != "15%")
            OpenDashBoard();
        else
            CloseDashBoard();
    });

    NoteButton.addEventListener("click", function() {
        if (document.getElementById("QuickNoteSection").style.opacity != "1")
        {
            CloseDashBoard();
            OpenNotes();
        }
        else
            CloseNotes();
    });

    // OpenDashBordVar.addEventListener("click", function() {
    //     var dashboard = document.getElementById("dashboard");
    //     if (dashboard.style.marginLeft != "15%")
    //         OpenDashBoard();
    //     else
    //         CloseDashBoard();
    // });

    // Curve tab
    curveButton.addEventListener("click", function() {
        CloseNotes();
        ToggleOFFPreset();
        LoadPresetEffects(false);
        document.getElementById('cShakePreview').removeAttribute('src');
        document.getElementById('cShakePreview').load();

        if (current_tab != 1)
        {
            if (GlobalsEffectCurrentTab === 4)  newEffectsTabAnims(0);
            //opacityManager(tab2, tab3, tab4);
            //tab1.style.transition = margin_time_min + ", " + opacity_time + ", " + top_time_min;
            
            newTabAnims(1);

            tab1.style.zIndex = "1";
            tab2.style.zIndex = "0";
            tab3.style.zIndex = "0";
            tab4.style.zIndex = "0";

            current_tab = 1;
            GlobalsCurrentTab = current_tab;
            NavIconSwitch(current_tab, settingsData[0].ui_disable_nav_icon_animation);
            AssetFilter(false);
        }      
        CloseDashBoard();
    });
    
    curveButton.addEventListener("contextmenu", function() {
        CloseNotes();
        ToggleOFFPreset();
        LoadPresetEffects(false);
        document.getElementById('cShakePreview').removeAttribute('src');
        document.getElementById('cShakePreview').load();
        
        if (current_tab != 1)
        {    
            if (GlobalsEffectCurrentTab === 4)  newEffectsTabAnims(0);
            //opacityManager(tab2, tab3, tab4);
            //tab1.style.transition = margin_time_min + ", " + opacity_time + ", " + top_time_min;
            
            newTabAnims(1);
            
            tab1.style.zIndex = "1";
            tab2.style.zIndex = "0";
            tab3.style.zIndex = "0";
            tab4.style.zIndex = "0";

            current_tab = 1;
            GlobalsCurrentTab = current_tab;
            NavIconSwitch(current_tab, settingsData[0].ui_disable_nav_icon_animation);
            AssetFilter(false);
        }
        CloseDashBoard();
    });

    if (current_tab == 1)
    {
        var activate_live_curves = false;
        curveButton.addEventListener("contextmenu", function() {
            if (!activate_live_curves)
            {
                document.getElementById("set_curve_pos").style.transform = "scale(0)";
                document.getElementById("set_curve_pos").style.opacity = "0%";
                document.getElementById("liveCurves").style.transform = "scale(1)";
                document.getElementById("liveCurves").style.opacity = "100%";
                activate_live_curves = true;
            }
            else
            {
                document.getElementById("set_curve_pos").style.transform = "scale(1)";
                document.getElementById("set_curve_pos").style.opacity = "100%";
                document.getElementById("liveCurves").style.transform = "scale(0)";
                document.getElementById("liveCurves").style.opacity = "0%";
                activate_live_curves = false;
            }
        });
    }
    
    document.getElementById('InstatCurveSwitcher').addEventListener("click", function() {
        if (!activate_live_curves)
        {
            document.getElementById("set_curve_pos").style.transform = "scale(0)";
            document.getElementById("set_curve_pos").style.opacity = "0%";
            document.getElementById("liveCurves").style.transform = "scale(1)";
            document.getElementById("liveCurves").style.opacity = "100%";
            activate_live_curves = true;
        }
    });
    
    
    document.getElementById('CurvePresetSwitcher').addEventListener("click", function() {
        if (activate_live_curves)
        {
            document.getElementById("set_curve_pos").style.transform = "scale(1)";
            document.getElementById("set_curve_pos").style.opacity = "100%";
            document.getElementById("liveCurves").style.transform = "scale(0)";
            document.getElementById("liveCurves").style.opacity = "0%";
            activate_live_curves = false;
        }
    });

    // Main
    mainButton.addEventListener("click", function() {
        CloseNotes();
        ToggleOFFPreset();
        LoadPresetEffects(false);
        document.getElementById('cShakePreview').removeAttribute('src');
        document.getElementById('cShakePreview').load();
        
        if (current_tab != 2)
        {
            if (GlobalsEffectCurrentTab === 4)  newEffectsTabAnims(0);
            //opacityManager(tab2, tab3, tab4);
            //tab1.style.transition = margin_time_min + ", " + opacity_time + ", " + top_time_min;

            //const doMath = 10 + animstep;
            newTabAnims(2);

            tab2.style.zIndex = "1";
            tab1.style.zIndex = "0";
            tab3.style.zIndex = "0";
            tab4.style.zIndex = "0";

            current_tab = 2;
            GlobalsCurrentTab = current_tab;
            NavIconSwitch(current_tab, settingsData[0].ui_disable_nav_icon_animation);
            AssetFilter(false);
        }
        CloseDashBoard();
    });

    // Effects
    effectButton.addEventListener("click", function() {
        CloseNotes();
        ToggleOFFPreset();
        
        if (GlobalsEffectCurrentTab === 4)  newEffectsTabAnims(0);
        if (GlobalsEffectCurrentTab === 5)  
        {
            document.getElementById('cShakePreview').setAttribute('src', 'Previews/CustomShakePreview.mp4');
            document.getElementById('cShakePreview').load();
        }
        else {
            document.getElementById('cShakePreview').removeAttribute('src');
            document.getElementById('cShakePreview').load();
        }

        if (current_tab != 3)
        {
            LoadPresetEffects(false);
            //opacityManager(tab2, tab3, tab4);
            //tab1.style.transition = margin_time_min + ", " + opacity_time + ", " + top_time_min;
            newTabAnims(3);
            
            tab3.style.zIndex = "1";
            tab1.style.zIndex = "0";
            tab2.style.zIndex = "0";
            tab4.style.zIndex = "0";
    
            current_tab = 3;
            GlobalsCurrentTab = current_tab;
            NavIconSwitch(current_tab, settingsData[0].ui_disable_nav_icon_animation);
            AssetFilter(GlobalsEffectCurrentTab === 3 && GlobalsCurrentTab === 3);
        }
        CloseDashBoard();
    });

    // Settings
    settingsButton.addEventListener("click", function() {
        CloseNotes();
        ToggleOFFPreset();
        LoadPresetEffects(false);
        document.getElementById('cShakePreview').removeAttribute('src');
        document.getElementById('cShakePreview').load();
        
        if (current_tab != 4)
        {   
            if (GlobalsEffectCurrentTab === 4)  newEffectsTabAnims(0);
            //opacityManager(tab2, tab3, tab4);
            //tab1.style.transition = margin_time_min + ", " + opacity_time + ", " + top_time_min;
            newTabAnims(4);
            
            tab4.style.zIndex = "1";
            tab1.style.zIndex = "0";
            tab2.style.zIndex = "0";
            tab3.style.zIndex = "0";
            
            current_tab = 4;
            GlobalsCurrentTab = current_tab;
            NavIconSwitch(current_tab, settingsData[0].ui_disable_nav_icon_animation);
            AssetFilter(false);
        }
        CloseDashBoard();
    });

    window.addEventListener('resize', function() {
        tab1.style.transition = "none";
        tab2.style.transition = "none";
        tab3.style.transition = "none";
        tab4.style.transition = "none";

        document.getElementById('deletetxt').style.transition = 'none';
        document.getElementById("QuickNoteSection").style.transition = "none";

        document.getElementById("curveSectionTab").style.transition = "height 0ms";
        document.getElementById("mainSectionTab").style.transition = "height 0ms";
        document.getElementById("midsec").style.transition = "height 0ms";
        document.getElementById("CallActionButton").style.transition = "margin-top 0ms";
        document.getElementById("OverAllStatTxt").style.transition = "margin-top 0ms";

        document.getElementById("PreCompCOMBO").style.transition = "none";
        document.getElementById("AjustmentCOMBO").style.transition = "none";
        document.getElementById("FlashCOMBO").style.transition = "none";
        document.getElementById("ShakesCOMBO").style.transition = "none";
        
        document.getElementById("WarpStabilizerCOMBO").style.transition = "none";
        document.getElementById("TransitionSideCOMBO").style.transition = "none";
    });
}

// TODO: NEW EFFECT PRESETS

var editingShake = false;
var currenttab = 0;
function EffectTabNav()
{
    var AddShake = document.getElementById("AddShake");
    var AddNewPreset = document.getElementById("AddNewPreset");
    var buttonPreset = document.getElementById("PreButton");
    var buttonEffect = document.getElementById("EffButton");
    var buttonShakes = document.getElementById("ShkButton");
    var buttonOverlays = document.getElementById("OvrButton");
    
    buttonPreset.addEventListener("click", function() {
        if (GlobalsCurrentTab != 3)
            return;

        if (currenttab != 0)
        {
            buttonPreset.classList.remove("eff_active");
            buttonPreset.classList.remove("not_eff_active");
            buttonEffect.classList.remove("eff_active");
            buttonEffect.classList.remove("not_eff_active");
            buttonShakes.classList.remove("eff_active");
            buttonShakes.classList.remove("not_eff_active");
            buttonOverlays.classList.remove("eff_active");
            buttonOverlays.classList.remove("not_eff_active");
            
            buttonPreset.classList.add("eff_active");
            buttonEffect.classList.add("not_eff_active");
            buttonShakes.classList.add("not_eff_active");
            buttonOverlays.classList.add("not_eff_active");
            
            newEffectsTabAnims(0);
            currenttab = 0;
            GlobalsEffectCurrentTab = currenttab;
            AssetFilter(false);
        }
        
    });

    buttonEffect.addEventListener("click", function() {
        if (GlobalsCurrentTab != 3)
            return;

        if (currenttab != 1)
        {
            buttonPreset.classList.remove("eff_active");
            buttonPreset.classList.remove("not_eff_active");
            buttonEffect.classList.remove("eff_active");
            buttonEffect.classList.remove("not_eff_active");
            buttonShakes.classList.remove("eff_active");
            buttonShakes.classList.remove("not_eff_active");
            buttonOverlays.classList.remove("eff_active");
            buttonOverlays.classList.remove("not_eff_active");
            
            buttonPreset.classList.add("not_eff_active");
            buttonEffect.classList.add("eff_active");
            buttonShakes.classList.add("not_eff_active");
            buttonOverlays.classList.add("not_eff_active");
            
            newEffectsTabAnims(1);
            currenttab = 1;
            GlobalsEffectCurrentTab = currenttab;
            AssetFilter(false);
        }
        
    });

    buttonShakes.addEventListener("click", function() {
        if (GlobalsCurrentTab != 3)
            return;

        if (currenttab != 2)
        {
            buttonPreset.classList.remove("eff_active");
            buttonPreset.classList.remove("not_eff_active");
            buttonEffect.classList.remove("eff_active");
            buttonEffect.classList.remove("not_eff_active");
            buttonShakes.classList.remove("eff_active");
            buttonShakes.classList.remove("not_eff_active");
            buttonOverlays.classList.remove("eff_active");
            buttonOverlays.classList.remove("not_eff_active");
            
            buttonPreset.classList.add("not_eff_active");
            buttonEffect.classList.add("not_eff_active");
            buttonShakes.classList.add("eff_active");
            buttonOverlays.classList.add("not_eff_active");

            newEffectsTabAnims(2);
            currenttab = 2;
            GlobalsEffectCurrentTab = currenttab;
            AssetFilter(false);
        }
    });

    buttonOverlays.addEventListener("click", function() {
        if (GlobalsCurrentTab != 3)
            return;

        if (currenttab != 3)
        {
            buttonPreset.classList.remove("eff_active");
            buttonPreset.classList.remove("not_eff_active");
            buttonEffect.classList.remove("eff_active");
            buttonEffect.classList.remove("not_eff_active");
            buttonShakes.classList.remove("eff_active");
            buttonShakes.classList.remove("not_eff_active");
            buttonOverlays.classList.remove("eff_active");
            buttonOverlays.classList.remove("not_eff_active");

            buttonPreset.classList.add("not_eff_active");
            buttonEffect.classList.add("not_eff_active");
            buttonShakes.classList.add("not_eff_active");
            buttonOverlays.classList.add("eff_active");

            newEffectsTabAnims(3);
            currenttab = 3;
            GlobalsEffectCurrentTab = currenttab;
            AssetFilter(GlobalsEffectCurrentTab === 3 && GlobalsCurrentTab === 3);
        }
    });
    
    AddNewPreset.addEventListener("click", function() {
        ToggleOFFPreset();
        LoadPresetEffects(false);

        if (GlobalsCurrentTab != 3)
            return;
        
        if (GlobalsEffectCurrentTab != 4)
        {
            document.getElementById("PresetSearch").value = '';
            newEffectsTabAnims(4);
            currenttab = 4;
            GlobalsEffectCurrentTab = currenttab;
            LoadNewEffects(true);
            AssetFilter(false);
        }
    });
    
    AddShake.addEventListener("click", function() {
        if (GlobalsCurrentTab != 3)
            return;
        
        if (GlobalsEffectCurrentTab != 5)
        {
            document.getElementById('AddShakeToList').textContent = 'Add shake';
            document.getElementById('DeleteShake').style.transform = 'scale(0)';
            editingShake = false;
            document.getElementById('cShakePreview').setAttribute('src', 'Previews/CustomShakePreview.mp4');
            document.getElementById('cShakePreview').load();
            newEffectsTabAnims(5);
            currenttab = 5;
            GlobalsEffectCurrentTab = currenttab;
            AssetFilter(false);
        }
    });
    
    document.getElementById('ToggleDelete').addEventListener("click", function() {
        ToggleDelete = !ToggleDelete;

        if (ToggleDelete)
        {
            document.getElementById('deletetxt').style.transition = 'top 175ms, opacity 175ms';
            document.getElementById('deletetxt').style.top = '4vh';
            document.getElementById('deletetxt').style.opacity = '100%';
            document.getElementById('ToggleDelete').style.backgroundImage = 'url("resources/Trash1.png")';
            ToggleDeleteFunc();
        }
        else
        {
            document.getElementById('deletetxt').style.transition = 'top 175ms, opacity 175ms';
            document.getElementById('deletetxt').style.top = '6vh';
            document.getElementById('deletetxt').style.opacity = '0%';
            document.getElementById('ToggleDelete').style.backgroundImage = 'url("resources/Trash.png")';
            LoadPresetEffects(false);
        }
    });
    
    document.getElementById('PresetSearchToAdd').addEventListener('input', function(){
        LoadNewEffects(false);
    });

    document.getElementById('PresetSearch').addEventListener('input', function(){
        if (ToggleDelete)
            ToggleDeleteFunc();
        else
            LoadPresetEffects(false);
        
    });
}

function ShakePresetsCustomNav()
{
    var buttonPreset = document.getElementById("ShkPresetsNv");
    var buttonCustom = document.getElementById("ShkCustomNv");

    var CustomShake = document.getElementById("CustomShake");
    var PresetShakes = document.getElementById("PresetShakes");

    var clampShakes = document.getElementById("clampShakes");
    var shake_settings = document.getElementById("shake_settings");

    var currenttab = 1;

    buttonPreset.addEventListener("click", function() {
        if (GlobalsCurrentTab != 3)
            return;

        if (currenttab != 1)
        {
            buttonPreset.classList.remove("eff_active");
            buttonCustom.classList.remove("eff_active");
            buttonPreset.classList.remove("not_eff_active");
            buttonCustom.classList.remove("not_eff_active");

            buttonPreset.classList.add("eff_active");
            buttonCustom.classList.add("not_eff_active");

            clampShakes.style.height = "34.5vh";
            shake_settings.style.display = "inline";

            PresetShakes.style.display = "grid";
            CustomShake.style.display = "none";

            currenttab = 1;
        }
    });

    buttonCustom.addEventListener("click", function() {
        if (GlobalsCurrentTab != 3)
            return;

        if (currenttab != 2)
        {
            buttonPreset.classList.remove("eff_active");
            buttonCustom.classList.remove("eff_active");
            buttonPreset.classList.remove("not_eff_active");
            buttonCustom.classList.remove("not_eff_active");

            buttonPreset.classList.add("not_eff_active");
            buttonCustom.classList.add("eff_active");

            clampShakes.style.height = "65vh";
            shake_settings.style.display = "none";

            PresetShakes.style.display = "none";
            CustomShake.style.display = "grid";

            currenttab = 2;
        }
    });
}

ShakePresetsCustomNav();
EffectTabNav();
NavBar();

// ---------------- P 1000 Performence save -------------------------------- 

function throttle(func, limit) {
    let inThrottle;
    return function() {
        const args = arguments;
        const context = this;
        if (!inThrottle) {
        func.apply(context, args);
        inThrottle = true;
        setTimeout(() => inThrottle = false, limit);
        }
    }
}

function debounce(func, delay) {
    let inDebounce;
    return function() {
        const context = this;
        const args = arguments;
        clearTimeout(inDebounce);
        inDebounce = setTimeout(() => func.apply(context, args), delay);
    }
}

function resetDiv(divId) {
    var div = document.getElementById(divId);
    while (div.firstChild) {
        div.removeChild(div.firstChild);
    }
    div.style.backgroundSize = "contain";
}

function drawCubicBezierVisualizer(divId, x1, y1, x2, y2) {
    var div = document.getElementById(divId);
    var container = document.createElement("div");
    container.style.width = "15vh";
    container.style.position = "absolute";
    div.appendChild(container);
    div.style.backgroundSize = "0px";
    
    var paddingPercentage = 0.175;

    function calculateControlPoints() {
        var width = div.offsetHeight;
        var containerWidth = container.offsetWidth;
        var paddingX = containerWidth * paddingPercentage;
        var paddingY = width * paddingPercentage;
        var ctrlX1 = Math.max(0, Math.min(x1 * (containerWidth - 2 * paddingX) + paddingX, containerWidth - paddingX));
        var ctrlY1 = Math.max(0, Math.min((1 - y1) * (width - 2 * paddingY) + paddingY, width - paddingY));
        var ctrlX2 = Math.max(0, Math.min(x2 * (containerWidth - 2 * paddingX) + paddingX, containerWidth - paddingX));
        var ctrlY2 = Math.max(0, Math.min((1 - y2) * (width - 2 * paddingY) + paddingY, width - paddingY));
        return [ctrlX1, ctrlY1, ctrlX2, ctrlY2];
    }

    var canvas = document.createElement("canvas");
    container.appendChild(canvas);

    function drawCurve() {
        var width = div.offsetHeight;
        var containerWidth = container.offsetWidth;
        var ctx = canvas.getContext("2d");
        var points = calculateControlPoints();
        
        // Set canvas dimensions to match the container
        canvas.width = containerWidth;
        canvas.height = width;
        
        // Clear canvas
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        
        // Draw Bezier curve
        ctx.beginPath();
        ctx.moveTo(paddingPercentage * containerWidth, (1 - paddingPercentage) * width);
        ctx.bezierCurveTo(points[0], points[1], points[2], points[3], (1 - paddingPercentage) * containerWidth, paddingPercentage * width);
        ctx.strokeStyle = "#6644eb";
        ctx.lineWidth = width / 25;
        ctx.stroke();
        
        // Draw control point lines
        ctx.beginPath();
        ctx.moveTo(paddingPercentage * containerWidth, (1 - paddingPercentage) * width);
        ctx.lineTo(points[0], points[1]);
        ctx.strokeStyle = "white";
        ctx.lineWidth = width / 29;
        ctx.stroke();
        
        ctx.beginPath();
        ctx.moveTo((1 - paddingPercentage) * containerWidth, paddingPercentage * width);
        ctx.lineTo(points[2], points[3]);
        ctx.strokeStyle = "white";
        ctx.stroke();
        
        // Draw control point circles
        ctx.beginPath();
        ctx.arc(points[0], points[1], width / 20, 0, Math.PI * 2);
        ctx.fillStyle = "white";
        ctx.fill();
        
        ctx.beginPath();
        ctx.arc(points[2], points[3], width / 20, 0, Math.PI * 2);
        ctx.fillStyle = "white";
        ctx.fill();
    }
    
    drawCurve();
    window.addEventListener('resize', function() {
        drawCurve();
      });

    drawCurve()
}

var hasCopyValue = false;
var copy_x1 = 0, copy_y1 = 0, copy_x2 = 0, copy_y2 = 0;

let drawCurve_live2_Inverval;

var GetARandomCurvePresetV2 = 0;
function LiveDrawCubicBezierVisualizer(divId, x1, y1, x2, y2) {
    var div = document.getElementById(divId);
    var container = document.createElement("div");
    container.style.position = "relative";
    div.appendChild(container);
    div.style.backgroundSize = "0px";

    var paddingPercentage = 0.05;

    function calculateControlPoints() {
        var width = div.offsetHeight;
        var containerWidth = container.offsetWidth;
        var paddingX = containerWidth * paddingPercentage;
        var paddingY = width * paddingPercentage;
        var ctrlX1 = Math.max(0, Math.min(x1 * (containerWidth - 2 * paddingX) + paddingX, containerWidth - paddingX));
        var ctrlY1 = Math.max(0, Math.min((1 - y1) * (width - 2 * paddingY) + paddingY, width - paddingY));
        var ctrlX2 = Math.max(0, Math.min(x2 * (containerWidth - 2 * paddingX) + paddingX, containerWidth - paddingX));
        var ctrlY2 = Math.max(0, Math.min((1 - y2) * (width - 2 * paddingY) + paddingY, width - paddingY));
        return [ctrlX1, ctrlY1, ctrlX2, ctrlY2];
    }

    var canvas = document.createElement("canvas");
    container.appendChild(canvas);

    function drawCurve() {
        var width = div.offsetHeight;
        var containerWidth = container.offsetWidth;
        var ctx = canvas.getContext("2d");
        var points = calculateControlPoints();

        // Set canvas dimensions to match the container
        var paddedContainerWidth = containerWidth * (1 - 2 * paddingPercentage);
        var paddedHeight = width * (1 - 2 * paddingPercentage);
        canvas.width = containerWidth;
        canvas.height = width;

        // Check if the canvas exists
        if (canvas.offsetWidth > 0 && canvas.offsetHeight > 0) {
            ctx.beginPath();
            // Draw vertical grid lines
            for (var x = containerWidth * paddingPercentage; x <= containerWidth * Math.round(1 - paddingPercentage); x += paddedContainerWidth / 4) {
                ctx.moveTo(x, width * paddingPercentage);
                ctx.lineTo(x, width * (1 - paddingPercentage));
            }
            // Draw horizontal grid lines
            for (var y = width * paddingPercentage; y <= width * Math.round(1 - paddingPercentage); y += paddedHeight / 4) {
                ctx.moveTo(containerWidth * paddingPercentage, y);
                ctx.lineTo(containerWidth * (1 - paddingPercentage), y);
            }
            ctx.strokeStyle = "rgba(255, 255, 255, 0.3)";
            ctx.lineWidth = div.offsetHeight * 0.005;
            ctx.stroke();
        }
  
        // Draw Bezier curve
        ctx.beginPath();
        ctx.moveTo(paddingPercentage * containerWidth, (1 - paddingPercentage) * width);
        ctx.bezierCurveTo(points[0], points[1], points[2], points[3], (1 - paddingPercentage) * containerWidth, paddingPercentage * width);
        ctx.strokeStyle = "white";
        ctx.lineWidth = width / 60;
        ctx.stroke();

        // Draw control point lines
        ctx.beginPath();
        ctx.moveTo(paddingPercentage * containerWidth, (1 - paddingPercentage) * width);
        ctx.lineTo(points[0], points[1]);
        ctx.strokeStyle = "#6644eb";
        ctx.lineWidth = width / 50;
        ctx.stroke();

        ctx.beginPath();
        ctx.moveTo((1 - paddingPercentage) * containerWidth, paddingPercentage * width);
        ctx.lineTo(points[2], points[3]);
        ctx.strokeStyle = "#6644eb";
        ctx.stroke();

        // Draw control point circles
        ctx.beginPath();
        ctx.arc(points[0], points[1], width / 30, 0, Math.PI * 2);
        ctx.fillStyle = "#6644eb";
        ctx.fill();

        ctx.beginPath();
        ctx.arc(points[2], points[3], width / 30, 0, Math.PI * 2);
        ctx.fillStyle = "#6644eb";
        ctx.fill();
    }
    drawCurve();

    window.addEventListener('resize', function() {
        drawCurve();
    });

    drawCurve_live2_Inverval = setInterval(drawCurve, 1);

    var draggingControlPoint = null;

    function getScaleFactor(element) {
        const style = window.getComputedStyle(element);
        const transform = style.transform || style.webkitTransform || style.mozTransform;
        const matrix = transform.match(/^matrix\((.+)\)$/);
        return matrix ? parseFloat(matrix[1].split(', ')[0]) : 1;
    }

    function getMousePos(canvas, evt) {
        var rect = canvas.getBoundingClientRect();
        var create_curve = document.getElementById("create_curve");
        var scaleFactor = getScaleFactor(create_curve);
        return {
            x: (evt.clientX - rect.left) / scaleFactor,
            y: (evt.clientY - rect.top) / scaleFactor
        };
    }
    
    canvas.addEventListener("mousedown", function(evt) {
        var mousePos = getMousePos(canvas, evt);
        var width = div.offsetHeight;
        var points = calculateControlPoints();
        div.style.cursor = "pointer";

        if (Math.sqrt(Math.pow(mousePos.x - points[0], 2) + Math.pow(mousePos.y - points[1], 2)) <= width / 20) {
            draggingControlPoint = 1;
        } else if (Math.sqrt(Math.pow(mousePos.x - points[2], 2) + Math.pow(mousePos.y - points[3], 2)) <= width / 20) {
            draggingControlPoint = 2;
        }
        drawCurve();
    });

    var old_val = document.getElementById("Curve_Val").value;
    
    window.addEventListener("mousemove", function(evt) {
        if (GlobalsCurrentTab != 1) return;
        if (draggingControlPoint !== null) {
            document.body.style.userSelect = "none";
            var mousePos = getMousePos(canvas, evt);
            var width = div.offsetHeight;
            var containerWidth = container.offsetWidth;
            var paddingX = containerWidth * paddingPercentage;
            var paddingY = width * paddingPercentage;
            
            switch (draggingControlPoint)
            {
                case 1:
                {
                    setNewX1 = x1 = Math.max(0, Math.min((mousePos.x - paddingX) / (containerWidth - 2 * paddingX), 1));
                    setNewY1 = y1 = Math.max(0, Math.min(1 - (mousePos.y - paddingY) / (width - 2 * paddingY), 1));
                    if (old_val != Number(setNewX1).toFixed(2) + ", " + Number(setNewY1).toFixed(2) + ", " + Number(setNewX2).toFixed(2) + ", " + Number(setNewY2).toFixed(2))
                        document.getElementById("Curve_Val").value = Number(setNewX1).toFixed(2) + ", " + Number(setNewY1).toFixed(2) + ", " + Number(setNewX2).toFixed(2) + ", " + Number(setNewY2).toFixed(2);
                }
                break;
                case 2:
                {
                    setNewX2 = x2 = Math.max(0, Math.min((mousePos.x - paddingX) / (containerWidth - 2 * paddingX), 1));
                    setNewY2 = y2 = Math.max(0, Math.min(1 - (mousePos.y - paddingY) / (width - 2 * paddingY), 1));
                    if (old_val != Number(setNewX1).toFixed(2) + ", " + Number(setNewY1).toFixed(2) + ", " + Number(setNewX2).toFixed(2) + ", " + Number(setNewY2).toFixed(2))
                        document.getElementById("Curve_Val").value = Number(setNewX1).toFixed(2) + ", " + Number(setNewY1).toFixed(2) + ", " + Number(setNewX2).toFixed(2) + ", " + Number(setNewY2).toFixed(2);
                }
                break;
            }

            drawCurve();
        }
    });

    window.addEventListener("mouseup", function() {
        if (GlobalsCurrentTab != 1) return;
        document.body.style.userSelect = "";
        draggingControlPoint = null;
        div.style.cursor = "default";
    });

    var CopyButton = document.getElementById("CopyCurve");
    var PasteButton = document.getElementById("PasteCurve");

    CopyButton.addEventListener("click", function(){
        if (GlobalsCurrentTab != 1) return;
        copy_x1 = x1;
        copy_y1 = y1;
        copy_x2 = x2;
        copy_y2 = y2;
        if (!hasCopyValue) hasCopyValue = true;
        SendNotification("Curve Copied!");
    });

    PasteButton.addEventListener("click", function(){
        if (GlobalsCurrentTab != 1) return;
        if (!hasCopyValue) {
            SendNotification("No Curve Copied!", true, false);
            return;
        }
        setNewX1 = x1 = copy_x1;
        setNewY1 = y1 = copy_y1;
        setNewX2 = x2 = copy_x2;
        setNewY2 = y2 = copy_y2;
        document.getElementById("Curve_Val").value = Number(setNewX1).toFixed(2) + ", " + Number(setNewY1).toFixed(2) + ", " + Number(setNewX2).toFixed(2) + ", " + Number(setNewY2).toFixed(2);
        SendNotification("Curve Pasted!");
    });

    /*
    ButtomRandom.addEventListener("click", function() {
        if (GlobalsCurrentTab != 1) return;
        
        setNewX1 = x1 = Math.random(0, 0.5);
        setNewY1 = y1 = Math.random(0, 0.5);
        setNewX2 = x2 = Math.random(0.5, 1);
        setNewY2 = y2 = Math.random(0.5, 1);

        document.getElementById("Curve_Val").value = Number(setNewX1).toFixed(2) + ", " + Number(setNewY1).toFixed(2) + ", " + Number(setNewX2).toFixed(2) + ", " + Number(setNewY2).toFixed(2);
    });
    */

    if (old_val != Number(setNewX1).toFixed(2) + ", " + Number(setNewY1).toFixed(2) + ", " + Number(setNewX2).toFixed(2) + ", " + Number(setNewY2).toFixed(2))
        document.getElementById("Curve_Val").value = Number(setNewX1).toFixed(2) + ", " + Number(setNewY1).toFixed(2) + ", " + Number(setNewX2).toFixed(2) + ", " + Number(setNewY2).toFixed(2);
}

var L_setNewX1 = 0.2;
var L_setNewY1 = 0.8;
var L_setNewX2 = 0.8;
var L_setNewY2 = 0.2;

let drawCurve_live_Inverval;

function LiveDrawCubicBezierVisualizerForLiveCurve(divId, x1, y1, x2, y2) {
    var div = document.getElementById(divId);
    var container = document.createElement("div");
    container.style.position = "relative";
    div.appendChild(container);
    div.style.backgroundSize = "0px";

    var paddingPercentage = 0.05;

    function calculateControlPoints() {
        var width = div.offsetHeight;
        var containerWidth = container.offsetWidth;
        var paddingX = containerWidth * paddingPercentage;
        var paddingY = width * paddingPercentage;
        var ctrlX1 = Math.max(0, Math.min(x1 * (containerWidth - 2 * paddingX) + paddingX, containerWidth - paddingX));
        var ctrlY1 = Math.max(0, Math.min((1 - y1) * (width - 2 * paddingY) + paddingY, width - paddingY));
        var ctrlX2 = Math.max(0, Math.min(x2 * (containerWidth - 2 * paddingX) + paddingX, containerWidth - paddingX));
        var ctrlY2 = Math.max(0, Math.min((1 - y2) * (width - 2 * paddingY) + paddingY, width - paddingY));
        return [ctrlX1, ctrlY1, ctrlX2, ctrlY2];
    }

    var canvas = document.createElement("canvas");
    container.appendChild(canvas);

    function drawCurve() {
        var width = div.offsetHeight;
        var containerWidth = container.offsetWidth;
        var ctx = canvas.getContext("2d");
        var points = calculateControlPoints();

        // Set canvas dimensions to match the container
        var paddedContainerWidth = containerWidth * (1 - 2 * paddingPercentage);
        var paddedHeight = width * (1 - 2 * paddingPercentage);
        canvas.width = containerWidth;
        canvas.height = width;

        // Check if the canvas exists
        if (canvas.offsetWidth > 0 && canvas.offsetHeight > 0) {
            ctx.beginPath();
            // Draw vertical grid lines
            for (var x = containerWidth * paddingPercentage; x <= containerWidth * Math.round(1 - paddingPercentage); x += paddedContainerWidth / 4) {
                ctx.moveTo(x, width * paddingPercentage);
                ctx.lineTo(x, width * (1 - paddingPercentage));
            }
            // Draw horizontal grid lines
            for (var y = width * paddingPercentage; y <= width * Math.round(1 - paddingPercentage); y += paddedHeight / 4) {
                ctx.moveTo(containerWidth * paddingPercentage, y);
                ctx.lineTo(containerWidth * (1 - paddingPercentage), y);
            }
            ctx.strokeStyle = "rgba(255, 255, 255, 0.3)";
            ctx.lineWidth = div.offsetHeight * 0.005;
            ctx.stroke();
        }
  
        // Draw Bezier curve
        ctx.beginPath();
        ctx.moveTo(paddingPercentage * containerWidth, (1 - paddingPercentage) * width);
        ctx.bezierCurveTo(points[0], points[1], points[2], points[3], (1 - paddingPercentage) * containerWidth, paddingPercentage * width);
        ctx.strokeStyle = "white";
        ctx.lineWidth = width / 80;
        ctx.stroke();

        // Draw control point lines
        ctx.beginPath();
        ctx.moveTo(paddingPercentage * containerWidth, (1 - paddingPercentage) * width);
        ctx.lineTo(points[0], points[1]);
        ctx.strokeStyle = "#6644eb";
        ctx.lineWidth = width / 55;
        ctx.stroke();

        ctx.beginPath();
        ctx.moveTo((1 - paddingPercentage) * containerWidth, paddingPercentage * width);
        ctx.lineTo(points[2], points[3]);
        ctx.strokeStyle = "#6644eb";
        ctx.stroke();

        // Draw control point circles
        ctx.beginPath();
        ctx.arc(points[0], points[1], width / 40, 0, Math.PI * 2);
        ctx.fillStyle = "#6644eb";
        ctx.fill();

        ctx.beginPath();
        ctx.arc(points[2], points[3], width / 40, 0, Math.PI * 2);
        ctx.fillStyle = "#6644eb";
        ctx.fill();
    }

    drawCurve();
    window.addEventListener('resize', function() {
        drawCurve();
    });

    drawCurve_live_Inverval = setInterval(drawCurve, 1);

    var draggingControlPoint = null;

    function getScaleFactor(element) {
        const style = window.getComputedStyle(element);
        const transform = style.transform || style.webkitTransform || style.mozTransform;
        const matrix = transform.match(/^matrix\((.+)\)$/);
        return matrix ? parseFloat(matrix[1].split(', ')[0]) : 1;
    }

    function getMousePos(canvas, evt) {
        var rect = canvas.getBoundingClientRect();
        var create_curve = document.getElementById("create_curve");
        var scaleFactor = getScaleFactor(create_curve);
        return {
            x: (evt.clientX - rect.left) / scaleFactor,
            y: (evt.clientY - rect.top) / scaleFactor
        };
    }
    
    canvas.addEventListener("mousedown", function(evt) {
        var mousePos = getMousePos(canvas, evt);
        var width = div.offsetHeight;
        var points = calculateControlPoints();
        div.style.cursor = "pointer";

        if (Math.sqrt(Math.pow(mousePos.x - points[0], 2) + Math.pow(mousePos.y - points[1], 2)) <= width / 20) {
            draggingControlPoint = 1;
        } else if (Math.sqrt(Math.pow(mousePos.x - points[2], 2) + Math.pow(mousePos.y - points[3], 2)) <= width / 20) {
            draggingControlPoint = 2;
        }
        drawCurve();
    });

    var old_val = document.getElementById("Curve_Val").value;
    
    window.addEventListener("mousemove", function(evt) {
        if (draggingControlPoint !== null) {
            document.body.style.userSelect = "none";
            var mousePos = getMousePos(canvas, evt);
            var width = div.offsetHeight;
            var containerWidth = container.offsetWidth;
            var paddingX = containerWidth * paddingPercentage;
            var paddingY = width * paddingPercentage;
            
            switch (draggingControlPoint)
            {
                case 1:
                {
                    L_setNewX1 = x1 = Math.max(0, Math.min((mousePos.x - paddingX) / (containerWidth - 2 * paddingX), 1));
                    L_setNewY1 = y1 = Math.max(0, Math.min(1 - (mousePos.y - paddingY) / (width - 2 * paddingY), 1));
                    if (old_val != Number(L_setNewX1).toFixed(2) + ", " + Number(L_setNewY1).toFixed(2) + ", " + Number(L_setNewX2).toFixed(2) + ", " + Number(L_setNewY2).toFixed(2))
                        document.getElementById("Curve_Val_live").value = Number(L_setNewX1).toFixed(2) + " | " + Number(L_setNewY1).toFixed(2) + " | " + Number(L_setNewX2).toFixed(2) + " | " + Number(L_setNewY2).toFixed(2);
                }
                break;
                case 2:
                {
                    L_setNewX2 = x2 = Math.max(0, Math.min((mousePos.x - paddingX) / (containerWidth - 2 * paddingX), 1));
                    L_setNewY2 = y2 = Math.max(0, Math.min(1 - (mousePos.y - paddingY) / (width - 2 * paddingY), 1));
                    if (old_val != Number(L_setNewX1).toFixed(2) + ", " + Number(L_setNewY1).toFixed(2) + ", " + Number(L_setNewX2).toFixed(2) + ", " + Number(L_setNewY2).toFixed(2))
                        document.getElementById("Curve_Val_live").value = Number(L_setNewX1).toFixed(2) + " | " + Number(L_setNewY1).toFixed(2) + " | " + Number(L_setNewX2).toFixed(2) + " | " + Number(L_setNewY2).toFixed(2);
                }
                break;
            }

            drawCurve();
        }
    });

    window.addEventListener("mouseup", function() {
        document.body.style.userSelect = "";
        draggingControlPoint = null;
        div.style.cursor = "default";
    });

    var CopyButton = document.getElementById("CopyCurve_live");
    var PasteButton = document.getElementById("PasteCurve_live");

    CopyButton.addEventListener("click", function(){
        if (GlobalsCurrentTab != 1) return;
        copy_x1 = x1;
        copy_y1 = y1;
        copy_x2 = x2;
        copy_y2 = y2;
        if (!hasCopyValue) hasCopyValue = true;
        SendNotification("Curve Copied!");
    });

    PasteButton.addEventListener("click", function(){
        if (GlobalsCurrentTab != 1) return;
        if (!hasCopyValue) {
            SendNotification("No Curve Copied!", true, false);
            return;
        }
        L_setNewX1 = x1 = copy_x1;
        L_setNewY1 = y1 = copy_y1;
        L_setNewX2 = x2 = copy_x2;
        L_setNewY2 = y2 = copy_y2;
        document.getElementById("Curve_Val_live").value = Number(L_setNewY1).toFixed(2) + ", " + Number(L_setNewX2).toFixed(2) + ", " + Number(L_setNewY2).toFixed(2) + ", " + Number(L_setNewY2).toFixed(2);
        SendNotification("Curve Pasted!");
    });


    if (old_val != Number(L_setNewX1).toFixed(2) + ", " + Number(L_setNewY1).toFixed(2) + ", " + Number(L_setNewX2).toFixed(2) + ", " + Number(L_setNewY2).toFixed(2))
        document.getElementById("Curve_Val_live").value = Number(L_setNewX1).toFixed(2) + ", " + Number(L_setNewY1).toFixed(2) + ", " + Number(L_setNewX2).toFixed(2) + ", " + Number(L_setNewY2).toFixed(2);
}

function returnToOrigPos()
{
    var tab1 = document.getElementById("tab_1");
    var set_custom_curveTab = document.getElementById("create_curve");

    tab1.style.transition = margin_time_min + ", " + opacity_time + ", " + top_time_min;
    tab1.style.zIndex = "1";
    tab1.style.marginTop = "-10vh";

    curveWrapper.style.transform = "scale(0.6)";
    curveWrapper.style.transition = "transform " + Math.round(settingsData[0].ui_animation_speed) + "ms cubic-bezier(.61,-0.01,1,.45)";

    set_custom_curveTab.style.transition = margin_time_min + ", " + opacity_time;
    set_custom_curveTab.style.opacity = "0%";
    set_custom_curveTab.style.zIndex = "0";
}

// ------------------ End Settings -----------------------------------------------

var GetARandomCurvePreset = 0;
function CheckForButtonPress()
{
    var interfaceEntrypoint = new CSInterface();
    createFileWithArray((err, dataArray) => {
        if (err) {
            interfaceEntrypoint.evalScript(`SendJSX_SCRIPT_ALERT_ERROR("${err}")`);
                return;
        }

        var tab1 = document.getElementById("tab_1");
        var ButtonRemove = document.getElementById("Curve_Remove");
        var ButtonGoBack = document.getElementById("Curve_GoBack");
        var ButtonApply = document.getElementById("Curve_Apply");

        var set_custom_curveTab = document.getElementById("create_curve");
        var curveWrapper = document.getElementById("curveWrapper");

        var curveButton = document.getElementById("tabButton1");
        var mainButton = document.getElementById("tabButton2");
        var effectButton = document.getElementById("tabButton3");
        var settingsButton = document.getElementById("tabButton4");
        
        var loadedButtonIndex = 0;
        var getbuttonname = "";
        var is_in_setting_mode = false;

        for (var i = 1; i < 21; i++) {
            (function() {
                var button_text = "custom_" + i;
                var index = i;
                var getcurbutton = document.getElementById(button_text);
                getcurbutton.addEventListener("click", function() 
                {
                    if (GlobalsCurrentTab != 1) return;
                    if (document.getElementById("create_curve").style.opacity === '1')
                        return;

                    if (!dataArray[index].active)
                    {
                        is_in_setting_mode = true;
                        
                        set_custom_curveTab.style.transition = margin_time_min + ", " + opacity_time;
                        set_custom_curveTab.style.marginTop = "10vh";
                        set_custom_curveTab.style.opacity = "100%";
                        set_custom_curveTab.style.zIndex = "11111111";
                        
                        curveWrapper.style.transform = "scale(1)";
                        curveWrapper.style.transition = "transform " + Math.round(settingsData[0].ui_animation_speed) + "ms cubic-bezier(0,.68,.39,1)";

                        tab1.style.transition = margin_time_min + ", " + opacity_time + ", " + top_time_min;
                        tab1.style.opacity = "0%";
                        tab1.style.z = "0";
                        tab1.style.marginTop = "0vh";


                        loadedButtonIndex = index;
                        getbuttonname = button_text;
                        document.getElementById("Curve_Name").value = "";

                        switch (GetARandomCurvePreset)
                        {
                            case 0: setNewX1 = 0.5; setNewY1 = 0; setNewX2 = 0.5; setNewY2 = 1; break;
                            case 1: setNewX1 = 0; setNewY1 = 0; setNewX2 = 0; setNewY2 = 1; break;
                            case 2: setNewX1 = 1; setNewY1 = 0; setNewX2 = 1; setNewY2 = 1; break;
                            case 3: setNewX1 = 0.2; setNewY1 = 0.8; setNewX2 = 0.8; setNewY2 = 0.2; break;
                            case 4: setNewX1 = 0; setNewY1 = 0; setNewX2 = 1; setNewY2 = 1; break;
                        }

                        if (GetARandomCurvePreset > 3) GetARandomCurvePreset = 0;
                        else GetARandomCurvePreset++;

                        document.getElementById("Curve_Val").value = Number(setNewX1).toFixed(2) + ", " + Number(setNewY1).toFixed(2) + ", " + Number(setNewX2).toFixed(2) + ", " + Number(setNewY2).toFixed(2);

                        resetDiv("CurvePreview");
                        LiveDrawCubicBezierVisualizer("CurvePreview", setNewX1, setNewY1, setNewX2, setNewY2);
                    }
                    else
                    {
                        loadedButtonIndex = index;
                        interfaceEntrypoint.evalScript(`ApplyCurveToKeyFramesJerryFlow(
                            "${dataArray[loadedButtonIndex].x1}", "${dataArray[loadedButtonIndex].y1}",
                            "${dataArray[loadedButtonIndex].x2}", "${dataArray[loadedButtonIndex].y2}")`);
                    }
                });
                
                getcurbutton.addEventListener("contextmenu", function() 
                {
                    if (GlobalsCurrentTab != 1) return;
                    if (document.getElementById("create_curve").style.opacity === '1')
                        return;
                    if (dataArray[index].active)
                    {
                        is_editing_the_graph = true;
                        is_in_setting_mode = true;
                        
                        set_custom_curveTab.style.transition = margin_time_min + ", " + opacity_time;
                        set_custom_curveTab.style.marginTop = "10vh";
                        set_custom_curveTab.style.opacity = "100%";
                        set_custom_curveTab.style.zIndex = "11111111";

                        curveWrapper.style.transform = "scale(1)";
                        curveWrapper.style.transition = "transform " + Math.round(settingsData[0].ui_animation_speed) + "ms cubic-bezier(0,.68,.39,1)";

                        tab1.style.transition = margin_time_min + ", " + opacity_time + ", " + top_time_min;
                        tab1.style.opacity = "0%";
                        tab1.style.z = "0";
                        tab1.style.marginTop = "0vh";

                        loadedButtonIndex = index;
                        getbuttonname = button_text;

                        setNewX1 = dataArray[loadedButtonIndex].x1;
                        setNewY1 = dataArray[loadedButtonIndex].y1;
                        setNewX2 = dataArray[loadedButtonIndex].x2;
                        setNewY2 = dataArray[loadedButtonIndex].y2;
                        
                        if (dataArray[loadedButtonIndex].name == undefined) 
                        {
                            dataArray[loadedButtonIndex].name = "";
                            document.getElementById("Curve_Name").value = "";
                        }
                        else
                            document.getElementById("Curve_Name").value = dataArray[loadedButtonIndex].name;

                        resetDiv("CurvePreview");
                        LiveDrawCubicBezierVisualizer("CurvePreview", setNewX1, setNewY1, setNewX2, setNewY2);
                    }
                });
            })();
        }
        
        LiveDrawCubicBezierVisualizer("CurvePreview", setNewX1, setNewY1, setNewX2, setNewY2);

        ButtonRemove.addEventListener("click", function() {
            if (GlobalsCurrentTab != 1) return;
            dataArray[loadedButtonIndex].active = false;
            dataArray[loadedButtonIndex].x1 = 0;
            dataArray[loadedButtonIndex].y1 = 0;
            dataArray[loadedButtonIndex].x2 = 1;
            dataArray[loadedButtonIndex].y2 = 1;
            dataArray[loadedButtonIndex].name = "";

            resetDiv(getbuttonname);
            document.getElementById(getbuttonname).textContent = "Add Custom";
            saveChangesToFile(dataArray);
            SendNotification("Curve Removed!", true, false);
            is_editing_the_graph = false;            
        });

        ButtonApply.addEventListener("click", function() {
            if (GlobalsCurrentTab != 1) return;
            dataArray[loadedButtonIndex].active = true;
            dataArray[loadedButtonIndex].x1 = Number(setNewX1).toFixed(2);
            dataArray[loadedButtonIndex].y1 = Number(setNewY1).toFixed(2);
            dataArray[loadedButtonIndex].x2 = Number(setNewX2).toFixed(2);
            dataArray[loadedButtonIndex].y2 = Number(setNewY2).toFixed(2);
            dataArray[loadedButtonIndex].name = document.getElementById("Curve_Name").value;
            
            resetDiv(getbuttonname);

            var currButtonTxT = document.getElementById("Curve_Name").value + "";
            var NewString = "";
            
            for (var k = 0; k < currButtonTxT.length; k++) {
                var is_long = currButtonTxT[k] == "W" || currButtonTxT[k] == "M" || currButtonTxT[k] == "O" || currButtonTxT[k] == "G" || currButtonTxT[k] == "H";
                var numBL = is_long ? 8 : 10;
                if (k < numBL)
                {
                    if (k == 0)
                        NewString += currButtonTxT[k].toLocaleUpperCase();
                    else
                        NewString += currButtonTxT[k].toLocaleLowerCase();
                }
                else if (k == 11 || k == 12)
                    NewString += ".";
                else
                    continue;
            }
            
            document.getElementById(getbuttonname).textContent = NewString;

            drawCubicBezierVisualizer(
                getbuttonname, 
                dataArray[loadedButtonIndex].x1, 
                dataArray[loadedButtonIndex].y1, 
                dataArray[loadedButtonIndex].x2, 
                dataArray[loadedButtonIndex].y2);
            saveChangesToFile(dataArray);
            SendNotification("Curve Saved!");
            is_editing_the_graph = false;
        });

        ButtonRemove.addEventListener("click", function() { if (GlobalsCurrentTab != 1) return; returnToOrigPos(); tab1.style.opacity = "100%"; tab1.style.marginTop = "-10vh"; });
        ButtonGoBack.addEventListener("click", function() { if (GlobalsCurrentTab != 1) return; returnToOrigPos(); 
            setNewX1 = -1; setNewY1 = -1; setNewX2 = -1; setNewY2 = -1; tab1.style.opacity = "100%"; tab1.style.marginTop = "-10vh"; });
        ButtonApply.addEventListener("click", function() { if (GlobalsCurrentTab != 1) return; returnToOrigPos(); tab1.style.opacity = "100%"; tab1.style.marginTop = "-10vh"; });
        
        mainButton.addEventListener("click", function() { if (GlobalsCurrentTab != 2) return; returnToOrigPos(); newTabAnims(2); });
        effectButton.addEventListener("click", function() { if (GlobalsCurrentTab != 3) return; returnToOrigPos(); newTabAnims(3); });
        settingsButton.addEventListener("click", function() { if (GlobalsCurrentTab != 4) return; returnToOrigPos(); newTabAnims(4); });
        
        curveButton.addEventListener("click", function() { if (GlobalsCurrentTab != 1) return; returnToOrigPos(); newTabAnims(1); });
        curveButton.addEventListener("contextmenu", function() { if (GlobalsCurrentTab != 1) return; returnToOrigPos(); newTabAnims(1); });
        
        window.addEventListener('resize', function(){
            set_custom_curveTab.style.transition = "none";
        });
    });
}

function LiveCurveStuff()
{
    var interfaceEntrypoint = new CSInterface();
    var x1 = 0.20, y1 = 0.80, x2 = 0.80, y2 = 0.20;
    LiveDrawCubicBezierVisualizerForLiveCurve("CurvePreview_Live", x1, y1, x2, y2);

    document.getElementById("Apply_LiveCurve").addEventListener("click", function() { 
        if (GlobalsCurrentTab != 1) return;
        interfaceEntrypoint.evalScript(`ApplyCurveToKeyFramesJerryFlow(
            "${L_setNewX1}", 
            "${L_setNewY1}",
            "${L_setNewX2}", 
            "${L_setNewY2}")`);
    });
}

function PresetsButtons()
{
    var interfaceEntrypoint = new CSInterface();

    var Preset1 = document.getElementById("CUR_In_Preset");
    var Preset2 = document.getElementById("CUR_Out_Preset");
    var Preset3 = document.getElementById("CUR_SpeedRamp_Preset");
    var Preset4 = document.getElementById("CUR_S_Preset");
    var None = document.getElementById("CUR_Reset");

    Preset1.addEventListener("click", function() { if (GlobalsCurrentTab != 1) return; if (document.getElementById("create_curve").style.opacity === '1') return; interfaceEntrypoint.evalScript(`ApplyCurveToKeyFramesJerryFlow(0, 0.0, 0, 1)`); });
    Preset2.addEventListener("click", function() { if (GlobalsCurrentTab != 1) return; if (document.getElementById("create_curve").style.opacity === '1') return; interfaceEntrypoint.evalScript(`ApplyCurveToKeyFramesJerryFlow(1, 0, 1, 1)`); });
    Preset3.addEventListener("click", function() { if (GlobalsCurrentTab != 1) return; if (document.getElementById("create_curve").style.opacity === '1') return; interfaceEntrypoint.evalScript(`ApplyCurveToKeyFramesJerryFlow(0.22, 0.85, 0.79, 0.19)`); });
    Preset4.addEventListener("click", function() { if (GlobalsCurrentTab != 1) return; if (document.getElementById("create_curve").style.opacity === '1') return; interfaceEntrypoint.evalScript(`ApplyCurveToKeyFramesJerryFlow(0.6, 0, 0.3, 1)`); });
    None.addEventListener("click", function() { if (GlobalsCurrentTab != 1) return; if (document.getElementById("create_curve").style.opacity === '1') return; interfaceEntrypoint.evalScript(`ApplyCurveToKeyFramesJerryFlow(0, 0, 1, 1)`); });
}



function LoadMiscFeatures() {
    var interfaceEntrypoint = new CSInterface();

    const actionMap = {
        "FlipOnAxisX": `FlipAxis(1)`,
        "FlipOnAxisY": `FlipAxis(2)`,
        "SpeedTo_100": `SpeedChangeTo(100)`,
        "SpeedTo_75": `SpeedChangeTo(150)`,
        "SpeedTo_50": `SpeedChangeTo(200)`,
        "SpeedTo_25": `SpeedChangeTo(250)`,
        "ReverseSpeed": `ReverseLayer()`,
        "SpeedTo_150": `SpeedChangeTo(66)`,
        "SpeedTo_300": `SpeedChangeTo(33)`,
        "SpeedTo_500": `SpeedChangeTo(20)`,
        "CompTime_In": `SetLayerTimeToStart()`,
        "CompTime_Out": `SetLayerTimeToEnd()`,
        "scale_to_comp1": `scaleCompToOneToOne()`,
        "scale_to_comp2": `scaleCompToOneToTwo()`,
        "scale_to_comp4": `scaleCompToOneToFour()`,
        "scale_to_compO": `scaleCompToOriginal()`,
        "Enable_FrameBlending": `EnableFrameBlendingFunc()`,
        "Disbale_FrameBlending": `DisableFrameBlendingFunc()`,
        "Toggle_CrossHair": `ToggleCrossHair()`
        //"DebugThings": `NiggerDebuggerConectionYesYes()`
    };
    
    const addEvalScriptListener = (elementId, script) => {
        //
        const element = document.getElementById(elementId);
        if (element) {
            element.addEventListener("click", function(){
                if (GlobalsCurrentTab != 2) return;
                interfaceEntrypoint.evalScript(script);
            });
        } else {
            interfaceEntrypoint.evalScript(`SendJSX_SCRIPT_ALERT_ERROR("${elementId}")`);
        }
    };

    Object.entries(actionMap).forEach(([elementId, script]) => addEvalScriptListener(elementId, script));
    
    document.getElementById("PreCompButton").addEventListener("click", function() {
        if (GlobalsCurrentTab != 2) return;
        interfaceEntrypoint.evalScript(`DoAPrecomp("${settingsData[0].color_precomp}", "${settingsData[0].general_precomp}")`); 
    });

    document.getElementById("AdjustmentLayer").addEventListener("click", function() { 
        if (GlobalsCurrentTab != 2) return;
        interfaceEntrypoint.evalScript(`AddAdjustmentLayer("${settingsData[0].color_ajust}", "${settingsData[0].general_adjust}")`);
    });
    
    document.getElementById("CreateSolid").addEventListener("click", function() { 
        if (GlobalsCurrentTab != 2) return;
        interfaceEntrypoint.evalScript(`AddASolid("${settingsData[0].color_ajust}")`);
    });
    
    document.getElementById("CreateTxT").addEventListener("click", function() { 
        if (GlobalsCurrentTab != 2) return;
        interfaceEntrypoint.evalScript(`AddTextLayer("${settingsData[0].color_ajust}")`);
    });
    
    document.getElementById("CreateCam").addEventListener("click", function() { 
        if (GlobalsCurrentTab != 2) return;
        interfaceEntrypoint.evalScript(`AddCameraLayer("${settingsData[0].color_ajust}")`);
    });
    
    document.getElementById("CreateNull").addEventListener("click", function() { 
        if (GlobalsCurrentTab != 2) return;
        interfaceEntrypoint.evalScript(`AddNullLayer("${settingsData[0].color_ajust}")`);
    });
    
    document.getElementById("Rotate_minus").addEventListener("click", function() { if (GlobalsCurrentTab != 2) return; interfaceEntrypoint.evalScript(`RollMinus("${settingsData[0].transform_rotate}")`); });
    document.getElementById("Rotate_plus").addEventListener("click", function() { if (GlobalsCurrentTab != 2) return; interfaceEntrypoint.evalScript(`RollPlus("${settingsData[0].transform_rotate}")`); });

    document.getElementById("AudioMakerAssist").addEventListener("click", function() { if (GlobalsCurrentTab != 2) return; interfaceEntrypoint.evalScript(`DoAudioMarkers("${settingsData[0].audiomarkerassist}"," ${settingsData[0].audiomarkerassist2}")`); });

    document.getElementById("FlashEffect").addEventListener("click", function() {
        if (GlobalsCurrentTab != 3) return; if (GlobalsEffectCurrentTab != 1) return;
        var pass_bool_1 = settingsData[0].effset_fl_createt ? 1 : 0;
        var pass_bool_2 = settingsData[0].effset_fl_blendmode ? 1 : 0;
        interfaceEntrypoint.evalScript(`AddFlash("${pass_bool_1}", "${settingsData[0].effset_fl_duration}", "${settingsData[0].effset_fl_strength}", "${settingsData[0].color_flash}", "${pass_bool_2}")`);
    });

    document.getElementById("WarpStabilizerEffect").addEventListener("click", function() {
        if (GlobalsCurrentTab != 3) return; if (GlobalsEffectCurrentTab != 1) return;
        var pass_bool_1 = settingsData[0].effset_ws_detail ? 1 : 0;
        interfaceEntrypoint.evalScript(`CreateWarpStable("${settingsData[0].color_precomp}", "${pass_bool_1}", "${settingsData[0].effset_ws_smooth}", "${settingsData[0].effset_ws_method}")`);
    });

    document.getElementById("CameraTrackerEffect").addEventListener("click", function() {
        if (GlobalsCurrentTab != 3) return; if (GlobalsEffectCurrentTab != 1) return;
        var pass_bool_1 = settingsData[0].effset_ct_detail ? 1 : 0;
        interfaceEntrypoint.evalScript(`CreateCameraTracker("${settingsData[0].color_precomp}", "${pass_bool_1}", "${settingsData[0].effset_ct_points}")`);
    });

    document.getElementById("ForceMotionEffect").addEventListener("click", function() {
        if (GlobalsCurrentTab != 3) return; if (GlobalsEffectCurrentTab != 1) return;
        interfaceEntrypoint.evalScript(`CreateForceMotionBlur("${settingsData[0].color_ajust}", "${settingsData[0].effset_mb_points}")`);
    });

    // Easy Effects

    document.getElementById("OneFrameGlitchEffect").addEventListener("click", function() { if (GlobalsCurrentTab != 3) return; if (GlobalsEffectCurrentTab != 1) return; interfaceEntrypoint.evalScript(`OneFrameGltich("${settingsData[0].color_ajust}")`); });
    document.getElementById("OneFrameInvertOffset").addEventListener("click", function() { if (GlobalsCurrentTab != 3) return; if (GlobalsEffectCurrentTab != 1) return; interfaceEntrypoint.evalScript(`OneFrameInverOffset("${settingsData[0].color_ajust}")`); });
    
    // Transitions

    document.getElementById("WarpInEffect").addEventListener("click", function() { if (GlobalsCurrentTab != 3) return; if (GlobalsEffectCurrentTab != 1) return; interfaceEntrypoint.evalScript(`WarpIn("${settingsData[0].color_ajust}", "${settingsData[0].effset_ts_Wlengh}")`); });
    document.getElementById("WarpOutEffect").addEventListener("click", function() { if (GlobalsCurrentTab != 3) return; if (GlobalsEffectCurrentTab != 1) return; interfaceEntrypoint.evalScript(`WarpOut("${settingsData[0].color_ajust}", "${settingsData[0].effset_ts_Wlengh}")`); });

    document.getElementById("TimeWOutEffect").addEventListener("click", function() { if (GlobalsCurrentTab != 3) return; if (GlobalsEffectCurrentTab != 1) return; interfaceEntrypoint.evalScript(`TimeWarpIn("${settingsData[0].color_ajust}", "${settingsData[0].effset_ts_TWlengh}")`); });
    document.getElementById("TimeWInEffect").addEventListener("click", function() { if (GlobalsCurrentTab != 3) return; if (GlobalsEffectCurrentTab != 1) return; interfaceEntrypoint.evalScript(`TimeWarpOut("${settingsData[0].color_ajust}", "${settingsData[0].effset_ts_TWlengh}")`); });

    document.getElementById("TimeDInEffect").addEventListener("click", function() { if (GlobalsCurrentTab != 3) return; if (GlobalsEffectCurrentTab != 1) return; interfaceEntrypoint.evalScript(`TimeDisplacementOut("${settingsData[0].color_ajust}", "${settingsData[0].effset_ts_TDlengh}")`); });

    document.getElementById("SlideLeftIn").addEventListener("click", function() { if (GlobalsCurrentTab != 3) return; if (GlobalsEffectCurrentTab != 1) return; interfaceEntrypoint.evalScript(`SlideLeftIn("${settingsData[0].color_ajust}", "${settingsData[0].effset_ts_Slengh}", "${settingsData[0].effset_ts_slides}")`); });
    document.getElementById("SlideLeftOut").addEventListener("click", function() { if (GlobalsCurrentTab != 3) return; if (GlobalsEffectCurrentTab != 1) return; interfaceEntrypoint.evalScript(`SlideLeftOut("${settingsData[0].color_ajust}", "${settingsData[0].effset_ts_Slengh}", "${settingsData[0].effset_ts_slides}")`); });
    
    document.getElementById("ZoomOutIn").addEventListener("click", function() { if (GlobalsCurrentTab != 3) return; if (GlobalsEffectCurrentTab != 1) return; interfaceEntrypoint.evalScript(`ZoomOutIn("${settingsData[0].color_ajust}", "${settingsData[0].effset_ts_Z1lengh}")`); });
    document.getElementById("ZoomOutOut").addEventListener("click", function() { if (GlobalsCurrentTab != 3) return; if (GlobalsEffectCurrentTab != 1) return; interfaceEntrypoint.evalScript(`ZoomOutOut("${settingsData[0].color_ajust}", "${settingsData[0].effset_ts_Z1lengh}")`); });
    
    document.getElementById("ZoomInOut").addEventListener("click", function() { if (GlobalsCurrentTab != 3) return; if (GlobalsEffectCurrentTab != 1) return; interfaceEntrypoint.evalScript(`ZoomInIn("${settingsData[0].color_ajust}", "${settingsData[0].effset_ts_Z2lengh}")`); });
    document.getElementById("ZoomInIn").addEventListener("click", function() { if (GlobalsCurrentTab != 3) return; if (GlobalsEffectCurrentTab != 1) return; interfaceEntrypoint.evalScript(`ZoomInOut("${settingsData[0].color_ajust}", "${settingsData[0].effset_ts_Z2lengh}")`); });
    
    document.getElementById("BlurIn").addEventListener("click", function() { if (GlobalsCurrentTab != 3) return; if (GlobalsEffectCurrentTab != 1) return; interfaceEntrypoint.evalScript(`BlurOut("${settingsData[0].color_ajust}", "${settingsData[0].effset_bl_length}", "${settingsData[0].effset_bl_blurriness}")`); });
    document.getElementById("BlurOut").addEventListener("click", function() { if (GlobalsCurrentTab != 3) return; if (GlobalsEffectCurrentTab != 1) return; interfaceEntrypoint.evalScript(`BlurIn("${settingsData[0].color_ajust}", "${settingsData[0].effset_bl_length}", "${settingsData[0].effset_bl_blurriness}")`); });
    
    // Diskcache Stuff
    document.getElementById("ClearDiskcache").addEventListener("click", function() { if (GlobalsCurrentTab != 4) return; interfaceEntrypoint.evalScript(`PurgeThatShit()`); });
    document.getElementById("PurgeIt").addEventListener("click", function() { if (GlobalsCurrentTab != 4) return; interfaceEntrypoint.evalScript(`GetMeOutHereAsap()`); });
}

function LoadCustomCurves()
{
    getDataFromFile((err, newdataArray) => {
        if (err) {
            entrypoint.evalScript(`SendJSX_SCRIPT_ALERT_ERROR("${err}")`);
            return;
        }

        for (var i = 1; i < 21; i++) {
            if (!newdataArray[i].active)
                    continue;
            
            var button_text = "custom_" + i;
            var currButtonTxT = newdataArray[i].name + "";
            var NewString = "";
            
            for (var k = 0; k < currButtonTxT.length; k++) {
                var is_long = currButtonTxT[k] == "W" || currButtonTxT[k] == "M" || currButtonTxT[k] == "O" || currButtonTxT[k] == "G" || currButtonTxT[k] == "H";
                var numBL = is_long ? 8 : 10;
                if (k < numBL)
                {
                    if (k == 0)
                        NewString += currButtonTxT[k].toLocaleUpperCase();
                    else
                        NewString += currButtonTxT[k].toLocaleLowerCase();
                }
                else if (k == 11 || k == 12)
                    NewString += ".";
                else
                    continue;
            }
            
            document.getElementById(button_text).textContent = (newdataArray[i].name == undefined) ? "" : NewString;
            drawCubicBezierVisualizer(button_text, newdataArray[i].x1, newdataArray[i].y1, newdataArray[i].x2, newdataArray[i].y2);
        }
    });
}

function LoadPresetShakes()
{
    var interfaceEntrypoint = new CSInterface();
    
    document.getElementById("BasicShake").addEventListener("click", function() {
        if (GlobalsCurrentTab != 3) return; if (GlobalsEffectCurrentTab != 2) return;
        
        var pass_bool_1 = settingsData[0].shakes_add_ctime ? 1 : 0;
        var pass_bool_2 = settingsData[0].shakes_add_flash_blen ? 1 : 0;
        var pass_bool_3 = settingsData[0].shakes_add_flash ? 1 : 0;
        interfaceEntrypoint.evalScript(`BasicShake_001_JF("${pass_bool_1}", 
        "${settingsData[0].shakes_speed}", 
        "${settingsData[0].shakes_strength}", 
        "${settingsData[0].color_shakes}", 
        "${settingsData[0].shakes_add_flash_legn}", 
        "${settingsData[0].shakes_add_flash_strn}", 
        "${settingsData[0].color_flash}", 
        "${pass_bool_2}",
        "${pass_bool_3}"
        )`);
    });
    
    document.getElementById("QuickShake").addEventListener("click", function() {
        if (GlobalsCurrentTab != 3) return; if (GlobalsEffectCurrentTab != 2) return;
        
        var pass_bool_1 = settingsData[0].shakes_add_ctime ? 1 : 0;
        var pass_bool_2 = settingsData[0].shakes_add_flash_blen ? 1 : 0;
        var pass_bool_3 = settingsData[0].shakes_add_flash ? 1 : 0;
        interfaceEntrypoint.evalScript(`QuickShake_001_JF("${pass_bool_1}", 
        "${settingsData[0].shakes_speed}", 
        "${settingsData[0].shakes_strength}", 
        "${settingsData[0].color_shakes}", 
        "${settingsData[0].shakes_add_flash_legn}", 
        "${settingsData[0].shakes_add_flash_strn}", 
        "${settingsData[0].color_flash}", 
        "${pass_bool_2}",
        "${pass_bool_3}"
        )`);
    });

    document.getElementById("WaveShakeV1").addEventListener("click", function() {
        if (GlobalsCurrentTab != 3) return; if (GlobalsEffectCurrentTab != 2) return;
        
        var pass_bool_1 = settingsData[0].shakes_add_ctime ? 1 : 0;
        var pass_bool_2 = settingsData[0].shakes_add_flash_blen ? 1 : 0;
        var pass_bool_3 = settingsData[0].shakes_add_flash ? 1 : 0;
        interfaceEntrypoint.evalScript(`WaveV1_Shake_001_JF("${pass_bool_1}", 
        "${settingsData[0].shakes_speed}", 
        "${settingsData[0].shakes_strength}", 
        "${settingsData[0].color_shakes}", 
        "${settingsData[0].shakes_add_flash_legn}", 
        "${settingsData[0].shakes_add_flash_strn}", 
        "${settingsData[0].color_flash}", 
        "${pass_bool_2}",
        "${pass_bool_3}"
        )`);
    });

    document.getElementById("WaveShakeV2").addEventListener("click", function() {
        if (GlobalsCurrentTab != 3) return; if (GlobalsEffectCurrentTab != 2) return;
        
        var pass_bool_1 = settingsData[0].shakes_add_ctime ? 1 : 0;
        var pass_bool_2 = settingsData[0].shakes_add_flash_blen ? 1 : 0;
        var pass_bool_3 = settingsData[0].shakes_add_flash ? 1 : 0;
        interfaceEntrypoint.evalScript(`WaveV2_Shake_001_JF("${pass_bool_1}", 
        "${settingsData[0].shakes_speed}", 
        "${settingsData[0].shakes_strength}", 
        "${settingsData[0].color_shakes}", 
        "${settingsData[0].shakes_add_flash_legn}", 
        "${settingsData[0].shakes_add_flash_strn}", 
        "${settingsData[0].color_flash}", 
        "${pass_bool_2}",
        "${pass_bool_3}"
        )`);
    });
    
    document.getElementById("BounceShakeV1").addEventListener("click", function() {
        if (GlobalsCurrentTab != 3) return; if (GlobalsEffectCurrentTab != 2) return;
        
        var pass_bool_1 = settingsData[0].shakes_add_ctime ? 1 : 0;
        var pass_bool_2 = settingsData[0].shakes_add_flash_blen ? 1 : 0;
        var pass_bool_3 = settingsData[0].shakes_add_flash ? 1 : 0;
        interfaceEntrypoint.evalScript(`BounceInShake_001_JF("${pass_bool_1}", 
        "${settingsData[0].shakes_speed}", 
        "${settingsData[0].shakes_strength}", 
        "${settingsData[0].color_shakes}", 
        "${settingsData[0].shakes_add_flash_legn}", 
        "${settingsData[0].shakes_add_flash_strn}", 
        "${settingsData[0].color_flash}", 
        "${pass_bool_2}",
        "${pass_bool_3}"
        )`);
    });
    
    document.getElementById("BounceShakeV2").addEventListener("click", function() {
        if (GlobalsCurrentTab != 3) return; if (GlobalsEffectCurrentTab != 2) return;
        
        var pass_bool_1 = settingsData[0].shakes_add_ctime ? 1 : 0;
        var pass_bool_2 = settingsData[0].shakes_add_flash_blen ? 1 : 0;
        var pass_bool_3 = settingsData[0].shakes_add_flash ? 1 : 0;
        interfaceEntrypoint.evalScript(`BounceOutShake_001_JF("${pass_bool_1}", 
        "${settingsData[0].shakes_speed}", 
        "${settingsData[0].shakes_strength}", 
        "${settingsData[0].color_shakes}", 
        "${settingsData[0].shakes_add_flash_legn}", 
        "${settingsData[0].shakes_add_flash_strn}", 
        "${settingsData[0].color_flash}", 
        "${pass_bool_2}",
        "${pass_bool_3}"
        )`);
    });
    
    document.getElementById("WarpShake").addEventListener("click", function() {
        if (GlobalsCurrentTab != 3) return; if (GlobalsEffectCurrentTab != 2) return;
        
        var pass_bool_1 = settingsData[0].shakes_add_ctime ? 1 : 0;
        var pass_bool_2 = settingsData[0].shakes_add_flash_blen ? 1 : 0;
        var pass_bool_3 = settingsData[0].shakes_add_flash ? 1 : 0;
        interfaceEntrypoint.evalScript(`WarpShake_001_JF("${pass_bool_1}", 
        "${settingsData[0].shakes_speed}", 
        "${settingsData[0].shakes_strength}", 
        "${settingsData[0].color_shakes}", 
        "${settingsData[0].shakes_add_flash_legn}", 
        "${settingsData[0].shakes_add_flash_strn}", 
        "${settingsData[0].color_flash}", 
        "${pass_bool_2}",
        "${pass_bool_3}"
        )`);
    });
    
    document.getElementById("LensShake").addEventListener("click", function() {
        if (GlobalsCurrentTab != 3) return; if (GlobalsEffectCurrentTab != 2) return;
        
        var pass_bool_1 = settingsData[0].shakes_add_ctime ? 1 : 0;
        var pass_bool_2 = settingsData[0].shakes_add_flash_blen ? 1 : 0;
        var pass_bool_3 = settingsData[0].shakes_add_flash ? 1 : 0;
        interfaceEntrypoint.evalScript(`LensShake_001_JF("${pass_bool_1}", 
        "${settingsData[0].shakes_speed}", 
        "${settingsData[0].shakes_strength}", 
        "${settingsData[0].color_shakes}", 
        "${settingsData[0].shakes_add_flash_legn}", 
        "${settingsData[0].shakes_add_flash_strn}", 
        "${settingsData[0].color_flash}", 
        "${pass_bool_2}",
        "${pass_bool_3}"
        )`);
    });

    document.getElementById("InvertShake").addEventListener("click", function() {
        if (GlobalsCurrentTab != 3) return; if (GlobalsEffectCurrentTab != 2) return;
        
        var pass_bool_1 = settingsData[0].shakes_add_ctime ? 1 : 0;
        var pass_bool_2 = settingsData[0].shakes_add_flash_blen ? 1 : 0;
        var pass_bool_3 = settingsData[0].shakes_add_flash ? 1 : 0;
        interfaceEntrypoint.evalScript(`InvertShake_001_JF("${pass_bool_1}", 
        "${settingsData[0].shakes_speed}", 
        "${settingsData[0].shakes_strength}", 
        "${settingsData[0].color_shakes}", 
        "${settingsData[0].shakes_add_flash_legn}", 
        "${settingsData[0].shakes_add_flash_strn}", 
        "${settingsData[0].color_flash}", 
        "${pass_bool_2}",
        "${pass_bool_3}"
        )`);
    });

    document.getElementById("InvertPixleShake").addEventListener("click", function() {
        if (GlobalsCurrentTab != 3) return; if (GlobalsEffectCurrentTab != 2) return;
        
        var pass_bool_1 = settingsData[0].shakes_add_ctime ? 1 : 0;
        var pass_bool_2 = settingsData[0].shakes_add_flash_blen ? 1 : 0;
        var pass_bool_3 = settingsData[0].shakes_add_flash ? 1 : 0;
        interfaceEntrypoint.evalScript(`InvertPixleShake_001_JF("${pass_bool_1}", 
        "${settingsData[0].shakes_speed}", 
        "${settingsData[0].shakes_strength}", 
        "${settingsData[0].color_shakes}", 
        "${settingsData[0].shakes_add_flash_legn}", 
        "${settingsData[0].shakes_add_flash_strn}", 
        "${settingsData[0].color_flash}", 
        "${pass_bool_2}",
        "${pass_bool_3}"
        )`);
    });

    document.getElementById("SqueezeV1Shake").addEventListener("click", function() {
        if (GlobalsCurrentTab != 3) return; if (GlobalsEffectCurrentTab != 2) return;
        
        var pass_bool_1 = settingsData[0].shakes_add_ctime ? 1 : 0;
        var pass_bool_2 = settingsData[0].shakes_add_flash_blen ? 1 : 0;
        var pass_bool_3 = settingsData[0].shakes_add_flash ? 1 : 0;
        interfaceEntrypoint.evalScript(`SqueezeV1Shake_001_JF("${pass_bool_1}", 
        "${settingsData[0].shakes_speed}", 
        "${settingsData[0].shakes_strength}", 
        "${settingsData[0].color_shakes}", 
        "${settingsData[0].shakes_add_flash_legn}", 
        "${settingsData[0].shakes_add_flash_strn}", 
        "${settingsData[0].color_flash}", 
        "${pass_bool_2}",
        "${pass_bool_3}"
        )`);
    });
    
    document.getElementById("SqueezeV2Shake").addEventListener("click", function() {
        if (GlobalsCurrentTab != 3) return; if (GlobalsEffectCurrentTab != 2) return;
        
        var pass_bool_1 = settingsData[0].shakes_add_ctime ? 1 : 0;
        var pass_bool_2 = settingsData[0].shakes_add_flash_blen ? 1 : 0;
        var pass_bool_3 = settingsData[0].shakes_add_flash ? 1 : 0;
        interfaceEntrypoint.evalScript(`SqueezeV2Shake_001_JF("${pass_bool_1}", 
        "${settingsData[0].shakes_speed}", 
        "${settingsData[0].shakes_strength}", 
        "${settingsData[0].color_shakes}", 
        "${settingsData[0].shakes_add_flash_legn}", 
        "${settingsData[0].shakes_add_flash_strn}", 
        "${settingsData[0].color_flash}", 
        "${pass_bool_2}",
        "${pass_bool_3}"
        )`);
    });
        
    document.getElementById("DarkFlickerShake").addEventListener("click", function() {
        if (GlobalsCurrentTab != 3) return; if (GlobalsEffectCurrentTab != 2) return;
        
        var pass_bool_1 = settingsData[0].shakes_add_ctime ? 1 : 0;
        var pass_bool_2 = settingsData[0].shakes_add_flash_blen ? 1 : 0;
        var pass_bool_3 = settingsData[0].shakes_add_flash ? 1 : 0;
        interfaceEntrypoint.evalScript(`DarkFlickerShake_001_JF("${pass_bool_1}", 
        "${settingsData[0].shakes_speed}", 
        "${settingsData[0].shakes_strength}", 
        "${settingsData[0].color_shakes}", 
        "${settingsData[0].shakes_add_flash_legn}", 
        "${settingsData[0].shakes_add_flash_strn}", 
        "${settingsData[0].color_flash}", 
        "${pass_bool_2}",
        "${pass_bool_3}"
        )`);
    });

    document.getElementById("WhiteFlickerShake").addEventListener("click", function() {
        if (GlobalsCurrentTab != 3) return; if (GlobalsEffectCurrentTab != 2) return;
        
        var pass_bool_1 = settingsData[0].shakes_add_ctime ? 1 : 0;
        var pass_bool_2 = settingsData[0].shakes_add_flash_blen ? 1 : 0;
        var pass_bool_3 = settingsData[0].shakes_add_flash ? 1 : 0;
        interfaceEntrypoint.evalScript(`WhiteFlickerShake_001_JF("${pass_bool_1}", 
        "${settingsData[0].shakes_speed}", 
        "${settingsData[0].shakes_strength}", 
        "${settingsData[0].color_shakes}", 
        "${settingsData[0].shakes_add_flash_legn}", 
        "${settingsData[0].shakes_add_flash_strn}", 
        "${settingsData[0].color_flash}", 
        "${pass_bool_2}",
        "${pass_bool_3}"
        )`);
    });
}

// TODO: Custom Shake Editor

var VideoTimeLineArrayForSkipping = [0, 0.25, 0.5, 0.75, 1, 1.25, 1.5, 1.75, 2.00, 2.25, 2.5, 2.75, 3];

var CurrentKeyFrameStep = 0;
var tempKeyFramesX = [];
var tempKeyFramesY = [];

var inBetweenValuesX = new Array(tempKeyFramesX.length).fill(-1);
var currentKeyFrameCountX = 0;

var inBetweenValuesY = new Array(tempKeyFramesX.length).fill(-1);
var currentKeyFrameCountY = 0;

var tempStoredName = '';

// Complexity on TOP
function UpdateInbetween(type)
{
    switch (type)
    {
        case'x':
        {
            var i = 1;
            var lastValue = -1;
            var firstKeyFrameFound = false;

            while (i < tempKeyFramesX.length) {
                if (tempKeyFramesX[i] >= 0) {
                    lastValue = tempKeyFramesX[i];
                    currentKeyFrameCountX += 1;
                    inBetweenValuesX[i] = tempKeyFramesX[i];
                    
                    if (!firstKeyFrameFound) {
                        for (var j = 0; j < i; j++) {
                            inBetweenValuesX[j] = lastValue;
                        }
                        firstKeyFrameFound = true;
                    }

                    var nextIndex = i + 1;
                    while (nextIndex < tempKeyFramesX.length && tempKeyFramesX[nextIndex] < 0) {
                        nextIndex++;
                    }
                    
                    if (nextIndex < tempKeyFramesX.length && tempKeyFramesX[nextIndex] >= 0) {
                        var startValue = tempKeyFramesX[i];
                        var endValue = tempKeyFramesX[nextIndex];
                        var stepCount = nextIndex - i;
                        var stepSize = Number(endValue - startValue) / Number(stepCount);
                        
                        for (var j = 1; j < Number(stepCount); j++) {
                            inBetweenValuesX[i + j] = Math.round(Number(startValue) + Number(stepSize) * j);
                        }
                    }
                    else {
                        for (var j = i + 1; j < tempKeyFramesX.length; j++) {
                            inBetweenValuesX[j] = lastValue;
                        }
                        break;
                    }
                    
                    i = nextIndex;
                } else {
                    if (lastValue >= 0) {
                        inBetweenValuesX[i] = lastValue;
                    }
                    i++;
                }
            }
        }
        break;
        case'y':
        {
            var i = 1;
            var lastValue = -1;
            var firstKeyFrameFound = false;
            
            while (i < tempKeyFramesY.length) {
                if (tempKeyFramesY[i] >= 0) {
                    lastValue = tempKeyFramesY[i];
                    currentKeyFrameCountY += 1;
                    inBetweenValuesY[i] = tempKeyFramesY[i];
                    
                    if (!firstKeyFrameFound) {
                        for (var j = 0; j < i; j++) {
                            inBetweenValuesY[j] = lastValue;
                        }
                        firstKeyFrameFound = true;
                    }

                    var nextIndex = i + 1;
                    while (nextIndex < tempKeyFramesY.length && tempKeyFramesY[nextIndex] < 0) {
                        nextIndex++;
                    }
                    
                    if (nextIndex < tempKeyFramesY.length && tempKeyFramesY[nextIndex] >= 0) {
                        var startValue = tempKeyFramesY[i];
                        var endValue = tempKeyFramesY[nextIndex];
                        var stepCount = nextIndex - i;
                        var stepSize = Number(endValue - startValue) / Number(stepCount);
                        
                        for (var j = 1; j < Number(stepCount); j++) {
                            inBetweenValuesY[i + j] = Math.round(Number(startValue) + Number(stepSize) * j);
                        }
                    }
                    else {
                        for (var j = i + 1; j < tempKeyFramesY.length; j++) {
                            inBetweenValuesY[j] = lastValue;
                        }
                        break;
                    }
                    
                    i = nextIndex;
                } else {
                    if (lastValue >= 0) {
                        inBetweenValuesY[i] = lastValue;
                    }
                    i++;
                }
            }
        }
        break;
    }
}

function PostionSliderCorrection(type, returnToOrigin = false)
{
    var sliderStatusPositionX = document.getElementById('sliderStatusPositionX');
    var sliderPositionX = document.getElementById('sliderPositionX');
    
    var sliderStatusPositionY = document.getElementById('sliderStatusPositionY');
    var sliderPositionY = document.getElementById('sliderPositionY');
    
    switch (type)
    {
        case'x':
        {
            if (tempKeyFramesX[CurrentKeyFrameStep] >= 0 && currentKeyFrameCountX <= 1)
            {
                sliderStatusPositionX.textContent = `Position X: ${tempKeyFramesX[CurrentKeyFrameStep]}%`;
                sliderPositionX.value = tempKeyFramesX[CurrentKeyFrameStep];
            }

            if (currentKeyFrameCountX > 1)
            {
                sliderStatusPositionX.textContent = `Position X: ${inBetweenValuesX[CurrentKeyFrameStep]}%`;
                sliderPositionX.value = inBetweenValuesX[CurrentKeyFrameStep];
            }

            if (returnToOrigin)
            {
                sliderStatusPositionX.textContent = `Position X: ${0}%`;
                sliderPositionX.value = 0;
            }
        }
        break;
        case'y':
        {
            if (tempKeyFramesY[CurrentKeyFrameStep] >= 0 && currentKeyFrameCountY <= 1)
            {
                sliderStatusPositionY.textContent = `Position Y: ${tempKeyFramesY[CurrentKeyFrameStep]}%`;
                sliderPositionY.value = tempKeyFramesY[CurrentKeyFrameStep];
            }

            if (currentKeyFrameCountY > 1)
            {
                sliderStatusPositionY.textContent = `Position Y: ${inBetweenValuesY[CurrentKeyFrameStep]}%`;
                sliderPositionY.value = inBetweenValuesY[CurrentKeyFrameStep];
            }

            if (returnToOrigin)
            {
                sliderStatusPositionY.textContent = `Position Y: ${15}%`;
                sliderPositionY.value = 15;
            }
        }
        break;
    }
}

function ClearTempKeys(type)
{
    switch (type)
    {
        case'x':
        {
            for (var i = 0; i < inBetweenValuesX.length; i++) { inBetweenValuesX[i] = -1; }
            currentKeyFrameCountX = 0;
        }
        break;
        case'y':
        {
            for (var i = 0; i < inBetweenValuesY.length; i++) { inBetweenValuesY[i] = -1; }
            currentKeyFrameCountY = 0;
        }
        break;
    }
}

function AddKeyFrame(i, addValue, axis)
{
    var parentElementX = document.getElementById('KeyFrameSetterX');
    var parentElementY = document.getElementById('KeyFrameSetterY');
    
    switch (axis)
    {
        case 'x':{
            if (tempKeyFramesX[i] < 0)
            {
                var addedKeyFrame = document.createElement('div');
                addedKeyFrame.classList.add('keyFrame');
                addedKeyFrame.style.gridColumn = `${i}`;
                addedKeyFrame.textContent = `${i}`;
                addedKeyFrame.setAttribute('id', `ShakeKeyFrameX_${i}`);
                tempKeyFramesX[i] = addValue;
                parentElementX.appendChild(addedKeyFrame);

                addedKeyFrame.addEventListener('contextmenu', function(){
                    tempKeyFramesX[Number(this.textContent)] = -1;
                    ClearTempKeys('x');
                    UpdateInbetween('x');
                    PostionSliderCorrection('x');
                    this.remove();
                });
            }
        }
        break;
        case 'y':{
            if (tempKeyFramesY[i] < 0)
            {
                var addedKeyFrame = document.createElement('div');
                addedKeyFrame.classList.add('keyFrame');
                addedKeyFrame.style.gridColumn = `${i}`;
                addedKeyFrame.textContent = `${i}`;
                addedKeyFrame.setAttribute('id', `ShakeKeyFrameY_${i}`);
                tempKeyFramesY[i] = addValue;
                parentElementY.appendChild(addedKeyFrame);

                addedKeyFrame.addEventListener('contextmenu', function(){
                    tempKeyFramesY[Number(this.textContent)] = -1;
                    ClearTempKeys('y');
                    UpdateInbetween('y');
                    PostionSliderCorrection('y');
                    this.remove();                    
                });
            }
        }
        break;
    }
}

function LoadKeyFrame(i, addValue, axis)
{
    var parentElementX = document.getElementById('KeyFrameSetterX');
    var parentElementY = document.getElementById('KeyFrameSetterY');
    
    switch (axis)
    {
        case 'x':{
            if (addValue >= 0)
            {
                var addedKeyFrame = document.createElement('div');
                addedKeyFrame.classList.add('keyFrame');
                addedKeyFrame.style.gridColumn = `${i}`;
                addedKeyFrame.textContent = `${i}`;
                addedKeyFrame.setAttribute('id', `ShakeKeyFrameX_${i}`);
                parentElementX.appendChild(addedKeyFrame);

                addedKeyFrame.addEventListener('contextmenu', function(){
                    tempKeyFramesX[Number(this.textContent)] = -1;
                    ClearTempKeys('x');
                    UpdateInbetween('x');
                    PostionSliderCorrection('x');
                    this.remove();
                });
            }
        }
        break;
        case 'y':{
            if (addValue >= 0)
            {
                var addedKeyFrame = document.createElement('div');
                addedKeyFrame.classList.add('keyFrame');
                addedKeyFrame.style.gridColumn = `${i}`;
                addedKeyFrame.textContent = `${i}`;
                addedKeyFrame.setAttribute('id', `ShakeKeyFrameY_${i}`);
                parentElementY.appendChild(addedKeyFrame);

                addedKeyFrame.addEventListener('contextmenu', function(){
                    tempKeyFramesY[Number(this.textContent)] = -1;
                    ClearTempKeys('y');
                    UpdateInbetween('y');
                    PostionSliderCorrection('y');
                    this.remove();                    
                });
            }
        }
        break;
    }
}

function ModKeyFrame(i, changedValue, axis)
{
    switch (axis)
    {
        case 'x':{
            if (tempKeyFramesX[i] >= 0)
            {
                tempKeyFramesX[i] = changedValue;
            }
        }
        break;
        case 'y':{
            if (tempKeyFramesY[i] >= 0)
            {
                tempKeyFramesY[i] = changedValue;
            }
        }
        break;
    }
}

function RemoveKeyFrame(i, axis)
{
    switch (axis)
    {
        case 'x':{
            if (tempKeyFramesX[i] >= 0)
            {
                var currentKeyFrame = document.getElementById(`ShakeKeyFrameX_${i}`);
                currentKeyFrame.remove();
                tempKeyFramesX[i] = -1;
            }
        }
        break;
        case 'y':{
            if (tempKeyFramesY[i] >= 0)
            {
                var currentKeyFrame = document.getElementById(`ShakeKeyFrameY_${i}`);
                currentKeyFrame.remove();
                tempKeyFramesY[i] = -1;
            }
        }
        break;
    }
}

var timeLineIsUpdating = 0;
var tempKeyFrameSelected = 0;

// function seededRandom(seed, currentTime, input, frequency) {

//     function mulberry32(a) {
//         return function() {
//             let t = (a += 0x6D2B79F5);
//             t = Math.imul(t ^ (t >>> 15), t | 1);
//             t ^= t + Math.imul(t ^ (t >>> 7), t | 61);
//             return ((t ^ (t >>> 14)) >>> 0) / 4294967296;
//         };
//     }

//     const rand = mulberry32(seed);
//     const baseValue = Math.sin(currentTime * frequency + input) + rand() * 0.2;
//     const smoothedValue = Math.tanh(baseValue * 5);
//     return smoothedValue;
// }

function stringToNumbersAlt(str) {
    let result = 0;
    for (let i = 0; i < str.length; i++) {
        result = result * 31 + str.charCodeAt(i);
    }
    return result;
}

function smoothOscillation(seed, currentTime, frequency, position, position_Next, currentCount) {
    seed = stringToNumbersAlt(seed);

    // document.getElementById('TestDebugger').textContent = `${seed}`;
    function mulberry32(a) {
        return function() {
            let t = (a += 0x6D2B79F5);
            t = (t ^ (t >>> 15)) * (t | 1);
            t ^= t + ((t ^ (t >>> 7)) * (t | 61));
            return ((t ^ (t >>> 14)) >>> 0) / 4294967296;
        };
    }

    const rand = mulberry32(seed);
    const phaseOffset = rand() * 2 * Math.PI;
    const oscillation = Math.sin(currentTime * frequency * 2 * Math.PI + phaseOffset);

    var returnPosition = 1;
    var deltaTime = 0;
    
    if (!isNaN(VideoTimeLineArrayForSkipping[currentCount]))
        deltaTime = Math.min(Math.max(1 + ((currentTime - 0.125) - VideoTimeLineArrayForSkipping[currentCount - 1]) * 4, 0), 1).toFixed(10);

    // document.getElementById('TestDebugger').textContent = `${Number(VideoTimeLineArrayForSkipping[CurrentKeyFrameStep - 1]).toFixed(2)} + ${Number(currentTime - 0.125).toFixed(2)}`;

    const fixLag = Number(VideoTimeLineArrayForSkipping[currentCount - 1]).toFixed(3) == Number(currentTime - 0.125).toFixed(3);
    
    if ((!isNaN(position_Next) && !isNaN(position)) || fixLag)
    {
        if (fixLag)
        {
            returnPosition = position + (position_Next - position) * 1;
            document.getElementById('SHAKEINTERPSTATUS').className = `classInerpolationFailed`;
        }
        else
        {
            returnPosition = position + (position_Next - position) * deltaTime;
            document.getElementById('SHAKEINTERPSTATUS').className = `classInerpolationGood`;
        }
    }
    else
    {
        if (position >= 0 && position_Next >= 0)
        {
            document.getElementById('SHAKEINTERPSTATUS').className = `classInerpolationOriginal`;
        }
        returnPosition = position;
    }

    // document.getElementById('TestDebugger').textContent = `${oscillation * returnPosition * returnPosition}`;
    return oscillation * returnPosition * returnPosition;
}

var returnXpositionUpdate = 0;
var returnYpositionUpdate = 0;
var shakesPlayHeadInterval;
var shakesPlayHeadInterval2;

function updatePreViewVAL()
{
    var inputSeed = document.getElementById('inputSeed');
    var theVideoPreview = document.getElementById('cShakePreview');
    var sliderFrequency = document.getElementById('sliderFrequency');
    var calcPercent = theVideoPreview.currentTime / theVideoPreview.duration;
    caledJustForPreview = Math.round(12 * calcPercent) + 1;
    
    returnXpositionUpdate = smoothOscillation(inputSeed.value + 1, theVideoPreview.currentTime, Number(sliderFrequency.value) / 2, 
    (inBetweenValuesX[caledJustForPreview] / 100), (inBetweenValuesX[caledJustForPreview + 1] / 100), caledJustForPreview);

    returnYpositionUpdate = smoothOscillation(inputSeed.value, theVideoPreview.currentTime, Number(sliderFrequency.value) / 2, 
    (inBetweenValuesY[caledJustForPreview] / 100),(inBetweenValuesY[caledJustForPreview + 1] / 100), caledJustForPreview);

    // try
    // {
    //     var returnPosX = smoothOscillation(0, 0.00, 5.00 / 2, inBetweenValuesY[1] / 100, inBetweenValuesY[2] / 100, 1);
    //     document.getElementById('TestDebugger').textContent = `${returnPosX}`;
    // }
    // catch(err)
    // {
    //     document.getElementById('TestDebugger').textContent = `${err}`;
    // }
}

function UpdatetPlayHead()
{
    var theVideoPreview = document.getElementById('cShakePreview');
    var thePlayHead = document.getElementById('ActualPlayHead');
    var currentPlayTime = document.getElementById('currentPlayTime');
    var timeLineSec = document.getElementById('TimeLineSec');

    var calcPercent = theVideoPreview.currentTime / theVideoPreview.duration;
    var quickMath = 45 + (1212 * calcPercent);
    thePlayHead.style.marginLeft = `${quickMath}%`;
    
    const divisions = 12;
    const quickMath2 = (calcPercent) * 100;
    
    const stepSize = 100 / divisions;
    const snappedPercentage = Math.round(quickMath2 / stepSize) * stepSize * 1;

    const finalpercent = Math.min(Math.max(snappedPercentage / 100, 0), 1);

    CurrentKeyFrameStep = Math.round(12 * finalpercent) + 1;
    caledJustForPreview = Math.round(13 * calcPercent) + 0;

    currentPlayTime.textContent = `Keyframe ${CurrentKeyFrameStep}`;
    timeLineSec.textContent = `Timeline: ${Math.min(Math.max(Number(theVideoPreview.currentTime).toFixed(1), 0.00), 3.00)}/${Math.min(Math.max(Number(theVideoPreview.duration).toFixed(1), 0.00), 3.00)} Seconds`;
    // timeLineSec.textContent = `Timeline: ${Math.min(Math.max(Number(theVideoPreview.currentTime).toFixed(10), 0.00), 3.00)}/${Math.min(Math.max(Number(theVideoPreview.duration).toFixed(1), 0.00), 3.00)} Seconds`;
    
    //var returnXpositionUpdate = smoothOscillation(inputSeed.value, theVideoPreview.currentTime + 0.1, Number(sliderFrequency.value) / 2, (inBetweenValuesX[caledJustForPreview] / 100));
    //var returnYpositionUpdate = smoothOscillation(inputSeed.value, theVideoPreview.currentTime + 1.7, Number(sliderFrequency.value) / 2, (inBetweenValuesY[caledJustForPreview] / 100));

    if (isNaN(returnXpositionUpdate)) returnXpositionUpdate = 0;
    if (isNaN(returnYpositionUpdate)) returnYpositionUpdate = 0;

    theVideoPreview.style.transform = `translate(${8 * returnXpositionUpdate}vh, ${8 * returnYpositionUpdate}vh)`;

    if (timeLineIsUpdating != CurrentKeyFrameStep)
    {
        PostionSliderCorrection('x');
        PostionSliderCorrection('y');
        timeLineIsUpdating = CurrentKeyFrameStep;
    }
}

var hoverFreq = 0;
var hoverSeed = 0;

// For the hoverpreview
function UpdateHoverPreview()
{
    var theVideoPreview = document.getElementById('previewWindowEffectShakes');
    var calcPercent = theVideoPreview.currentTime / theVideoPreview.duration;
    caledJustForPreview = Math.round(12 * calcPercent) + 1;
    
    returnXpositionUpdate = smoothOscillation(hoverSeed + 1, theVideoPreview.currentTime, hoverFreq / 2, 
    (inBetweenValuesX[caledJustForPreview] / 100), (inBetweenValuesX[caledJustForPreview + 1] / 100), caledJustForPreview);

    returnYpositionUpdate = smoothOscillation(hoverSeed, theVideoPreview.currentTime, hoverFreq / 2, 
    (inBetweenValuesY[caledJustForPreview] / 100),(inBetweenValuesY[caledJustForPreview + 1] / 100), caledJustForPreview);

    if (isNaN(returnXpositionUpdate)) returnXpositionUpdate = 0;
    if (isNaN(returnYpositionUpdate)) returnYpositionUpdate = 0;

    theVideoPreview.style.transform = `translate(${8 * returnXpositionUpdate}vh, ${8 * returnYpositionUpdate}vh)`;
}

function getCountFromShakePreview()
{
    var theVideoPreview = document.getElementById('cShakePreview');

    var calcPercent = theVideoPreview.currentTime / theVideoPreview.duration;

    const divisions = 12;
    const quickMath2 = (calcPercent) * 100;
    
    const stepSize = 100 / divisions;
    const snappedPercentage = Math.round(quickMath2 / stepSize) * stepSize * 1;

    const finalpercent = Math.min(Math.max(snappedPercentage / 100, 0), 1);

    return Math.round(12 * finalpercent) + 1;
}

function CreateAndReadShakeFile() {
    const documentsFolder = path.join(os.homedir(), 'Documents');
    const setFolder = path.join(documentsFolder, 'JerryFlow');
    const filePath = path.join(setFolder, 'customshakes.jf');

    if (!fs.existsSync(setFolder)) {
        fs.mkdirSync(setFolder, { recursive: true });
    }
    
    try {
        if (fs.existsSync(filePath)) {
            const data = fs.readFileSync(filePath, 'utf-8');
            return data ? JSON.parse(data) : [];
        } else {
            fs.writeFileSync(filePath, JSON.stringify([]), 'utf-8');
            return [];
        }
    } catch (error) {
        console.error('Error handling the file:', error);
        return [];
    }
}

// var shakesLoadedToMemory = [];

function AddNewShakeToFile(name, tKeyFramesX, tKeyFramesY, interpolatedX, interpolatedY, frequency, seed, placingType, shakeStart, shakeLength, editShake) {
    const documentsFolder = path.join(os.homedir(), 'Documents');
    const setFolder = path.join(documentsFolder, 'JerryFlow');
    const filePath = path.join(setFolder, 'customshakes.jf');
    
    if (!fs.existsSync(setFolder)) {
        fs.mkdirSync(setFolder, { recursive: true });
    }
    
    let entries = CreateAndReadShakeFile();
    const checkIndex = editShake ? tempStoredName : name;
    const entryIndex = entries.findIndex(entry => entry.name === checkIndex);
    
    if (entryIndex === -1) { // Add shake
        entries.push({ name, tKeyFramesX, tKeyFramesY, interpolatedX, interpolatedY, frequency, seed, placingType, shakeStart, shakeLength });
    } else {
        if (editShake) // Update CFG
        {
            entries[entryIndex].name = name;

            entries[entryIndex].tKeyFramesX = tKeyFramesX;
            entries[entryIndex].tKeyFramesY = tKeyFramesY;

            entries[entryIndex].interpolatedX = interpolatedX;
            entries[entryIndex].interpolatedY = interpolatedY;

            entries[entryIndex].frequency = frequency;
            entries[entryIndex].seed = seed;
            entries[entryIndex].placingType = placingType;

            entries[entryIndex].shakeStart = shakeStart;
            entries[entryIndex].shakeLength = shakeLength;
        }
    }

    try {
        fs.writeFileSync(filePath, JSON.stringify(entries, null, 2), 'utf-8');
    } catch (error) {
        console.error('Error writing to the file:', error);
    }
}

function DeleteShakeToFile(name) {
    const documentsFolder = path.join(os.homedir(), 'Documents');
    const setFolder = path.join(documentsFolder, 'JerryFlow');
    const filePath = path.join(setFolder, 'customshakes.jf');
    
    if (!fs.existsSync(setFolder)) {
        fs.mkdirSync(setFolder, { recursive: true });
    }
    
    let entries = CreateAndReadShakeFile();
    const entryIndex = entries.findIndex(entry => entry.name === name);
    
    if (entryIndex !== -1) { // Remove shake
        entries.splice(entryIndex, 1);
    } 

    try {
        fs.writeFileSync(filePath, JSON.stringify(entries, null, 2), 'utf-8');
    } catch (error) {
        console.error('Error writing to the file:', error);
    }
}

var hoverShakePreviewID = 0;

function refreshShakeList()
{
    var CustomShake = document.getElementById('CustomShake');
    var AddShakeButton = document.getElementById('AddShake');
    
    var sliderStatusFrequency = document.getElementById('sliderStatusFrequency');
    var sliderFrequency = document.getElementById('sliderFrequency');
    
    var sliderStatusShakePlacement = document.getElementById('sliderStatusShakePlacement');
    var sliderShakePlacement = document.getElementById('sliderShakePlacement');
    
    while (CustomShake.firstChild) {
        if (CustomShake.firstChild !== AddShakeButton) {
            CustomShake.removeChild(CustomShake.firstChild);
        } else {
            break;
        }
    }
    
    var readFile = CreateAndReadShakeFile();
    
    var interfaceEntrypoint = new CSInterface();
    
    readFile.forEach(entry => {
        var shakeButton = document.createElement('button');
        shakeButton.textContent = entry.name;
        CustomShake.insertBefore(shakeButton, AddShakeButton);

        shakeButton.addEventListener('click', function(){        
            if (GlobalsCurrentTab != 3) return; if (GlobalsEffectCurrentTab != 2) return;
            
            const Inj_inBetweenValuesX = JSON.stringify(entry.interpolatedX);
            const Inj_inBetweenValuesY = JSON.stringify(entry.interpolatedY);
            const bruh1 = JSON.stringify(entry.seed);
            const bruh2 = JSON.stringify(entry.frequency);
            const bruh3 = JSON.stringify(entry.shakeStart);
            const bruh4 = JSON.stringify(entry.shakeLength);
            const bruh5 = JSON.stringify(entry.placingType);
            
            interfaceEntrypoint.evalScript(`AddCustomShake_JF(${settingsData[0].color_shakes}, ${Inj_inBetweenValuesX}, ${Inj_inBetweenValuesY}, ${bruh1}, ${bruh2}, ${bruh3}, ${bruh4}, ${bruh5})`);
        });
        
        var oldWidth = "";
        var oldMarginLeft = "";
        var oldMarginTop = "";
        
        shakeButton.addEventListener('mouseenter', function() {
            var videoElement = document.getElementById('previewWindowEffectShakes');

            videoElement.setAttribute('src', 'Previews/CustomShakePreview.mp4');
            videoElement.load();

            oldWidth = videoElement.style.height;
            oldMarginLeft = videoElement.style.marginLeft;
            oldMarginTop = videoElement.style.marginTop;

            videoElement.style.height = '100vh';
            videoElement.style.marginLeft = '-12.5vh';
            videoElement.style.marginTop = '-13vh';

            videoElement.play();
            
            inBetweenValuesX = entry.interpolatedX;
            inBetweenValuesY = entry.interpolatedY;

            hoverFreq = entry.frequency;
            hoverSeed = entry.seed;

            hoverShakePreviewID = setInterval(UpdateHoverPreview, 16.67);
        });
        
        shakeButton.addEventListener('mouseleave', function() {
            var videoElement = document.getElementById('previewWindowEffectShakes');

            videoElement.style.height = oldWidth;
            videoElement.style.marginLeft = oldMarginLeft;
            videoElement.style.marginTop = oldMarginTop;
            videoElement.style.transform = 'translate(0vh, 0vh)';
            
            videoElement.removeAttribute('src');
            videoElement.load();
            clearInterval(hoverShakePreviewID);
        });
        
        shakeButton.addEventListener('contextmenu', function() { // Editing Shake RN
            editingShake = true;
            document.getElementById('DeleteShake').style.transform = 'scale(1)';
            document.getElementById('AddShakeToList').textContent = 'Save changes';
            
            readFile.forEach(entry => {
                if (entry.name == this.textContent)
                {
                    tempStoredName = entry.name;
                    var parentElementX = document.getElementById('KeyFrameSetterX');
                    var parentElementY = document.getElementById('KeyFrameSetterY');
                    
                    parentElementX.innerHTML = '';
                    parentElementY.innerHTML = '';

                    document.getElementById('inputName').value = entry.name;
                    document.getElementById('inputSeed').value = entry.seed;

                    sliderStatusFrequency.textContent = `Frequency: ${Number(entry.frequency).toFixed(2)}`;
                    sliderFrequency.value = Number(entry.frequency).toFixed(2);
                    
                    sliderShakePlacement.value = Number(entry.placingType);
                    switch(Number(entry.placingType))
                    {
                        case 1: sliderStatusShakePlacement.textContent = `Shake added at start`; break;
                        case 2: sliderStatusShakePlacement.textContent = `Shake added at current time`; break;
                        case 3: sliderStatusShakePlacement.textContent = `Shake added at end`; break;
                    }
                    
                    document.getElementById('cShakePreview').setAttribute('src', 'Previews/CustomShakePreview.mp4');
                    document.getElementById('cShakePreview').load();

                    for (var i = 0; i < entry.tKeyFramesX.length; i++)
                    {
                        if (i == 0) continue;
                        LoadKeyFrame(i, entry.tKeyFramesX[i], 'x');
                    }

                    for (var i = 0; i < entry.tKeyFramesY.length; i++)
                    {
                        if (i == 0) continue;
                        LoadKeyFrame(i, entry.tKeyFramesY[i], 'y');
                    }

                    tempKeyFramesX = entry.tKeyFramesX;
                    tempKeyFramesY = entry.tKeyFramesY;

                    inBetweenValuesX = entry.interpolatedX;
                    inBetweenValuesY = entry.interpolatedY;

                    newEffectsTabAnims(5);
                    currenttab = 5;
                    GlobalsEffectCurrentTab = currenttab;

                    ClearTempKeys('x');
                    UpdateInbetween('x');
                    PostionSliderCorrection('x');
                    ClearTempKeys('y');
                    UpdateInbetween('y');
                    PostionSliderCorrection('y');

                    // SendNotification(`Editing ${this.textContent}`);
                }
            });
        });
    });
}

function ShakeLength()
{
    var lowestKeyframe = 0;
    var lowestKeyFrameX = 0;
    var lowestKeyFrameY = 0;
    
    for (var i = 0; i < 14; i++)
    {
        if (tempKeyFramesX[i] >= 0)
            lowestKeyFrameX = i;
    }
    
    for (var i = 0; i < 14; i++)
    {
        if (tempKeyFramesY[i] >= 0)
            lowestKeyFrameY = i;
    }

    if (lowestKeyFrameX > lowestKeyFrameY)
        lowestKeyframe = lowestKeyFrameX
    else
        lowestKeyframe = lowestKeyFrameY

    return VideoTimeLineArrayForSkipping[lowestKeyframe - 1];
}

function ShakeStart()
{
    var lowestKeyframe = 14;
    var lowestKeyFrameX = 14;
    var lowestKeyFrameY = 14;
    
    for (var i = 14; i > 0; i--)
    {
        if (inBetweenValuesX[i] <= 100 && tempKeyFramesX[i] >= 0)
            lowestKeyFrameX = i;
        
        if (inBetweenValuesX[i] > 0)
            lowestKeyFrameX = i;
    }
    
    for (var i = 14; i > 0; i--)
    {
        if (inBetweenValuesY[i] <= 100 && tempKeyFramesY[i] >= 0)
            lowestKeyFrameY = i;

        if (inBetweenValuesY[i] > 0)
            lowestKeyFrameY = i;
    }
    
    if (lowestKeyFrameX < lowestKeyFrameY)
        lowestKeyframe = lowestKeyFrameX
    else
        lowestKeyframe = lowestKeyFrameY

    if (lowestKeyframe <= 1)
        lowestKeyframe = 1;

    return VideoTimeLineArrayForSkipping[lowestKeyframe - 1];
}

function CustomShakeLiveEditor()
{
    var AddShake = document.getElementById("AddShake");
    var goBackToShakeTab = document.getElementById('goBackToShakeTab');
    var AddShakeToList = document.getElementById('AddShakeToList');
    var DeleteShake = document.getElementById('DeleteShake');

    var theVideoPreview = document.getElementById('cShakePreview');
    var thePlayHead = document.getElementById('ActualPlayHead');
    var thePlayHeadCatcher = document.getElementById('TimeLineMouseCatcher');

    var sliderStatusPositionX = document.getElementById('sliderStatusPositionX');
    var sliderPositionX = document.getElementById('sliderPositionX');
    
    var sliderStatusPositionY = document.getElementById('sliderStatusPositionY');
    var sliderPositionY = document.getElementById('sliderPositionY');
    
    var sliderStatusFrequency = document.getElementById('sliderStatusFrequency');
    var sliderFrequency = document.getElementById('sliderFrequency');
    
    var sliderStatusShakePlacement = document.getElementById('sliderStatusShakePlacement');
    var sliderShakePlacement = document.getElementById('sliderShakePlacement');
    
    var setPositionKeyFrameX = document.getElementById('setPositionKeyFrameX');
    var setPositionKeyFrameY = document.getElementById('setPositionKeyFrameY');
    
    var keyFrameSetterX = document.getElementById('KeyFrameSetterX');
    var keyFrameSetterY = document.getElementById('KeyFrameSetterY');
    
    var parentElementX = document.getElementById('KeyFrameSetterX');
    var parentElementY = document.getElementById('KeyFrameSetterY');

    var keyPositionLeftX = document.getElementById('KeyPositionLeftX');
    var keyPositionRightX = document.getElementById('KeyPositionRightX');

    var keyPositionLeftY = document.getElementById('KeyPositionLeftY');
    var keyPositionRightY = document.getElementById('KeyPositionRightY');

    var inputSeed = document.getElementById('inputSeed');
    var inputName = document.getElementById('inputName');
    
    var isMouseDown = false;
    var isMouseDownKeyFrameX = false;
    var isMouseDownKeyFrameY = false;
    const divisions = 12;

    for (var i = 1; i <= 13; i++) { tempKeyFramesX[i] = -1; tempKeyFramesY[i] = -1; }
    
    var PlayShake = document.getElementById('PlayShake');
    var PauseShake = document.getElementById('PauseShake');

    AddShake.addEventListener('click', function(){
        for (var i = 1; i <= 13; i++) { tempKeyFramesX[i] = -1; tempKeyFramesY[i] = -1; }
        ClearTempKeys('x');
        UpdateInbetween('x');
        PostionSliderCorrection('x', true);
        ClearTempKeys('y');
        UpdateInbetween('y');
        PostionSliderCorrection('y', true);
    });

    PlayShake.addEventListener('click', function(){
        theVideoPreview.play();
    });
    
    PauseShake.addEventListener('click', function(){
        theVideoPreview.pause();
    });

    // Mouse Controll --------------------------------------------------------

    function getMousePercent(event)
    {
        const rect = thePlayHeadCatcher.getBoundingClientRect();
        const mouseX = event.clientX - rect.left;
        const catcherSize = rect.width;

        const quickMath = (mouseX / catcherSize) * 100;
        
        const stepSize = 100 / divisions;
        const snappedPercentage = Math.round(quickMath / stepSize) * stepSize * 0.99;

        return Math.min(Math.max(snappedPercentage / 100, 0), 0.9929);
    }
    
    thePlayHeadCatcher.addEventListener('mousedown', function(event){
        isMouseDown = true;
        
        theVideoPreview.pause();
        theVideoPreview.currentTime = Math.min(Math.max(theVideoPreview.duration * getMousePercent(event), 0), 3);            
    });
    
    // Move KeyFrames

    function calcVirtualKeyFrameCount(event)
    {
        const rect = thePlayHeadCatcher.getBoundingClientRect();
        const mouseX = event.clientX - rect.left;
        const catcherSize = rect.width;

        const quickMath = (mouseX / catcherSize) * 100; // ich bin mathe
        
        const stepSize = 100 / divisions;
        const snappedPercentage = Math.round(quickMath / stepSize) * stepSize;
        const quickMathV2 = Math.round(12 * (snappedPercentage / 100)) + 1;

        return Math.min(Math.max(quickMathV2, 1), 13);
    }
    
    keyFrameSetterX.addEventListener('mousedown', function(event){
        isMouseDownKeyFrameX = true;
        theVideoPreview.pause();

        if (tempKeyFramesX[calcVirtualKeyFrameCount(event)] >= 0)
            tempKeyFrameSelected = calcVirtualKeyFrameCount(event);
    });
    
    keyFrameSetterY.addEventListener('mousedown', function(event){
        isMouseDownKeyFrameY = true;
        theVideoPreview.pause();

        if (tempKeyFramesY[calcVirtualKeyFrameCount(event)] >= 0)
            tempKeyFrameSelected = calcVirtualKeyFrameCount(event);
    });

    var movedValue = 0;
    document.addEventListener('mousemove', function(event){
        if (isMouseDown)
        {
            theVideoPreview.pause();
            theVideoPreview.currentTime = Math.min(Math.max(theVideoPreview.duration * getMousePercent(event), 0), 3);
            
            PostionSliderCorrection('x');
            PostionSliderCorrection('y');
        }

        if (isMouseDownKeyFrameX)
        {
            theVideoPreview.pause();
            if (tempKeyFrameSelected > 0)
            {
                if (tempKeyFramesX[calcVirtualKeyFrameCount(event)] >= 0)
                {
                    if (calcVirtualKeyFrameCount(event) != tempKeyFrameSelected)
                        SendNotification('You cannot overlap keyframes.', true, false)
                }
                else
                {
                    movedValue = tempKeyFramesX[tempKeyFrameSelected];
                    tempKeyFramesX[tempKeyFrameSelected] = -1;
                    tempKeyFramesX[calcVirtualKeyFrameCount(event)] = movedValue;
                    document.getElementById(`ShakeKeyFrameX_${tempKeyFrameSelected}`).remove();
                    
                    var addedKeyFrame = document.createElement('div');
                    addedKeyFrame.classList.add('keyFrame');
                    addedKeyFrame.style.gridColumn = `${calcVirtualKeyFrameCount(event)}`;
                    addedKeyFrame.textContent = `${calcVirtualKeyFrameCount(event)}`;
                    addedKeyFrame.setAttribute('id', `ShakeKeyFrameX_${calcVirtualKeyFrameCount(event)}`);
                    parentElementX.appendChild(addedKeyFrame);
    
                    tempKeyFrameSelected = calcVirtualKeyFrameCount(event);
    
                    ClearTempKeys('x');
                    UpdateInbetween('x');
                    PostionSliderCorrection('x');
                    
                    addedKeyFrame.addEventListener('contextmenu', function(){
                        tempKeyFramesX[Number(this.textContent)] = -1;
                        ClearTempKeys('x');
                        UpdateInbetween('x');
                        PostionSliderCorrection('x');
                        this.remove();
                    });
                }
            }
        }

        if (isMouseDownKeyFrameY)
        {
            theVideoPreview.pause();
            if (tempKeyFrameSelected > 0)
            {
                if (tempKeyFramesY[calcVirtualKeyFrameCount(event)] >= 0)
                {
                    if (calcVirtualKeyFrameCount(event) != tempKeyFrameSelected)
                        SendNotification('You cannot overlap keyframes.', true, false)
                }
                else
                {
                    movedValue = tempKeyFramesY[tempKeyFrameSelected];
                    tempKeyFramesY[tempKeyFrameSelected] = -1;
                    tempKeyFramesY[calcVirtualKeyFrameCount(event)] = movedValue;
                    document.getElementById(`ShakeKeyFrameY_${tempKeyFrameSelected}`).remove();
                    
                    var addedKeyFrame = document.createElement('div');
                    addedKeyFrame.classList.add('keyFrame');
                    addedKeyFrame.style.gridColumn = `${calcVirtualKeyFrameCount(event)}`;
                    addedKeyFrame.textContent = `${calcVirtualKeyFrameCount(event)}`;
                    addedKeyFrame.setAttribute('id', `ShakeKeyFrameY_${calcVirtualKeyFrameCount(event)}`);
                    parentElementY.appendChild(addedKeyFrame);
                    
                    tempKeyFrameSelected = calcVirtualKeyFrameCount(event);
    
                    ClearTempKeys('y');
                    UpdateInbetween('y');
                    PostionSliderCorrection('y');

                    addedKeyFrame.addEventListener('contextmenu', function(){
                        tempKeyFramesY[Number(this.textContent)] = -1;
                        ClearTempKeys('y');
                        UpdateInbetween('y');
                        PostionSliderCorrection('y');
                        this.remove();
                    });
                }
            }
        }
    });
    
    document.addEventListener('mouseup', function(event){
        tempKeyFrameSelected = 0;
        movedValue = 0;

        if (isMouseDown)
        {
            isMouseDown = false;
        }

        if (isMouseDownKeyFrameX)
            isMouseDownKeyFrameX = false;
        
        if (isMouseDownKeyFrameY)
            isMouseDownKeyFrameY = false;
    });
    
    // SLIER ------------------------------------------------------------
    
    sliderPositionX.addEventListener('input', function(){
        theVideoPreview.pause();
        if (tempKeyFramesX[CurrentKeyFrameStep] < 0)
        {
            if (currentKeyFrameCountX >= 1)
                AddKeyFrame(CurrentKeyFrameStep, sliderPositionX.value, 'x');
        }
        else
            ModKeyFrame(CurrentKeyFrameStep, this.value, 'x');

        sliderStatusPositionX.textContent = `Position X: ${this.value}%`;
    });
    
    sliderPositionY.addEventListener('input', function(){
        theVideoPreview.pause();
        if (tempKeyFramesY[CurrentKeyFrameStep] < 0)
        {
            if (currentKeyFrameCountY >= 1)
                AddKeyFrame(CurrentKeyFrameStep, sliderPositionY.value, 'y');
        }
        else
            ModKeyFrame(CurrentKeyFrameStep, this.value, 'y');

        sliderStatusPositionY.textContent = `Position Y: ${this.value}%`;
    });
    
    sliderPositionX.addEventListener('change', function(){
        ClearTempKeys('x');
        UpdateInbetween('x');
    });
    
    sliderPositionY.addEventListener('change', function(){
        ClearTempKeys('y');
        UpdateInbetween('y');
    });
    
    sliderFrequency.addEventListener('input', function(){
        sliderStatusFrequency.textContent = `Frequency: ${Number(this.value).toFixed(2)}`;
    });
    
    sliderShakePlacement.addEventListener('input', function(){
        switch(Number(this.value))
        {
            case 1: sliderStatusShakePlacement.textContent = `Shake added at start`; break;
            case 2: sliderStatusShakePlacement.textContent = `Shake added at current time`; break;
            case 3: sliderStatusShakePlacement.textContent = `Shake added at end`; break;
        }        
    });

    // PLAYHEAD -----------------------------------------------------------

    var fpsRender = 16.67; // 16.67 = 60 | 33.33 = 30 | 1 = fps of ur pc

    shakesPlayHeadInterval2 = setInterval(updatePreViewVAL, fpsRender);
    shakesPlayHeadInterval = setInterval(UpdatetPlayHead, fpsRender);
    
    // KEYFRAME ASSIST ----------------------------------------------------

    setPositionKeyFrameX.addEventListener('click', function(){
        if (!isClickAllowed) return; isClickAllowed = false; setTimeout(() => { isClickAllowed = true; }, cooldown);
        
        theVideoPreview.pause();
        if (tempKeyFramesX[CurrentKeyFrameStep] < 0)
            AddKeyFrame(CurrentKeyFrameStep, sliderPositionX.value, 'x');
        else
            RemoveKeyFrame(CurrentKeyFrameStep, 'x');

        ClearTempKeys('x');
        UpdateInbetween('x');
        PostionSliderCorrection('x');
    });
    
    setPositionKeyFrameY.addEventListener('click', function(){
        if (!isClickAllowed) return; isClickAllowed = false; setTimeout(() => { isClickAllowed = true; }, cooldown);
        
        theVideoPreview.pause();
        if (tempKeyFramesY[CurrentKeyFrameStep] < 0)
            AddKeyFrame(CurrentKeyFrameStep, sliderPositionY.value, 'y');
        else
            RemoveKeyFrame(CurrentKeyFrameStep, 'y');

        ClearTempKeys('y');
        UpdateInbetween('y');
        PostionSliderCorrection('y');
    });

    // Skip to next keyframe
    
    keyPositionLeftX.addEventListener('click', function(){
        theVideoPreview.pause();
        for (var i = getCountFromShakePreview(); i > 0; i--)
        {
            if (tempKeyFramesX[i] >= 0 && theVideoPreview.currentTime != VideoTimeLineArrayForSkipping[i - 1])
            {
                theVideoPreview.currentTime = VideoTimeLineArrayForSkipping[i - 1];
                PostionSliderCorrection('x');
                break
            }
        }
    });
    
    keyPositionRightX.addEventListener('click', function(){
        theVideoPreview.pause();
        for (var i = getCountFromShakePreview(); i < tempKeyFramesX.length; i++)
        {
            if (tempKeyFramesX[i] >= 0 && theVideoPreview.currentTime != VideoTimeLineArrayForSkipping[i - 1])
            {
                theVideoPreview.currentTime = VideoTimeLineArrayForSkipping[i - 1];
                PostionSliderCorrection('x');
                break
            }
        }
    });
    
    keyPositionLeftY.addEventListener('click', function(){
        theVideoPreview.pause();
        for (var i = getCountFromShakePreview(); i > 0; i--)
        {
            if (tempKeyFramesY[i] >= 0 && theVideoPreview.currentTime != VideoTimeLineArrayForSkipping[i - 1])
            {
                theVideoPreview.currentTime = VideoTimeLineArrayForSkipping[i - 1];
                PostionSliderCorrection('y');
                break
            }
        }
    });
    
    keyPositionRightY.addEventListener('click', function(){
        theVideoPreview.pause();
        for (var i = getCountFromShakePreview(); i < tempKeyFramesY.length; i++)
        {
            if (tempKeyFramesY[i] >= 0 && theVideoPreview.currentTime != VideoTimeLineArrayForSkipping[i - 1])
            {
                theVideoPreview.currentTime = VideoTimeLineArrayForSkipping[i - 1];
                PostionSliderCorrection('y');
                break
            }
        }
    });
    
    goBackToShakeTab.addEventListener('click', function(){
        newEffectsTabAnims(2);
        refreshShakeList();

        for (var i = 1; i <= 13; i++) { tempKeyFramesX[i] = -1; tempKeyFramesY[i] = -1; }
        document.getElementById('KeyFrameSetterX').innerHTML = '';
        document.getElementById('KeyFrameSetterY').innerHTML = '';
        
        ClearTempKeys('x');
        UpdateInbetween('x');
        PostionSliderCorrection('x', true);
        ClearTempKeys('y');
        UpdateInbetween('y');
        PostionSliderCorrection('y', true);

        inputSeed.value = '';
        inputName.value = '';

        sliderFrequency.value = 4.50;
        sliderStatusFrequency.textContent = `Frequency: ${4.50}`;
        
        sliderShakePlacement.value = 1;
        sliderStatusShakePlacement.textContent = `Shake added at start`;
        
        document.getElementById('SHAKEINTERPSTATUS').className = `classInerpolationOriginal`;
    });
    
    AddShakeToList.addEventListener('click', function(){
        if (inputName.value.length < 3)
        {
            SendNotification('The shake needs to have at least 3 characters as a name!', true, false);
            return;
        }
        
        var matchesFound = 0;
        if (editingShake) 
        {
            var readFile = CreateAndReadShakeFile();

            readFile.forEach(entry => {
                if (entry.name == inputName.value && tempStoredName != entry.name)
                    matchesFound++;
            });

            if (matchesFound > 0)
            {
                SendNotification(`${inputName.value} is already in the list! Choose a different name.`, true, false);
                return;
            }
        }
        
        AddNewShakeToFile(
            inputName.value,
            tempKeyFramesX,
            tempKeyFramesY,
            inBetweenValuesX,
            inBetweenValuesY,
            sliderFrequency.value,
            inputSeed.value,
            sliderShakePlacement.value,
            ShakeStart(),
            ShakeLength(),
            editingShake
        )
        
        newEffectsTabAnims(2);
        
        document.getElementById('DeleteShake').style.transform = 'scale(0)';
        if (editingShake) SendNotification(`Changes to ${inputName.value} have been saved!`);
        else SendNotification(`${inputName.value} has been added!`);

        refreshShakeList();
        
        for (var i = 1; i <= 13; i++) { tempKeyFramesX[i] = -1; tempKeyFramesY[i] = -1; }
        document.getElementById('KeyFrameSetterX').innerHTML = '';
        document.getElementById('KeyFrameSetterY').innerHTML = '';
        
        ClearTempKeys('x');
        UpdateInbetween('x');
        PostionSliderCorrection('x', true);
        ClearTempKeys('y');
        UpdateInbetween('y');
        PostionSliderCorrection('y', true);

        inputSeed.value = '';
        inputName.value = '';

        sliderFrequency.value = 4.50;
        sliderStatusFrequency.textContent = `Frequency: ${4.50}`;
        
        sliderShakePlacement.value = 1;
        sliderStatusShakePlacement.textContent = `Shake added at start`;
        
        document.getElementById('SHAKEINTERPSTATUS').className = `classInerpolationOriginal`;
    });
    
    DeleteShake.addEventListener('click', function(){
        if (!editingShake) 
        {
            SendNotification(`Uhhhm wtf this should not be here right now :O`, true, false);
            return;
        }
        
        DeleteShakeToFile(tempStoredName);
        
        newEffectsTabAnims(2);
        
        document.getElementById('DeleteShake').style.transform = 'scale(0)';
        SendNotification(`${inputName.value} has been deleted!`, true, false);

        refreshShakeList();
        
        for (var i = 1; i <= 13; i++) { tempKeyFramesX[i] = -1; tempKeyFramesY[i] = -1; }
        document.getElementById('KeyFrameSetterX').innerHTML = '';
        document.getElementById('KeyFrameSetterY').innerHTML = '';
        
        ClearTempKeys('x');
        UpdateInbetween('x');
        PostionSliderCorrection('x', true);
        ClearTempKeys('y');
        UpdateInbetween('y');
        PostionSliderCorrection('y', true);

        inputSeed.value = '';
        inputName.value = '';

        sliderFrequency.value = 4.50;
        sliderStatusFrequency.textContent = `Frequency: ${4.50}`;
        
        sliderShakePlacement.value = 1;
        sliderStatusShakePlacement.textContent = `Shake added at start`;
        
        document.getElementById('SHAKEINTERPSTATUS').className = `classInerpolationOriginal`;
    });

}

CustomShakeLiveEditor();
LoadPresetShakes();
LoadCustomCurves();
drawCubicBezierVisualizer("CUR_In_Preset", 0, 0, 0, 1);
drawCubicBezierVisualizer("CUR_Out_Preset", 1, 0, 1, 1);
drawCubicBezierVisualizer("CUR_SpeedRamp_Preset", 0.20, 0.80, 0.80, 0.20);
drawCubicBezierVisualizer("CUR_S_Preset", 0.6, 0, 0.3, 1);
drawCubicBezierVisualizer("CUR_Reset", 0, 0, 1, 1);
LiveCurveStuff();

CheckForButtonPress();
PresetsButtons();
LoadMiscFeatures();

/*======================================================================================
------------------------------------- OLD METHOD ---------------------------------------
=======================================================================================*/

/*
let videoElement;

function SetVideo(Path) {
    if (GlobalsCurrentTab != 3)
        return;

    if (!videoElement) videoElement = document.getElementById('previewWindowEffects');
    if (videoElement.getAttribute('src') !== Path) {
        videoElement.setAttribute('src', Path);
        videoElement.load();
    }
}

function RemoveVideo() {
    if (GlobalsCurrentTab != 3)
        return;
    
    if (!videoElement) videoElement = document.getElementById('previewWindowEffects');
    if (videoElement.getAttribute('src')) {
        videoElement.removeAttribute('src');
        videoElement.load();
    }
}

function LoadVideosEffects() {
    const WarpStabilizerEffect = document.getElementById("WarpStabilizerEffect");
    const CameraTrackerEffect = document.getElementById("CameraTrackerEffect");
    const FlashEffect = document.getElementById("FlashEffect");
    const OneFr = document.getElementById("OneFrameGlitchEffect");
    const OneFr2 = document.getElementById("OneFrameInvertOffset");
    const ForceMotionEffect = document.getElementById("ForceMotionEffect");

    const WarpOutEffect = document.getElementById("WarpOutEffect");
    const WarpInEffect = document.getElementById("WarpInEffect");

    const TimeWOutEffect = document.getElementById("TimeWOutEffect");
    const TimeWInEffect = document.getElementById("TimeWInEffect");

    const TimeDOutEffect = document.getElementById("TimeDOutEffect");
    const TimeDInEffect = document.getElementById("TimeDInEffect");

    const SlideLeftOut = document.getElementById("SlideLeftOut");
    const SlideLeftIn = document.getElementById("SlideLeftIn");

    const ZoomOutIn = document.getElementById("ZoomOutIn");
    const ZoomOutOut = document.getElementById("ZoomOutOut");

    const ZoomInOut = document.getElementById("ZoomInOut");
    const ZoomInIn = document.getElementById("ZoomInIn");

    WarpStabilizerEffect.addEventListener("mouseover", () => SetVideo("Previews/NoPreview.mp4"));
    CameraTrackerEffect.addEventListener("mouseover", () => SetVideo("Previews/NoPreview.mp4"));
    FlashEffect.addEventListener("mouseover", () => SetVideo("Previews/Flash.mp4"));
    OneFr.addEventListener("mouseover", () => SetVideo("Previews/OneFrameGlitch.mp4"));
    OneFr2.addEventListener("mouseover", () => SetVideo("Previews/InvertOffset.mp4"));
    ForceMotionEffect.addEventListener("mouseover", () => SetVideo("Previews/CCForce.mp4"));

    WarpOutEffect.addEventListener("mouseover", () => SetVideo("Previews/Warp.mp4"));
    WarpInEffect.addEventListener("mouseover", () => SetVideo("Previews/Warp.mp4"));

    TimeWOutEffect.addEventListener("mouseover", () => SetVideo("Previews/TImeWarp.mp4"));
    TimeWInEffect.addEventListener("mouseover", () => SetVideo("Previews/TImeWarp.mp4"));

    TimeDOutEffect.addEventListener("mouseover", () => SetVideo("Previews/TimeDis.mp4"));
    TimeDInEffect.addEventListener("mouseover", () => SetVideo("Previews/TimeDis.mp4"));

    SlideLeftOut.addEventListener("mouseover", () => SetVideo("Previews/Slide.mp4"));
    SlideLeftIn.addEventListener("mouseover", () => SetVideo("Previews/Slide.mp4"));

    ZoomOutIn.addEventListener("mouseover", () => SetVideo("Previews/ZoomOut.mp4"));
    ZoomOutOut.addEventListener("mouseover", () => SetVideo("Previews/ZoomOut.mp4"));

    ZoomInOut.addEventListener("mouseover", () => SetVideo("Previews/ZoomIn.mp4"));
    ZoomInIn.addEventListener("mouseover", () => SetVideo("Previews/ZoomIn.mp4"));

    // REMOVE THAT SHIT

    WarpStabilizerEffect.addEventListener("mouseleave", () => RemoveVideo());
    CameraTrackerEffect.addEventListener("mouseleave", () => RemoveVideo());
    ForceMotionEffect.addEventListener("mouseleave", () => RemoveVideo());    
    TimeWOutEffect.addEventListener("mouseleave", () => RemoveVideo());
    TimeDOutEffect.addEventListener("mouseleave", () => RemoveVideo());
    TimeWInEffect.addEventListener("mouseleave", () => RemoveVideo());
    TimeDInEffect.addEventListener("mouseleave", () => RemoveVideo());
    WarpOutEffect.addEventListener("mouseleave", () => RemoveVideo());
    WarpInEffect.addEventListener("mouseleave", () => RemoveVideo());
    SlideLeftOut.addEventListener("mouseleave", () => RemoveVideo());
    SlideLeftIn.addEventListener("mouseleave", () => RemoveVideo());
    FlashEffect.addEventListener("mouseleave", () => RemoveVideo());
    ZoomOutOut.addEventListener("mouseleave", () => RemoveVideo());
    ZoomOutIn.addEventListener("mouseleave", () => RemoveVideo());
    ZoomInOut.addEventListener("mouseleave", () => RemoveVideo());
    ZoomInIn.addEventListener("mouseleave", () => RemoveVideo());
    OneFr2.addEventListener("mouseleave", () => RemoveVideo());
    OneFr.addEventListener("mouseleave", () => RemoveVideo());
}
LoadVideosEffects();
*/

/*======================================================================================
------------------------------ NEW VIDEO HOLDER METHOD ----------------------------------
=======================================================================================*/

let videoElement;

function setVideoForButton(buttonId) {
    if (!videoElement) videoElement = document.getElementById('previewWindowEffects');

    const videoPathMap = {
        WarpStabilizerEffect: "Previews/NoPreview.mp4",
        CameraTrackerEffect: "Previews/NoPreview.mp4",
        ForceMotionEffect: "Previews/NoPreview.mp4",
        FlashEffect: "Previews/Flash.mp4",
        OneFrameGlitchEffect: "Previews/OneFrameGlitch.mp4",
        OneFrameInvertOffset: "Previews/InvertOffset.mp4",
        WarpOutEffect: "Previews/Warp.mp4",
        WarpInEffect: "Previews/Warp.mp4",
        TimeWOutEffect: "Previews/TImeWarp.mp4",
        TimeWInEffect: "Previews/TImeWarp.mp4",
        TimeDInEffect: "Previews/TimeDis.mp4",
        SlideLeftOut: "Previews/Slide.mp4",
        SlideLeftIn: "Previews/Slide.mp4",
        ZoomOutIn: "Previews/ZoomOut.mp4",
        ZoomOutOut: "Previews/ZoomOut.mp4",
        ZoomInOut: "Previews/ZoomIn.mp4",
        ZoomInIn: "Previews/ZoomIn.mp4",
        BlurOut: "Previews/Blur.mp4",
        BlurIn: "Previews/Blur.mp4",
        // Additional buttons as needed
    };

    const path = videoPathMap[buttonId];
    if (path && videoElement.getAttribute('src') !== path) {
        videoElement.setAttribute('src', path);
        videoElement.load();
    }
}

function RemoveVideo() {
    if (!videoElement) videoElement = document.getElementById('previewWindowEffects');
    if (videoElement.getAttribute('src')) {
        videoElement.removeAttribute('src'); // Clear the src attribute
        videoElement.load(); // Reload the video element to update the state
    }
}

function LoadVideosEffects() {
    const effectsContainer = document.querySelector(".effectsTabSelecteble");
    
    effectsContainer.addEventListener("mouseover", function(event) {
        if (event.target.tagName === "BUTTON" && GlobalsCurrentTab === 3) {
            const buttonId = event.target.id;
            setVideoForButton(buttonId);
        }
    });
    
    effectsContainer.addEventListener("mouseleave", function(event) {
        if (event.target.tagName === "BUTTON" && GlobalsCurrentTab === 3) {
            RemoveVideo();
        }
    }, true);
}

LoadVideosEffects();

/*======================================================================================
----------------------------- SHAKES PREVIEW NEW METHOD --------------------------------
=======================================================================================*/

let videoElement_s;

function ShakessetVideoForButton(buttonId) {
    if (!videoElement_s) videoElement_s = document.getElementById('previewWindowEffectShakes');

    const videoPathMap = { // New mapping meth
        BasicShake: "Previews/1.mp4",
        QuickShake: "Previews/2.mp4",
        WaveShakeV1: "Previews/3.mp4",
        WaveShakeV2: "Previews/4.mp4",
        BounceShakeV1: "Previews/5.mp4",
        BounceShakeV2: "Previews/6.mp4",
        SqueezeV1Shake: "Previews/7.mp4",
        SqueezeV2Shake: "Previews/8.mp4",
        WarpShake: "Previews/9.mp4",
        LensShake: "Previews/10.mp4",
        InvertShake: "Previews/11.mp4",
        InvertPixleShake: "Previews/12.mp4",
        DarkFlickerShake: "Previews/13.mp4",
        WhiteFlickerShake: "Previews/14.mp4"
    };

    const path = videoPathMap[buttonId];
    if (path && videoElement_s.getAttribute('src') !== path) {
        videoElement_s.setAttribute('src', path);
        videoElement_s.controls = false;
        videoElement_s.autoplay = true;
        videoElement_s.muted = true;
        videoElement_s.loop = true;
        videoElement_s.load();
    }
}

function ShakesRemoveVideo() {
    if (!videoElement_s) videoElement_s = document.getElementById('previewWindowEffectShakes');
    if (videoElement_s.getAttribute('src')) {
        videoElement_s.removeAttribute('src');
        videoElement_s.controls = false;
        videoElement_s.autoplay = false;
        videoElement_s.muted = true;
        videoElement_s.loop = true;
        videoElement_s.load();
    }
}

function ShakesLoadVideosEffects() {
    const effectsContainer = document.querySelector("#PresetShakes");
    
    effectsContainer.addEventListener("mouseover", function(event) {
        if (event.target.tagName === "BUTTON" && GlobalsCurrentTab === 3) {
            const buttonId = event.target.id;
            ShakessetVideoForButton(buttonId);
        }
    });
    
    effectsContainer.addEventListener("mouseleave", function(event) {
        if (event.target.tagName === "BUTTON" && GlobalsCurrentTab === 3) {
            ShakesRemoveVideo();
        }
    }, true);
}

ShakesLoadVideosEffects();

// RGB NIGGER

function applyHueRotation(degrees, saturation)
{
    const sat = saturation / 100;
    var satuVal = 1.5 * sat;
    var hueToDeg = `hue-rotate(${degrees}deg) saturate(${satuVal})`;

    var hueToDegJustForSat = `hue-rotate(${degrees}deg) saturate(1.5)`;
    document.getElementById('CoolJerryFlowSat').style.filter = hueToDegJustForSat;

    var hueToDegJustForHue = `saturate(${satuVal})`;
    document.getElementById('CoolJerryFlowHue').style.filter = hueToDegJustForHue;

    document.getElementById('NoteButton').style.filter = hueToDeg;
    document.getElementById('cc1').style.filter = hueToDeg;
    document.getElementById('QuickNoteSection').style.filter = hueToDeg;
    if (GlobalsCurrentTab == 1)
    {
        if (document.getElementById('CurvePreview')) document.getElementById('CurvePreview').style.filter = hueToDeg;
        if (document.getElementById('CopyCurve')) document.getElementById('CopyCurve').style.filter = hueToDeg;
        if (document.getElementById('PasteCurve')) document.getElementById('PasteCurve').style.filter = hueToDeg;
        //document.getElementById('Curve_Randomize').style.filter = hueToDeg;
        if (document.getElementById('tab_1')) document.getElementById('tab_1').style.filter = hueToDeg;
    }
    
    if (GlobalsCurrentTab == 2)
    {
        if (document.getElementById('secnd_tab2')) document.getElementById('secnd_tab2').style.filter = hueToDeg;
        if (document.getElementById('trd_tab2')) document.getElementById('trd_tab2').style.filter = hueToDeg;
    }

    if (GlobalsCurrentTab == 3)
    {
        document.getElementById('colorNavbarInEffects').style.filter = hueToDeg;
        document.getElementById('eff_left').style.filter = hueToDeg;
        document.getElementById('shake_left').style.filter = hueToDeg;
        document.getElementById('AddFlashToAllShakes').style.filter = hueToDeg;
        document.getElementById('CreateAtCompTime').style.filter = hueToDeg;
        document.getElementById('FlashSettingsButton').style.filter = hueToDeg;
        document.getElementById('FlashSettingsPopUp').style.filter = hueToDeg;
        document.getElementById('0x01').style.filter = hueToDeg;
        document.getElementById('0x02').style.filter = hueToDeg;
        document.getElementById('0x03').style.filter = hueToDeg;
        document.getElementById('WarpStabilizerSideBar').style.filter = hueToDeg;
        document.getElementById('CameraTrackerSideBar').style.filter = hueToDeg;
        document.getElementById('flashSideBar').style.filter = hueToDeg;
        document.getElementById('ForceMSideBar').style.filter = hueToDeg;
        document.getElementById('WarpEffSideBar').style.filter = hueToDeg;
        document.getElementById('SlideSideBar').style.filter = hueToDeg;
        document.getElementById('ZoomOutSideBar').style.filter = hueToDeg;
        document.getElementById('ZoomInSideBar').style.filter = hueToDeg;
        document.getElementById('BlurSideBar').style.filter = hueToDeg;
        document.getElementById('TimeWEffSideBar').style.filter = hueToDeg;
        document.getElementById('TimeDEffSideBar').style.filter = hueToDeg;
        document.getElementById('assetsLine').style.filter = hueToDeg;
        document.getElementById('AssetSearch').style.filter = hueToDeg;
        document.getElementById('AssetsInfoButton').style.filter = hueToDeg;
        document.getElementById('minusPage').style.filter = hueToDeg;
        document.getElementById('plusPage').style.filter = hueToDeg;
        document.getElementById('AssetInfoPopUp').style.filter = hueToDeg;
        document.getElementById('AssetsSettingsPopUp').style.filter = hueToDeg;
        document.getElementById('AssetsReloadButton').style.filter = hueToDeg;
        document.getElementById('AssetsSettingsButton').style.filter = hueToDeg;
        document.getElementById('PresetsTab').style.filter = hueToDeg;
        document.getElementById('SaveNewPresetTab').style.filter = hueToDeg;
        document.getElementById('setCurrentShakeSetting').style.filter = hueToDeg;
        document.getElementById('currentShakeTimeline').style.filter = hueToDeg;
    }
    
    if (GlobalsCurrentTab == 4)
    {
        // document.getElementById('tab_4').style.filter = hueToDeg;
        document.getElementById('tab4_1').style.filter = hueToDeg;
        document.getElementById('tab4_2').style.filter = hueToDeg;
        document.getElementById('tab4_3').style.filter = hueToDeg;
        document.getElementById('tab4_4').style.filter = hueToDeg;

        document.getElementById('OpenCloseCurveSection').style.filter = hueToDeg;
        document.getElementById('OpenCloseMainSection').style.filter = hueToDeg;
        document.getElementById('OpenCloseEffectSection').style.filter = hueToDeg;
        document.getElementById('OpenCloseSettingsSection').style.filter = hueToDeg;

        document.getElementById('closeHowTo').style.filter = hueToDeg;
        
        for (var i = 1; i <= 4; i++) {
            document.getElementById('line000' + i).style.filter = hueToDeg;
        }
        
        for (var i = 0; i <= 8; i++) {
            document.getElementById('txt000' + i).style.filter = hueToDeg;
        }
    }
    
    if (GlobalsCurrentTab == 5)
    {
        document.getElementById('flappyJerryBG').style.filter = hueToDeg;
        document.getElementById('volumebar').style.filter = hueToDeg;
        document.getElementById('closeMiniGame').style.filter = hueToDeg;
    }
    
    var dashboard = document.getElementById("dashboard");
    if (dashboard.style.marginLeft === "15%")
    {
        document.getElementById("0x2222").style.filter = hueToDeg;
        document.getElementById("0x1111").style.filter = hueToDeg;
        document.getElementById("udLogs").style.filter = hueToDeg;
    }
    
    var RegAndLog = document.getElementById("RegAndLog");
    if (RegAndLog.style.marginLeft === "0%")
    {
        RegAndLog.style.filter = hueToDeg;
    }
}

// TODO: RESITZE FUNCTION

function scaleToTab(tab, scaleFactor)
{    
    var viewportHeight = window.innerHeight;

    // Calculate the offsets with scale factor
    var offsetX = (tab.offsetWidth * (1 - scaleFactor)) * 0.5;
    var offsetY = (window.offsetWidth * (1 - scaleFactor)) * 0.1;

    return {offsetX, offsetY};
}

function ScaleToTheWidth()
{
    var create_curve = document.getElementById("create_curve");
    var tab_1 = document.getElementById("tab_1");
    var tab_2 = document.getElementById("tab_2");
    var tab_3 = document.getElementById("tab_3");
    var tab_4 = document.getElementById("tab_4");
    var midsec = document.getElementById("midsec");

    if (window.innerWidth - (window.innerWidth * 0.15) > window.innerHeight)
    {   
        create_curve.style.transform = 'scale(1) translate(-50%, 0)';
        tab_1.style.transform = 'none';
        tab_2.style.transform = 'none';
        tab_3.style.transform = 'none';
        tab_4.style.transform = 'none';
        midsec.style.transform = 'scale(1) translate(-50%, 0)';
        document.getElementById("FlappyJ").style.transform = 'scale(1)';
        document.getElementById("FlappyJerryTitle").style.transform = 'scale(1)';
        document.getElementById("FlappyJerryFPS").style.transform = 'scale(1)';
        document.getElementById("volumebar").style.transform = 'scale(1)';

        // create_curve.style.zoom = '100%';
        // tab_1.style.zoom = '100%';
        // tab_2.style.zoom = '100%';
        // tab_3.style.zoom = '100%';
        // tab_4.style.zoom = '100%';
        // midsec.style.zoom = '100%';
        return;
    }

    var scaleFactor = (window.innerWidth / tab_2.offsetWidth) - ((window.innerWidth / tab_2.offsetWidth) * 0.15);

    create_curve.style.transform = 'scale(' + scaleFactor + ') translate(-50%, 0)';

    var pleaseKillMeTy = 'scaleX(' + scaleFactor + ') scaleY(' + scaleFactor + ') scaleZ(100) translateZ(0px)';
    tab_1.style.transform = pleaseKillMeTy;        
    tab_2.style.transform = pleaseKillMeTy;
    tab_3.style.transform = pleaseKillMeTy;
    tab_4.style.transform = pleaseKillMeTy;
    midsec.style.transform = pleaseKillMeTy + ' translate(-50%, 0)';
    document.getElementById("FlappyJ").style.transform = pleaseKillMeTy;
    document.getElementById("FlappyJerryTitle").style.transform = pleaseKillMeTy;
    document.getElementById("FlappyJerryFPS").style.transform = pleaseKillMeTy;
    document.getElementById("volumebar").style.transform = pleaseKillMeTy;

    // tab_1.style.zoom  = scaleFactor * 100 + '%';
    // tab_1.style.left = scaleToTab(tab_3, scaleFactor).offsetX + 'px';
    // tab_1.style.top = scaleToTab(tab_3, scaleFactor).offsetY + 'px';
    
    // tab_2.style.zoom  = scaleFactor * 100 + '%';
    // tab_2.style.left = scaleToTab(tab_2, scaleFactor).offsetX + 'px';
    // tab_2.style.top = scaleToTab(tab_2, scaleFactor).offsetY + 'px';

    // tab_3.style.zoom  = scaleFactor * 100 + '%';
}

window.addEventListener('resize', ScaleToTheWidth);

const rgbDiff = 10;
let currentColorval = 0;
const rgbCounter = (factor) => {
    if (currentColorval >= factor * rgbDiff)
    {
        currentColorval = 0;
    }
    else
    {
        currentColorval++;
    }
}

function RGB_MenuMode()
{
    if (settingsData[0].ui_rgb_mode) {
        rgbCounter(settingsData[0].ui_rgb_mode_factor);
        var applyVal = 360 * ((currentColorval / rgbDiff) / (settingsData[0].ui_rgb_mode_factor));
        applyHueRotation(applyVal, settingsData[0].ui_color_sat);
    } else {
        currentColorval = ((settingsData[0].ui_color_hue * rgbDiff) * (settingsData[0].ui_rgb_mode_factor)) / 360;
        var applyVal = 360 * ((currentColorval / rgbDiff) / (settingsData[0].ui_rgb_mode_factor));
        applyHueRotation(applyVal, settingsData[0].ui_color_sat);
    }
}

let RGB_MenuMode_Inverval;

RGB_MenuMode_Inverval = setInterval(RGB_MenuMode, 10);

var curtabIsClosed = true;
var mainIsClosed = true;
var effectIsClosed = true;
var settingsIsClosed = true;
function HandleHowToSection()
{
    var curveSectionTab = document.getElementById("curveSectionTab");
    var OpenCloseCurveSection = document.getElementById("OpenCloseCurveSection");
    OpenCloseCurveSection.addEventListener("click", function() {
        //if (GlobalsCurrentTab != 4) return;
        
        curveSectionTab.style.transition = "height 400ms cubic-bezier(.7,0,.3,1)";
        OpenCloseCurveSection.style.transform = curtabIsClosed ? "rotate(180deg)" : "rotate(0deg)";
        curveSectionTab.style.height = curtabIsClosed ? "81vw" : "7vw";

        curtabIsClosed = !curtabIsClosed;
    });

    var mainSectionTab = document.getElementById("mainSectionTab");
    var OpenCloseMainSection = document.getElementById("OpenCloseMainSection");
    OpenCloseMainSection.addEventListener("click", function() {
        //if (GlobalsCurrentTab != 4) return;

        mainSectionTab.style.transition = "height 400ms cubic-bezier(.7,0,.3,1)";
        OpenCloseMainSection.style.transform = mainIsClosed ? "rotate(180deg)" : "rotate(0deg)";
        mainSectionTab.style.height = mainIsClosed ? "69vw" : "7vw";

        mainIsClosed = !mainIsClosed;
    });

    var effectSectionTab = document.getElementById("effectSectionTab");
    var OpenCloseEffectSection = document.getElementById("OpenCloseEffectSection");
    OpenCloseEffectSection.addEventListener("click", function() {
        //if (GlobalsCurrentTab != 4) return;

        effectSectionTab.style.transition = "height 400ms cubic-bezier(.7,0,.3,1)";
        OpenCloseEffectSection.style.transform = effectIsClosed ? "rotate(180deg)" : "rotate(0deg)";
        effectSectionTab.style.height = effectIsClosed ? "160vw" : "7vw";

        effectIsClosed = !effectIsClosed;
    });

    var settingsSectionTab = document.getElementById("settingsSectionTab");
    var OpenCloseSettingsSection = document.getElementById("OpenCloseSettingsSection");
    OpenCloseSettingsSection.addEventListener("click", function() {
        //if (GlobalsCurrentTab != 4) return;

        settingsSectionTab.style.transition = "height 400ms cubic-bezier(.7,0,.3,1)";
        OpenCloseSettingsSection.style.transform = settingsIsClosed ? "rotate(180deg)" : "rotate(0deg)";
        settingsSectionTab.style.height = settingsIsClosed ? "44vw" : "7vw";

        settingsIsClosed = !settingsIsClosed;
    });
}

HandleHowToSection();
// -------------------------- Settings tab ---------------------------------------------------------------------

function loadAndModifySettings(modifierCallback) {
    createFileWithArraySettings((err, dataArray) => {
        if (err) {
            WhatIsLoading.textContent = "KERNEL ERROR: NO DATA FOUND!";
            return;
        }
        
        modifierCallback(dataArray);

        saveChangesToFileSettings(dataArray);
    });
}

function setupEventListeners() {
    // Nav icons
    
    var Slider_HUECOLOR = document.getElementById("colorSlider");
    var Slider_SATCOLOR = document.getElementById("saturationSlider");
    var Slider_RGBFACTOR = document.getElementById("rgbSlider");
    var Slider_TRANSFORMROLL = document.getElementById("TransformRollSlider");

    var Checkbox_RGB_TOGGLE = document.getElementById("EnableRGBMode");

    var FlashOpen = false;
    var ShakesOpen = false;
    var AjustmentLayerOpen = false;
    var PreCompOpen = false;
    var StabileCompOpen = false;
    var TranSlideCompOpen = false;

    var Combo_PreComp = document.getElementById("PreCompCOMBO");
    var Combo_AjustmentLayer = document.getElementById("AjustmentCOMBO");
    var Combo_Flash = document.getElementById("FlashCOMBO");
    var Combo_Shakes = document.getElementById("ShakesCOMBO");
    
    var comboAnimation = "height 100ms cubic-bezier(0,1,1,1)"; //"transform " + comboAminSpeed + "ms " + ",height " + comboAminSpeed + "ms " + comboAminCurve + ", overflow-y " + comboAminSpeed + "ms " + comboAminCurve + ", z-index  " + comboAminSpeed + "ms " + comboAminCurve;
    
    // JUST TO COPY OHHHN NEEY -----------------------------
    
    var copyNewDiscordLink = document.getElementById("copyNewDiscordLink");
    copyNewDiscordLink.addEventListener("click", function() {
        
        copyNewDiscordLink.select();
        document.execCommand("copy");

        SendNotification("Discord link has been copyed.");
    });

    // EFFECTS TAB -----------------------------------------

    // [ EFFECT COMBOS ] -----------------------------------------------------------------------------+

    var TranSidedropdown = document.getElementById("TransitionSideCOMBO")
    TranSidedropdown.addEventListener("click", function(event) {
        if (GlobalsCurrentTab != 3) return; if (GlobalsEffectCurrentTab != 1) return;

        comboAnimation = settingsData[0].ui_animation_speed <= 1 ? "none" : "height 100ms cubic-bezier(0,1,1,1)";

        event.stopPropagation();

        TranSidedropdown.style.transition = comboAnimation;
        TranSlideCompOpen = !TranSlideCompOpen;
        if (TranSlideCompOpen)
        {
            TranSidedropdown.classList.remove("drop_down_closed");
            TranSidedropdown.classList.add("drop_down_open");
            TranSidedropdown.scrollTop = 0;
        }
        else
        {
            TranSidedropdown.classList.remove("drop_down_open");
            TranSidedropdown.classList.add("drop_down_closed");
            TranSidedropdown.scrollTop = 0;
        }
        
        loadAndModifySettings(dataArray => {
            var target = event.target;
            if (target.tagName === 'A' && target.getAttribute('data-value') !== null) {
                var previewElement = document.getElementById('TransitionSidePreview');
                previewElement.textContent = target.textContent;
                dataArray[0].effset_ts_slides = target.getAttribute('data-value');
                previewElement.setAttribute('data-value', target.getAttribute('data-value'));
            }
        });
        setTimeout(LoadSettingsFile, 100);
    });
    
    // VALUES
    
    // [ WARP STABILIZER ] -----------------------------------------------------------------------------

    document.getElementById("WarpStabilizer_Detail").addEventListener("click", function() {
        if (GlobalsCurrentTab != 3) return; if (GlobalsEffectCurrentTab != 1) return;
        if (!isClickAllowed) return;
            
        isClickAllowed = false;
        setTimeout(() => {
            isClickAllowed = true;
        }, cooldown);
        
        loadAndModifySettings(dataArray => {
            dataArray[0].effset_ws_detail = !dataArray[0].effset_ws_detail;
            dataArray[0].effset_ws_detail ? CheckboxChecked(this) : CheckboxUnchecked(this);
        });
        setTimeout(LoadSettingsFile, 100);
    });
    
    document.getElementById("WarpStabilizer_smoothness_val").addEventListener('input', function() {
        if (GlobalsCurrentTab != 3) return; if (GlobalsEffectCurrentTab != 1) return;
        loadAndModifySettings(dataArray => {
            dataArray[0].effset_ws_smooth = this.value;
            document.getElementById("WarpStabilizer_smoothness_txt").textContent = "Smoothness: " + this.value;
        });
        setTimeout(LoadSettingsFile, 100);
    });

    var stabildropdown = document.getElementById("WarpStabilizerCOMBO")
    stabildropdown.addEventListener("click", function(event) {
        if (GlobalsCurrentTab != 3) return; if (GlobalsEffectCurrentTab != 1) return;
        if (!isClickAllowed) return;
            
        isClickAllowed = false;
        setTimeout(() => {
            isClickAllowed = true;
        }, cooldown);
        

        comboAnimation = settingsData[0].ui_animation_speed <= 1 ? "none" : "height 100ms cubic-bezier(0,1,1,1)";
        event.stopPropagation();

        stabildropdown.style.transition = comboAnimation;
        StabileCompOpen = !StabileCompOpen;
        if (StabileCompOpen)
        {
            stabildropdown.classList.remove("drop_down_closed");
            stabildropdown.classList.add("drop_down_open");
            stabildropdown.scrollTop = 0;
        }
        else
        {
            stabildropdown.classList.remove("drop_down_open");
            stabildropdown.classList.add("drop_down_closed");
            stabildropdown.scrollTop = 0;
        }

        loadAndModifySettings(dataArray => {
            var target = event.target;
            if (target.tagName === 'A' && target.getAttribute('data-value') !== null) {
                var previewElement = document.getElementById('WarpStabilizerPreview');
                previewElement.textContent = target.textContent;
                dataArray[0].effset_ws_method = target.getAttribute('data-value');
                previewElement.setAttribute('data-value', target.getAttribute('data-value'));
            }
        });
        setTimeout(LoadSettingsFile, 75);
    });
    
    // [ FLASH EFFECT ] -----------------------------------------------------------------------------

    document.getElementById("flashCreateAtCompTime").addEventListener("click", function() {
        if (GlobalsCurrentTab != 3) return; if (GlobalsEffectCurrentTab != 1) return;
        if (!isClickAllowed) return;
            
        isClickAllowed = false;
        setTimeout(() => {
            isClickAllowed = true;
        }, cooldown);
        
        loadAndModifySettings(dataArray => {
            dataArray[0].effset_fl_createt = !dataArray[0].effset_fl_createt;
            dataArray[0].effset_fl_createt ? CheckboxChecked(document.getElementById("flashCreateAtCompTime")) : CheckboxUnchecked(document.getElementById("flashCreateAtCompTime"));
        });
        setTimeout(LoadSettingsFile, 75);
    });
    
    document.getElementById("flashDuration_val").addEventListener('input', function() {
        if (GlobalsCurrentTab != 3) return; if (GlobalsEffectCurrentTab != 1) return;
        loadAndModifySettings(dataArray => {
            dataArray[0].effset_fl_duration = this.value;
            document.getElementById("flashDuration_txt").textContent = "Duration: " + this.value + " frames";
        });
        setTimeout(LoadSettingsFile, 75);
    });

    document.getElementById("flashStrength_val").addEventListener('input', function() {
        if (GlobalsCurrentTab != 3) return; if (GlobalsEffectCurrentTab != 1) return;
        loadAndModifySettings(dataArray => {
            dataArray[0].effset_fl_strength = this.value;
            document.getElementById("flashStrength_txt").textContent = "Strenght: " + this.value + "%";
        });
        setTimeout(LoadSettingsFile, 75);
    });
    
    // SLIDE BARS
    var sidebarIsOpenFlash = false;
    var sidebarIsOpenWarp = false;
    var sidebarIsOpenCamera = false;
    var sidebarIsOpenMotionB = false;

    var sidebarIsOpenWarpEff = false;
    var sidebarIsOpenTimeW = false;
    var sidebarIsOpenTimeD = false;
    var sidebarIsOpenSlide = false;
    var sidebarIsOpenZoomOut = false;
    var sidebarIsOpenZoomIn = false;
    var sidebarIsOpenBlur = false;

    document.getElementById("flashSidebarButton").addEventListener("click", function() {
        if (GlobalsCurrentTab != 3) return; if (GlobalsEffectCurrentTab != 1) return;
        if (!sidebarIsOpenFlash)
        {
            document.getElementById("flashSideBar").style.transform = "scale(1)";
            document.getElementById("flashSideBar").style.opacity = "100%";
        }
        else
        {
            document.getElementById("flashSideBar").style.transform = "scale(0)";
            document.getElementById("flashSideBar").style.opacity = "0%";
        }
        sidebarIsOpenFlash = !sidebarIsOpenFlash;
    });

    document.getElementById("WarpStabilizerSidebarButton").addEventListener("click", function() {
        if (GlobalsCurrentTab != 3) return; if (GlobalsEffectCurrentTab != 1) return;
        if (!sidebarIsOpenWarp)
        {
            document.getElementById("WarpStabilizerSideBar").style.transform = "scale(1)";
            document.getElementById("WarpStabilizerSideBar").style.opacity = "100%";
        }
        else
        {
            document.getElementById("WarpStabilizerSideBar").style.transform ="scale(0)";
            document.getElementById("WarpStabilizerSideBar").style.opacity = "0%";
        }
        sidebarIsOpenWarp = !sidebarIsOpenWarp;
    });

    document.getElementById("CameraTrackerSidebarButton").addEventListener("click", function() {
        if (GlobalsCurrentTab != 3) return; if (GlobalsEffectCurrentTab != 1) return;
        if (!sidebarIsOpenCamera)
        {
            document.getElementById("CameraTrackerSideBar").style.transform = "scale(1)";
            document.getElementById("CameraTrackerSideBar").style.opacity = "100%";
        }
        else
        {
            document.getElementById("CameraTrackerSideBar").style.transform = "scale(0)";
            document.getElementById("CameraTrackerSideBar").style.opacity = "0%";
        }
        sidebarIsOpenCamera = !sidebarIsOpenCamera;
    });

    document.getElementById("ForceMSidebarButton").addEventListener("click", function() {
        if (GlobalsCurrentTab != 3) return; if (GlobalsEffectCurrentTab != 1) return;
        if (!sidebarIsOpenMotionB)
        {
            document.getElementById("ForceMSideBar").style.transform = "scale(1)";
            document.getElementById("ForceMSideBar").style.opacity = "100%";
        }
        else
        {
            document.getElementById("ForceMSideBar").style.transform = "scale(0)";
            document.getElementById("ForceMSideBar").style.opacity = "0%";
        }
        sidebarIsOpenMotionB = !sidebarIsOpenMotionB;
    });

    document.getElementById("WarpSetttingsButton").addEventListener("click", function() {
        if (GlobalsCurrentTab != 3) return; if (GlobalsEffectCurrentTab != 1) return;
        if (!sidebarIsOpenWarpEff)
        {
            document.getElementById("WarpEffSideBar").style.transform = "scale(1)";
            document.getElementById("WarpEffSideBar").style.opacity = "100%";
        }
        else
        {
            document.getElementById("WarpEffSideBar").style.transform = "scale(0)";
            document.getElementById("WarpEffSideBar").style.opacity = "0%";
        }
        sidebarIsOpenWarpEff = !sidebarIsOpenWarpEff;
    });

    document.getElementById("SlideSetttingsButton").addEventListener("click", function() {
        if (GlobalsCurrentTab != 3) return; if (GlobalsEffectCurrentTab != 1) return;
        if (!sidebarIsOpenSlide)
        {
            document.getElementById("SlideSideBar").style.transform = "scale(1)";
            document.getElementById("SlideSideBar").style.opacity = "100%";
        }
        else
        {
            document.getElementById("SlideSideBar").style.transform = "scale(0)";
            document.getElementById("SlideSideBar").style.opacity = "0%";
        }
        sidebarIsOpenSlide = !sidebarIsOpenSlide;
    });

    document.getElementById("ZoomOutSetttingsButton").addEventListener("click", function() {
        if (GlobalsCurrentTab != 3) return; if (GlobalsEffectCurrentTab != 1) return;
        if (!sidebarIsOpenZoomOut)
        {
            document.getElementById("ZoomOutSideBar").style.transform = "scale(1)";
            document.getElementById("ZoomOutSideBar").style.opacity = "100%";
        }
        else
        {
            document.getElementById("ZoomOutSideBar").style.transform = "scale(0)";
            document.getElementById("ZoomOutSideBar").style.opacity = "0%";
        }
        sidebarIsOpenZoomOut = !sidebarIsOpenZoomOut;
    });

    document.getElementById("ZoomInSetttingsButton").addEventListener("click", function() {
        if (GlobalsCurrentTab != 3) return; if (GlobalsEffectCurrentTab != 1) return;
        if (!sidebarIsOpenZoomIn)
        {
            document.getElementById("ZoomInSideBar").style.transform = "scale(1)";
            document.getElementById("ZoomInSideBar").style.opacity = "100%";
        }
        else
        {
            document.getElementById("ZoomInSideBar").style.transform = "scale(0)";
            document.getElementById("ZoomInSideBar").style.opacity = "0%";
        }
        sidebarIsOpenZoomIn = !sidebarIsOpenZoomIn;
    });

    document.getElementById("BlurSetttingsButton").addEventListener("click", function() {
        if (GlobalsCurrentTab != 3) return; if (GlobalsEffectCurrentTab != 1) return;
        if (!sidebarIsOpenBlur)
        {
            document.getElementById("BlurSideBar").style.transform = "scale(1)";
            document.getElementById("BlurSideBar").style.opacity = "100%";
        }
        else
        {
            document.getElementById("BlurSideBar").style.transform = "scale(0)";
            document.getElementById("BlurSideBar").style.opacity = "0%";
        }
        sidebarIsOpenBlur = !sidebarIsOpenBlur;
    });

    document.getElementById("TimeWSetttingsButton").addEventListener("click", function() {
        if (GlobalsCurrentTab != 3) return; if (GlobalsEffectCurrentTab != 1) return;
        if (!sidebarIsOpenTimeW)
        {
            document.getElementById("TimeWEffSideBar").style.transform = "scale(1)";
            document.getElementById("TimeWEffSideBar").style.opacity = "100%";
        }
        else
        {
            document.getElementById("TimeWEffSideBar").style.transform = "scale(0)";
            document.getElementById("TimeWEffSideBar").style.opacity = "0%";
        }
        sidebarIsOpenTimeW = !sidebarIsOpenTimeW;
    });

    document.getElementById("TimeDSetttingsButton").addEventListener("click", function() {
        if (GlobalsCurrentTab != 3) return; if (GlobalsEffectCurrentTab != 1) return;
        if (!sidebarIsOpenTimeD)
        {
            document.getElementById("TimeDEffSideBar").style.transform = "scale(1)";
            document.getElementById("TimeDEffSideBar").style.opacity = "100%";
        }
        else
        {
            document.getElementById("TimeDEffSideBar").style.transform = "scale(0)";
            document.getElementById("TimeDEffSideBar").style.opacity = "0%";
        }
        sidebarIsOpenTimeD = !sidebarIsOpenTimeD;
    });

    // POPUPS -------------------------------------------------
    
    var TranformPopUpOpen = false;
    document.getElementById("TransformSettingsButton").addEventListener("click", function(event) {
        if (GlobalsCurrentTab != 2) return;
        document.getElementById("TransformSettingsPopUp").style.transform = TranformPopUpOpen ? "scale(0)" : "scale(1)";
        TranformPopUpOpen = !TranformPopUpOpen;
    });
    
    var FlashSettingsPopUp = false;
    document.getElementById("FlashSettingsButton").addEventListener("click", function(event) {
        if (GlobalsCurrentTab != 3) return;
        document.getElementById("FlashSettingsPopUp").style.transform = FlashSettingsPopUp ? "scale(0)" : "scale(1)";
        FlashSettingsPopUp = !FlashSettingsPopUp;
    });
    
    var AssetsPopUpOpen = false;
    document.getElementById("AssetsSettingsButton").addEventListener("click", function(event) {
        if (GlobalsCurrentTab != 3) return; if (GlobalsEffectCurrentTab != 3) return;
        document.getElementById("AssetsSettingsPopUp").style.transform = AssetsPopUpOpen ? "scale(0)" : "scale(1)";
        AssetsPopUpOpen = !AssetsPopUpOpen;
    });
    
    var AssetsInfoPopUpOpen = false;
    document.getElementById("AssetsInfoButton").addEventListener("click", function(event) {
        if (GlobalsCurrentTab != 3) return; if (GlobalsEffectCurrentTab != 3) return;
        document.getElementById("AssetInfoPopUp").style.transform = AssetsInfoPopUpOpen ? "scale(0)" : "scale(1)";
        AssetsInfoPopUpOpen = !AssetsInfoPopUpOpen;
    });
    
    var AssetsInfoPopUpOpen2 = false;
    document.getElementById("AssetsInfoButton2").addEventListener("click", function(event) {
        if (GlobalsCurrentTab != 3) return; if (GlobalsEffectCurrentTab != 0) return;
        document.getElementById("AssetInfoPopUp2").style.transform = AssetsInfoPopUpOpen2 ? "scale(0)" : "scale(1)";
        AssetsInfoPopUpOpen2 = !AssetsInfoPopUpOpen2;
    });
    
    var GeneralPopUpOpen = false;
    document.getElementById("GeneralSettingsButton").addEventListener("click", function(event) {
        if (GlobalsCurrentTab != 2) return;
        document.getElementById("GeneralSettingsPopUp").style.transform = GeneralPopUpOpen ? "scale(0)" : "scale(1)";
        GeneralPopUpOpen = !GeneralPopUpOpen;
    });
    
    var DiscordPopUpOpen = false;
    document.getElementById("DiscordLogo").addEventListener("click", function(event) {
        if (GlobalsCurrentTab != 4) return;
        document.getElementById("DiscordPopUp").style.transform = DiscordPopUpOpen ? "scale(0)" : "scale(1)";
        DiscordPopUpOpen = !DiscordPopUpOpen;
    });
    
    /*
    var gameV2 = false;
    document.getElementById("ComplexityLogo").addEventListener("click", function(event) {
        document.getElementById("Game2PopUp").style.transform = gameV2 ? "scale(0)" : "scale(1)";
        gameV2 = !gameV2;
    });
    */
    
    var PurgePopUpOpen = false;
    document.getElementById("GETMETFOUTHERE").addEventListener("click", function(event) {
        if (GlobalsCurrentTab != 4) return;
        document.getElementById("PurgeCacheSettingsPopUp").style.transform = PurgePopUpOpen ? "scale(0)" : "scale(1)";
        PurgePopUpOpen = !PurgePopUpOpen;
    });

    document.getElementById("dontPurge").addEventListener("click", function(event) {
        if (GlobalsCurrentTab != 4) return;
        if (PurgePopUpOpen)
        {
            document.getElementById("PurgeCacheSettingsPopUp").style.transform = "scale(0)";
            PurgePopUpOpen = false;
        }
    });

    // DROPDOWNS -------------------------------------------------

    document.addEventListener("click", function(event) {
        
        if (GlobalsCurrentTab == 3)
        {
            if (sidebarIsOpenFlash)
            {
                if (!document.getElementById("flashSidebarButton").contains(event.target)) {
                    if (!document.getElementById("flashSideBar").contains(event.target)) {
                        document.getElementById("flashSideBar").style.transform = "scale(0)";
                        document.getElementById("flashSideBar").style.opacity =  "0%";
                        sidebarIsOpenFlash = false;
                    }
                }
            }
            
            if (sidebarIsOpenWarp)
            {
                if (!document.getElementById("WarpStabilizerSidebarButton").contains(event.target)) {
                    if (!document.getElementById("WarpStabilizerSideBar").contains(event.target)) {
                        document.getElementById("WarpStabilizerSideBar").style.transform = "scale(0)";
                        document.getElementById("WarpStabilizerSideBar").style.opacity =  "0%";
                        sidebarIsOpenWarp = false;
                    }
                }
            }
            
            if (sidebarIsOpenCamera)
            {
                if (!document.getElementById("CameraTrackerSidebarButton").contains(event.target)) {
                    if (!document.getElementById("CameraTrackerSideBar").contains(event.target)) {
                        document.getElementById("CameraTrackerSideBar").style.transform = "scale(0)";
                        document.getElementById("CameraTrackerSideBar").style.opacity =  "0%";
                        sidebarIsOpenCamera = false;
                    }
                }
            }
            
            if (sidebarIsOpenMotionB)
            {
                if (!document.getElementById("ForceMSidebarButton").contains(event.target)) {
                    if (!document.getElementById("ForceMSideBar").contains(event.target)) {
                        document.getElementById("ForceMSideBar").style.transform = "scale(0)";
                        document.getElementById("ForceMSideBar").style.opacity =  "0%";
                        sidebarIsOpenMotionB = false;
                    }
                }
            }
            
            if (sidebarIsOpenWarpEff)
            {
                if (!document.getElementById("WarpSetttingsButton").contains(event.target)) {
                    if (!document.getElementById("WarpEffSideBar").contains(event.target)) {
                        document.getElementById("WarpEffSideBar").style.transform = "scale(0)";
                        document.getElementById("WarpEffSideBar").style.opacity =  "0%";
                        sidebarIsOpenWarpEff = false;
                    }
                }
            }
            
            if (sidebarIsOpenSlide)
            {
                if (!document.getElementById("SlideSetttingsButton").contains(event.target)) {
                    if (!document.getElementById("SlideSideBar").contains(event.target)) {
                        document.getElementById("SlideSideBar").style.transform = "scale(0)";
                        document.getElementById("SlideSideBar").style.opacity =  "0%";
                        sidebarIsOpenSlide = false;
                    }
                }
            }
            
            if (sidebarIsOpenZoomOut)
            {
                if (!document.getElementById("ZoomOutSetttingsButton").contains(event.target)) {
                    if (!document.getElementById("ZoomOutSideBar").contains(event.target)) {
                        document.getElementById("ZoomOutSideBar").style.transform = "scale(0)";
                        document.getElementById("ZoomOutSideBar").style.opacity =  "0%";
                        sidebarIsOpenZoomOut = false;
                    }
                }
            }
            
            if (sidebarIsOpenZoomIn)
            {
                if (!document.getElementById("ZoomInSetttingsButton").contains(event.target)) {
                    if (!document.getElementById("ZoomInSideBar").contains(event.target)) {
                        document.getElementById("ZoomInSideBar").style.transform = "scale(0)";
                        document.getElementById("ZoomInSideBar").style.opacity =  "0%";
                        sidebarIsOpenZoomIn = false;
                    }
                }
            }
                       
            if (sidebarIsOpenBlur)
            {
                if (!document.getElementById("BlurSetttingsButton").contains(event.target)) {
                    if (!document.getElementById("BlurSideBar").contains(event.target)) {
                        document.getElementById("BlurSideBar").style.transform = "scale(0)";
                        document.getElementById("BlurSideBar").style.opacity =  "0%";
                        sidebarIsOpenBlur = false;
                    }
                }
            }
                        
            if (sidebarIsOpenTimeW)
            {
                if (!document.getElementById("TimeWSetttingsButton").contains(event.target)) {
                    if (!document.getElementById("TimeWEffSideBar").contains(event.target)) {
                        document.getElementById("TimeWEffSideBar").style.transform = "scale(0)";
                        document.getElementById("TimeWEffSideBar").style.opacity =  "0%";
                        sidebarIsOpenTimeW = false;
                    }
                }
            }
                        
            if (sidebarIsOpenTimeD)
            {
                if (!document.getElementById("TimeDSetttingsButton").contains(event.target)) {
                    if (!document.getElementById("TimeDEffSideBar").contains(event.target)) {
                        document.getElementById("TimeDEffSideBar").style.transform = "scale(0)";
                        document.getElementById("TimeDEffSideBar").style.opacity =  "0%";
                        sidebarIsOpenTimeD = false;
                    }
                }
            }
            
            if (!stabildropdown.contains(event.target)) {
                stabildropdown.classList.remove("drop_down_open");
                stabildropdown.classList.add("drop_down_closed");
                stabildropdown.scrollTop = 0;
                StabileCompOpen = false;
            }
    
            if (!TranSidedropdown.contains(event.target)) {
                TranSidedropdown.classList.remove("drop_down_open");
                TranSidedropdown.classList.add("drop_down_closed");
                TranSidedropdown.scrollTop = 0;
                TranSlideCompOpen = false;
            }
            
        }

        if (GlobalsCurrentTab == 2)
        {
            if (TranformPopUpOpen)
            {
                if (!document.getElementById("TransformSettingsButton").contains(event.target)) {
                    if (!document.getElementById("TransformSettingsPopUp").contains(event.target)) {
                        document.getElementById("TransformSettingsPopUp").style.transform =  "scale(0)";
                        TranformPopUpOpen = false;
                    }
                }
            }

            if (GeneralPopUpOpen)
            {
                if (!document.getElementById("GeneralSettingsButton").contains(event.target)) {
                    if (!document.getElementById("GeneralSettingsPopUp").contains(event.target)) {
                        document.getElementById("GeneralSettingsPopUp").style.transform =  "scale(0)";
                        GeneralPopUpOpen = false;
                    }
                }
            }
        }

        if (GlobalsCurrentTab == 3)
        {
            if (AssetsInfoPopUpOpen)
            {
                if (!document.getElementById("AssetsInfoButton").contains(event.target)) {
                    if (!document.getElementById("AssetInfoPopUp").contains(event.target)) {
                        document.getElementById("AssetInfoPopUp").style.transform =  "scale(0)";
                        AssetsInfoPopUpOpen = false;
                    }
                }
            }

            if (AssetsInfoPopUpOpen2)
            {
                if (!document.getElementById("AssetsInfoButton2").contains(event.target)) {
                    if (!document.getElementById("AssetInfoPopUp2").contains(event.target)) {
                        document.getElementById("AssetInfoPopUp2").style.transform =  "scale(0)";
                        AssetsInfoPopUpOpen2 = false;
                    }
                }
            }

            if (AssetsPopUpOpen)
            {
                if (!document.getElementById("AssetsSettingsButton").contains(event.target)) {
                    if (!document.getElementById("AssetsSettingsPopUp").contains(event.target)) {
                        document.getElementById("AssetsSettingsPopUp").style.transform =  "scale(0)";
                        AssetsPopUpOpen = false;
                    }
                }
            }

            if (FlashSettingsPopUp)
            {
                if (!document.getElementById("FlashSettingsButton").contains(event.target)) {
                    if (!document.getElementById("FlashSettingsPopUp").contains(event.target)) {
                        document.getElementById("FlashSettingsPopUp").style.transform =  "scale(0)";
                        FlashSettingsPopUp = false;
                    }
                }
            }
        }

        if (GlobalsCurrentTab == 4)
        {
            if (PurgePopUpOpen)
            {
                if (!document.getElementById("GETMETFOUTHERE").contains(event.target)) {
                    if (!document.getElementById("PurgeCacheSettingsPopUp").contains(event.target)) {
                        document.getElementById("PurgeCacheSettingsPopUp").style.transform =  "scale(0)";
                        PurgePopUpOpen = false;
                    }
                }
            }

            if (DiscordPopUpOpen)
            {
                if (!document.getElementById("DiscordLogo").contains(event.target)) {
                    if (!document.getElementById("DiscordPopUp").contains(event.target)) {
                        document.getElementById("DiscordPopUp").style.transform =  "scale(0)";
                        DiscordPopUpOpen = false;
                    }
                }
            }

            /*
            if (gameV2)
            {
                if (!document.getElementById("ComplexityLogo").contains(event.target)) {
                    if (!document.getElementById("Game2PopUp").contains(event.target)) {
                        document.getElementById("Game2PopUp").style.transform =  "scale(0)";
                        gameV2 = false;
                    }
                }
            }
            */

            if (!Combo_PreComp.contains(event.target)) {
                Combo_PreComp.classList.remove("drop_down_open_long");
                Combo_PreComp.classList.add("drop_down_closed");
                Combo_PreComp.scrollTop = 0;
                PreCompOpen = false;
            }
    
            if (!Combo_AjustmentLayer.contains(event.target)) {
                Combo_AjustmentLayer.classList.remove("drop_down_open_long");
                Combo_AjustmentLayer.classList.add("drop_down_closed");
                Combo_AjustmentLayer.scrollTop = 0;
                AjustmentLayerOpen = false;
            }
    
            if (!Combo_Flash.contains(event.target)) {
                Combo_Flash.classList.remove("drop_down_open_long");
                Combo_Flash.classList.add("drop_down_closed");
                Combo_Flash.scrollTop = 0;
                FlashOpen = false;
            }
    
            if (!Combo_Shakes.contains(event.target)) {
                Combo_Shakes.classList.remove("drop_down_open_long");
                Combo_Shakes.classList.add("drop_down_closed");
                Combo_Shakes.scrollTop = 0;
                ShakesOpen = false;
            }
        }        
    });

    // PRECOMP
    Combo_PreComp.addEventListener("click", function(event) {
        if (GlobalsCurrentTab != 4) return;
        if (!isClickAllowed) return;
            
        isClickAllowed = false;
        setTimeout(() => {
            isClickAllowed = true;
        }, cooldown);
        

        comboAnimation = settingsData[0].ui_animation_speed <= 1 ? "none" : "height 100ms cubic-bezier(0,1,1,1)";
        event.stopPropagation();

        Combo_PreComp.style.transition = comboAnimation;
        PreCompOpen = !PreCompOpen;
        if (PreCompOpen)
        {
            Combo_PreComp.classList.remove("drop_down_closed");
            Combo_PreComp.classList.add("drop_down_open_long");
            
            // Return
            Combo_AjustmentLayer.classList.remove("drop_down_open_long");
            Combo_AjustmentLayer.classList.add("drop_down_closed");
            Combo_Flash.classList.remove("drop_down_open_long");
            Combo_Flash.classList.add("drop_down_closed");
            Combo_Shakes.classList.remove("drop_down_open_long");
            Combo_Shakes.classList.add("drop_down_closed");
            
            AjustmentLayerOpen = false;
            FlashOpen = false;
            ShakesOpen = false;
            Combo_AjustmentLayer.scrollTop = 0;
            Combo_Flash.scrollTop = 0;
            Combo_Shakes.scrollTop = 0;
            Combo_PreComp.scrollTop = 0;
        }
        else
        {
            Combo_PreComp.classList.remove("drop_down_open_long");
            Combo_PreComp.classList.add("drop_down_closed");
            Combo_PreComp.scrollTop = 0;
        }

        loadAndModifySettings(dataArray => {
            var target = event.target;
            if (target.tagName === 'A' && target.getAttribute('data-value') !== null) {
                var previewElement = document.getElementById('PreCompPreview');
                previewElement.textContent = target.textContent;
                dataArray[0].color_precomp = target.getAttribute('data-value');
                previewElement.setAttribute('data-value', target.getAttribute('data-value'));
            }
        });
        setTimeout(LoadSettingsFile, 100);
    });
    
    // ADJUST
    Combo_AjustmentLayer.addEventListener("click", function(event) {
        if (GlobalsCurrentTab != 4) return;
        if (!isClickAllowed) return;
            
        isClickAllowed = false;
        setTimeout(() => {
            isClickAllowed = true;
        }, cooldown);
        

        comboAnimation = settingsData[0].ui_animation_speed <= 1 ? "none" : "height 100ms cubic-bezier(0,1,1,1)";
        Combo_AjustmentLayer.style.transition = comboAnimation;
        AjustmentLayerOpen = !AjustmentLayerOpen;
        if (AjustmentLayerOpen)
        {
            Combo_AjustmentLayer.classList.remove("drop_down_closed");
            Combo_AjustmentLayer.classList.add("drop_down_open_long");

            // Return
            Combo_PreComp.classList.remove("drop_down_open_long");
            Combo_PreComp.classList.add("drop_down_closed");
            Combo_Flash.classList.remove("drop_down_open_long");
            Combo_Flash.classList.add("drop_down_closed");
            Combo_Shakes.classList.remove("drop_down_open_long");
            Combo_Shakes.classList.add("drop_down_closed");

            PreCompOpen = false;
            FlashOpen = false;
            ShakesOpen = false;
            Combo_AjustmentLayer.scrollTop = 0;
            Combo_Flash.scrollTop = 0;
            Combo_Shakes.scrollTop = 0;
            Combo_PreComp.scrollTop = 0;
        }
        else
        {
            Combo_AjustmentLayer.classList.remove("drop_down_open_long");
            Combo_AjustmentLayer.classList.add("drop_down_closed");
            Combo_AjustmentLayer.scrollTop = 0;
        }
        loadAndModifySettings(dataArray => {
            var target = event.target;
            if (target.tagName === 'A' && target.getAttribute('data-value') !== null) {
                var previewElement = document.getElementById('AdjustPreview');
                previewElement.textContent = target.textContent;
                dataArray[0].color_ajust = target.getAttribute('data-value');
                previewElement.setAttribute('data-value', target.getAttribute('data-value'));
            }
        });
        setTimeout(LoadSettingsFile, 100);
    });

    // Flash
    Combo_Flash.addEventListener("click", function(event) {
        if (GlobalsCurrentTab != 4) return;
        if (!isClickAllowed) return;
            
        isClickAllowed = false;
        setTimeout(() => {
            isClickAllowed = true;
        }, cooldown);
        

        comboAnimation = settingsData[0].ui_animation_speed <= 1 ? "none" : "height 100ms cubic-bezier(0,1,1,1)";
        Combo_Flash.style.transition = comboAnimation;
        FlashOpen = !FlashOpen;
        if (FlashOpen)
        {
            Combo_Flash.classList.remove("drop_down_closed");
            Combo_Flash.classList.add("drop_down_open_long");

            // Return
            Combo_PreComp.classList.remove("drop_down_open_long");
            Combo_AjustmentLayer.classList.remove("drop_down_open_long");
            Combo_PreComp.classList.add("drop_down_closed");
            Combo_AjustmentLayer.classList.add("drop_down_closed");
            Combo_Shakes.classList.remove("drop_down_open_long");
            Combo_Shakes.classList.add("drop_down_closed");

            AjustmentLayerOpen = false;
            PreCompOpen = false;
            ShakesOpen = false;
            Combo_AjustmentLayer.scrollTop = 0;
            Combo_Flash.scrollTop = 0;
            Combo_Shakes.scrollTop = 0;
            Combo_PreComp.scrollTop = 0;
        }
        else
        {
            Combo_Flash.classList.remove("drop_down_open_long");
            Combo_Flash.classList.add("drop_down_closed");
            Combo_Flash.scrollTop = 0;
        }
        loadAndModifySettings(dataArray => {
            var target = event.target;
            if (target.tagName === 'A' && target.getAttribute('data-value') !== null) {
                var previewElement = document.getElementById('FlashPreview');
                previewElement.textContent = target.textContent;
                dataArray[0].color_flash = target.getAttribute('data-value');
                previewElement.setAttribute('data-value', target.getAttribute('data-value'));
            }
        });
        setTimeout(LoadSettingsFile, 100);
    });

    // Shakes
    Combo_Shakes.addEventListener("click", function(event) {
        if (GlobalsCurrentTab != 4) return;
        if (!isClickAllowed) return;
            
        isClickAllowed = false;
        setTimeout(() => {
            isClickAllowed = true;
        }, cooldown);
        

        comboAnimation = settingsData[0].ui_animation_speed <= 1 ? "none" : "height 100ms cubic-bezier(0,1,1,1)";
        Combo_Shakes.style.transition = comboAnimation;
        ShakesOpen = !ShakesOpen;
        if (ShakesOpen)
        {
            Combo_Shakes.classList.remove("drop_down_closed");
            Combo_Shakes.classList.add("drop_down_open_long");

            // Return
            Combo_PreComp.classList.remove("drop_down_open_long");
            Combo_AjustmentLayer.classList.remove("drop_down_open_long");
            Combo_PreComp.classList.add("drop_down_closed");
            Combo_AjustmentLayer.classList.add("drop_down_closed");
            Combo_Flash.classList.remove("drop_down_open_long");
            Combo_Flash.classList.add("drop_down_closed");

            AjustmentLayerOpen = false;
            PreCompOpen = false;
            FlashOpen = false;
            Combo_AjustmentLayer.scrollTop = 0;
            Combo_Flash.scrollTop = 0;
            Combo_Shakes.scrollTop = 0;
            Combo_PreComp.scrollTop = 0;
        }
        else
        {
            Combo_Shakes.classList.remove("drop_down_open_long");
            Combo_Shakes.classList.add("drop_down_closed");
            Combo_Shakes.scrollTop = 0;
        }
        loadAndModifySettings(dataArray => {
            var target = event.target;
            if (target.tagName === 'A' && target.getAttribute('data-value') !== null) {
                var previewElement = document.getElementById('ShakesPreview');
                previewElement.textContent = target.textContent;
                dataArray[0].color_shakes = target.getAttribute('data-value');
                previewElement.setAttribute('data-value', target.getAttribute('data-value'));
            }
        });
        setTimeout(LoadSettingsFile, 100);
    });

    // SLIDER -------------------------------------------------
    
    // HUE -----------------
    Slider_HUECOLOR.addEventListener('input', function() {
        if (GlobalsCurrentTab != 4) return;
        settingsData[0].ui_color_hue = this.value;
        document.getElementById('ColorPicker').style.marginLeft = `calc(0.5vh + 94.5% * ${this.value / 360})`;
        document.getElementById("sliderStatusHue").textContent = `UI color: ${this.value}`;
        
        applyHueRotation(this.value, settingsData[0].ui_color_sat);
    });

    Slider_HUECOLOR.addEventListener('change', function() {
        if (GlobalsCurrentTab != 4) return;
        loadAndModifySettings(dataArray => {
            dataArray[0].ui_color_hue = this.value;
        });
    });

    // SAT -----------------
    Slider_SATCOLOR.addEventListener('input', function() {
        if (GlobalsCurrentTab != 4) return;
        settingsData[0].ui_color_sat = this.value;
        document.getElementById('ColorPickerForSat').style.marginLeft = `calc(0.5vh + 94.5% * ${this.value / 100})`;
        document.getElementById("sliderStatusSat").textContent = `UI saturation: ${this.value}`;
        
        applyHueRotation(settingsData[0].ui_color_hue, this.value);
    });

    Slider_SATCOLOR.addEventListener('change', function() {
        if (GlobalsCurrentTab != 4) return;
        loadAndModifySettings(dataArray => {
            dataArray[0].ui_color_sat = this.value;
        });
    });

    // RGB FAC -----------------
    Slider_RGBFACTOR.addEventListener('input', function() {
        if (GlobalsCurrentTab != 4) return;
        settingsData[0].ui_rgb_mode_factor = this.value;
        document.getElementById("EnableRGBMode").textContent = "Enable RGB mode (" + this.value + "ms)";
    });
    
    Slider_RGBFACTOR.addEventListener('change', function() {
        if (GlobalsCurrentTab != 4) return;
        loadAndModifySettings(dataArray => {
            dataArray[0].ui_rgb_mode_factor = this.value;
        });
    });
    
    // ROTATION -----------------
    Slider_TRANSFORMROLL.addEventListener('input', function() {
        if (GlobalsCurrentTab != 2) return;
        settingsData[0].transform_rotate = this.value;
        document.getElementById("transformRollStatus").textContent = "Transform rotate angle: " + this.value + "\u00B0";
        document.getElementById("Rotate_minus").textContent = "Rotate -" + this.value +"\u00B0";
        document.getElementById("Rotate_plus").textContent = "Rotate +" + this.value + "\u00B0";
    });
    
    Slider_TRANSFORMROLL.addEventListener('change', function() {
        if (GlobalsCurrentTab != 2) return;
        loadAndModifySettings(dataArray => {
            dataArray[0].transform_rotate = this.value;
        });
    });
    
    
    // Game vol -----------------
    document.getElementById("gameVol_var").addEventListener('input', function() {
        if (GlobalsCurrentTab != 5) return;
        settingsData[0].gameOneVolume = this.value;
        document.getElementById("gameVol_txt").textContent = "Game volume: " + this.value +"%";
    });

    document.getElementById("gameVol_var").addEventListener('change', function() {
        if (GlobalsCurrentTab != 5) return;
        loadAndModifySettings(dataArray => {
            dataArray[0].gameOneVolume = this.value;
        });
    });

    // Track points -----------------
    document.getElementById("trackpointSize_val").addEventListener('input', function() {
        if (GlobalsCurrentTab != 3) return; if (GlobalsEffectCurrentTab != 1) return;
        settingsData[0].effset_ct_points = this.value;
        document.getElementById("trackpointSize_txt").textContent = "Track Point Size: " + this.value + "%";
    });
    
    document.getElementById("trackpointSize_val").addEventListener('change', function() {
        if (GlobalsCurrentTab != 3) return; if (GlobalsEffectCurrentTab != 1) return;
        loadAndModifySettings(dataArray => {
            dataArray[0].effset_ct_points = this.value;
        });
    });

    // Animation speed -----------------
    document.getElementById("AnimSpeed_val").addEventListener('input', function() {
        if (GlobalsCurrentTab != 4) return;
        settingsData[0].ui_animation_speed = this.value;
        switch(Math.round(this.value))
        {
            case 0:
                document.getElementById("AnimSpeed_txt").textContent = "Animation are deactivated";
                break;
            case 175:
                document.getElementById("AnimSpeed_txt").textContent = "Animation Speed: " + this.value + "ms (Default)";
                break;
            default:
                document.getElementById("AnimSpeed_txt").textContent = "Animation Speed: " + this.value + "ms";
        }
    });

    document.getElementById("AnimSpeed_val").addEventListener('change', function() {
        if (GlobalsCurrentTab != 4) return;
        Bruh(this.value);
        loadAndModifySettings(dataArray => {
            dataArray[0].ui_animation_speed = this.value;
        });
    });

    // Force motion B -----------------
    document.getElementById("forceM_val").addEventListener('input', function() {
        if (GlobalsCurrentTab != 3) return; if (GlobalsEffectCurrentTab != 1) return;
        settingsData[0].effset_mb_points = this.value;
        document.getElementById("forceM_txt").textContent = "Motion Blur Samples: " + this.value;
    });
    
    document.getElementById("forceM_val").addEventListener('change', function() {
        if (GlobalsCurrentTab != 3) return; if (GlobalsEffectCurrentTab != 1) return;
        loadAndModifySettings(dataArray => {
            dataArray[0].effset_mb_points = this.value;
        });
    });
    
    // Blur transion -----------------
    // blurriness
    document.getElementById("BlurrinessLenght_val").addEventListener('input', function() {
        if (GlobalsCurrentTab != 3) return; if (GlobalsEffectCurrentTab != 1) return;
        settingsData[0].effset_bl_blurriness = this.value;
        document.getElementById("BlurrinessLenght_txt").textContent = "Blurriness: " + this.value;
    });
    
    document.getElementById("BlurrinessLenght_val").addEventListener('change', function() {
        if (GlobalsCurrentTab != 3) return; if (GlobalsEffectCurrentTab != 1) return;
        loadAndModifySettings(dataArray => {
            dataArray[0].effset_bl_blurriness = this.value;
        });
    });
    
    // Blur length
    document.getElementById("BlurLenght_val").addEventListener('input', function() {
        if (GlobalsCurrentTab != 3) return; if (GlobalsEffectCurrentTab != 1) return;
        settingsData[0].effset_bl_length = this.value;
        document.getElementById("BlurLenght_txt").textContent = "Layer Length: " + this.value + " Frames";
    });
    
    document.getElementById("BlurLenght_val").addEventListener('change', function() {
        if (GlobalsCurrentTab != 3) return; if (GlobalsEffectCurrentTab != 1) return;
        loadAndModifySettings(dataArray => {
            dataArray[0].effset_bl_length = this.value;
        });
    });
    

    // Ich bringe mich um Bitte

    document.getElementById("WarpEffLenght_val").addEventListener('input', function() {
        if (GlobalsCurrentTab != 3) return; if (GlobalsEffectCurrentTab != 1) return;
        settingsData[0].effset_ts_Wlengh = this.value;
        document.getElementById("WarpEffLenght_txt").textContent = "Layer length: " + this.value + " Frames";
    });

    document.getElementById("TimeWEffLenght_val").addEventListener('input', function() {
        if (GlobalsCurrentTab != 3) return; if (GlobalsEffectCurrentTab != 1) return;
        settingsData[0].effset_ts_TWlengh = this.value;
        document.getElementById("TimeWEffLenght_txt").textContent = "Layer length: " + this.value + " Frames";
    });

    document.getElementById("TimeDEffLenght_val").addEventListener('input', function() {
        if (GlobalsCurrentTab != 3) return; if (GlobalsEffectCurrentTab != 1) return;
        settingsData[0].effset_ts_TDlengh = this.value;
        document.getElementById("TimeDEffLenght_txt").textContent = "Layer length: " + this.value + " Frames";
    });

    document.getElementById("SlideLenght_val").addEventListener('input', function() {
        if (GlobalsCurrentTab != 3) return; if (GlobalsEffectCurrentTab != 1) return;
        settingsData[0].effset_ts_Slengh = this.value;
        document.getElementById("SlideLenght_txt").textContent = "Layer length: " + this.value + " Frames";
    });

    document.getElementById("ZoomOutLenght_val").addEventListener('input', function() {
        if (GlobalsCurrentTab != 3) return; if (GlobalsEffectCurrentTab != 1) return;
        settingsData[0].effset_ts_Z1lengh = this.value;
        document.getElementById("ZoomOutLenght_txt").textContent = "Layer length: " + this.value + " Frames";
    });

    document.getElementById("ZoomInLenght_val").addEventListener('input', function() {
        if (GlobalsCurrentTab != 3) return; if (GlobalsEffectCurrentTab != 1) return;
        settingsData[0].effset_ts_Z2lengh = this.value;
        document.getElementById("ZoomInLenght_txt").textContent = "Layer length: " + this.value + " Frames";
    });
    
    // Ich bringe mich um Bitte 2 --------------------------------------------------------------------------------

    document.getElementById("WarpEffLenght_val").addEventListener('change', function() {
        if (GlobalsCurrentTab != 3) return; if (GlobalsEffectCurrentTab != 1) return;
        loadAndModifySettings(dataArray => {
            dataArray[0].effset_ts_Wlengh = this.value;
        });
    });

    document.getElementById("TimeWEffLenght_val").addEventListener('change', function() {
        if (GlobalsCurrentTab != 3) return; if (GlobalsEffectCurrentTab != 1) return;
        loadAndModifySettings(dataArray => {
            dataArray[0].effset_ts_TWlengh = this.value;
        });
    });

    document.getElementById("TimeDEffLenght_val").addEventListener('change', function() {
        if (GlobalsCurrentTab != 3) return; if (GlobalsEffectCurrentTab != 1) return;
        loadAndModifySettings(dataArray => {
            dataArray[0].effset_ts_TDlengh = this.value;
        });
    });

    document.getElementById("SlideLenght_val").addEventListener('change', function() {
        if (GlobalsCurrentTab != 3) return; if (GlobalsEffectCurrentTab != 1) return;
        loadAndModifySettings(dataArray => {
            dataArray[0].effset_ts_Slengh = this.value;
        });
    });

    document.getElementById("ZoomOutLenght_val").addEventListener('change', function() {
        if (GlobalsCurrentTab != 3) return; if (GlobalsEffectCurrentTab != 1) return;
        loadAndModifySettings(dataArray => {
            dataArray[0].effset_ts_Z1lengh = this.value;
        });
    });

    document.getElementById("ZoomInLenght_val").addEventListener('change', function() {
        if (GlobalsCurrentTab != 3) return; if (GlobalsEffectCurrentTab != 1) return;
        loadAndModifySettings(dataArray => {
            dataArray[0].effset_ts_Z2lengh = this.value;
        });
    });

    // CHECKBOX ------------------------------------------------- ui_disable_nav_icon_animation

    Checkbox_RGB_TOGGLE.addEventListener("click", function() {
        if (GlobalsCurrentTab != 4) return;
        if (!isClickAllowed) return; isClickAllowed = false; setTimeout(() => { isClickAllowed = true; }, cooldown);
        
        loadAndModifySettings(dataArray => {
            dataArray[0].ui_rgb_mode = !dataArray[0].ui_rgb_mode;
            dataArray[0].ui_rgb_mode ? CheckboxChecked(Checkbox_RGB_TOGGLE) : CheckboxUnchecked(Checkbox_RGB_TOGGLE);

            Slider_HUECOLOR.disabled = dataArray[0].ui_rgb_mode;
            Slider_HUECOLOR.style.opacity = dataArray[0].ui_rgb_mode ? "50%" : "100%";
            document.getElementById("sliderStatusHue").style.opacity = dataArray[0].ui_rgb_mode ? "50%" : "100%";
            
            Slider_RGBFACTOR.disabled = !dataArray[0].ui_rgb_mode;
            Slider_RGBFACTOR.style.opacity = dataArray[0].ui_rgb_mode ? "100%" : "50%";
            // document.getElementById("sliderStatusRGB").style.opacity = dataArray[0].ui_rgb_mode ? "100%" : "50%";
        });
        setTimeout(LoadSettingsFile, 75);
    });

    document.getElementById("DisableAnimationsNav").addEventListener("click", function() {
        if (GlobalsCurrentTab != 4) return;
        if (!isClickAllowed) return; isClickAllowed = false; setTimeout(() => { isClickAllowed = true; }, cooldown);
        
        loadAndModifySettings(dataArray => {
            dataArray[0].ui_disable_nav_icon_animation = !dataArray[0].ui_disable_nav_icon_animation;
            removeOldIcons_both();
            NavIconSwitch(GlobalsCurrentTab, dataArray[0].ui_disable_nav_icon_animation);
            for (var i = 0; i < document.getElementsByClassName("eff_shk_icon").length; i++) {
                document.getElementsByClassName("eff_shk_icon")[i].style.backgroundImage=  !dataArray[0].ui_disable_nav_icon_animation ? 'url("resources/settingsButton.gif")' : 'url("resources/settingsButton.png")';
            }
            for (var i = 0; i < document.getElementsByClassName("settingsButton").length; i++) {
                document.getElementsByClassName("settingsButton")[i].style.backgroundImage=  !dataArray[0].ui_disable_nav_icon_animation ? 'url("resources/settingsButton.gif")' : 'url("resources/settingsButton.png")';
            }
            dataArray[0].ui_disable_nav_icon_animation ? CheckboxChecked(this) : CheckboxUnchecked(this);
        });

        setTimeout(LoadSettingsFile, 75);
    });

    document.getElementById("AdjustmentLayerPrecut").addEventListener("click", function() {
        if (GlobalsCurrentTab != 2) return;
        if (!isClickAllowed) return; isClickAllowed = false; setTimeout(() => { isClickAllowed = true; }, cooldown);
        
        loadAndModifySettings(dataArray => {
            dataArray[0].general_adjust = !dataArray[0].general_adjust;
            dataArray[0].general_adjust ? CheckboxChecked(this) : CheckboxUnchecked(this);
        });

        setTimeout(LoadSettingsFile, 75);
    });

    document.getElementById("PreCompPrecut").addEventListener("click", function() {
        if (GlobalsCurrentTab != 2) return;
        if (!isClickAllowed) return; isClickAllowed = false; setTimeout(() => { isClickAllowed = true; }, cooldown);
        
        loadAndModifySettings(dataArray => {
            dataArray[0].general_precomp = !dataArray[0].general_precomp;
            dataArray[0].general_precomp ? CheckboxChecked(this) : CheckboxUnchecked(this);
        });

        setTimeout(LoadSettingsFile, 75);
    });
    
    document.getElementById("flashblendmode").addEventListener("click", function() {
        if (GlobalsCurrentTab != 3) return; if (GlobalsEffectCurrentTab != 1) return;
        if (!isClickAllowed) return; isClickAllowed = false; setTimeout(() => { isClickAllowed = true; }, cooldown);
        
        loadAndModifySettings(dataArray => {
            dataArray[0].effset_fl_blendmode = !dataArray[0].effset_fl_blendmode;
            dataArray[0].effset_fl_blendmode ? CheckboxChecked(this) : CheckboxUnchecked(this);
        });

        setTimeout(LoadSettingsFile, 75);
    });
    
    document.getElementById("CameraTrack_Detail").addEventListener("click", function() {
        if (GlobalsCurrentTab != 3) return; if (GlobalsEffectCurrentTab != 1) return;
        if (!isClickAllowed) return; isClickAllowed = false; setTimeout(() => { isClickAllowed = true; }, cooldown);
        
        loadAndModifySettings(dataArray => {
            dataArray[0].effset_ct_detail = !dataArray[0].effset_ct_detail;
            dataArray[0].effset_ct_detail ? CheckboxChecked(this) : CheckboxUnchecked(this);
        });

        setTimeout(LoadSettingsFile, 75);
    });
    
    document.getElementById("AddFlashToAllShakes").addEventListener("click", function() {
        if (GlobalsCurrentTab != 3) return; if (GlobalsEffectCurrentTab != 2) return;
        if (!isClickAllowed) return; isClickAllowed = false; setTimeout(() => { isClickAllowed = true; }, cooldown);
        
        loadAndModifySettings(dataArray => {
            dataArray[0].shakes_add_flash = !dataArray[0].shakes_add_flash;
            dataArray[0].shakes_add_flash ? CheckboxChecked(this) : CheckboxUnchecked(this);
        });
        
        setTimeout(LoadSettingsFile, 75);
    });
        
    document.getElementById("CreateAtCompTime").addEventListener("click", function() {
        if (GlobalsCurrentTab != 3) return; if (GlobalsEffectCurrentTab != 2) return;
        if (!isClickAllowed) return; isClickAllowed = false; setTimeout(() => { isClickAllowed = true; }, cooldown);
        
        loadAndModifySettings(dataArray => {
            dataArray[0].shakes_add_ctime = !dataArray[0].shakes_add_ctime;
            dataArray[0].shakes_add_ctime ? CheckboxChecked(this) : CheckboxUnchecked(this);
        });
        
        setTimeout(LoadSettingsFile, 75);
    });
    
    document.getElementById("Shakeflashblendmode").addEventListener("click", function() {
        if (GlobalsCurrentTab != 3) return; if (GlobalsEffectCurrentTab != 2) return;
        if (!isClickAllowed) return; isClickAllowed = false; setTimeout(() => { isClickAllowed = true; }, cooldown);
        
        loadAndModifySettings(dataArray => {
            dataArray[0].shakes_add_flash_blen = !dataArray[0].shakes_add_flash_blen;
            dataArray[0].shakes_add_flash_blen ? CheckboxChecked(this) : CheckboxUnchecked(this);
        });

        setTimeout(LoadSettingsFile, 75);
    });
    
    // Shakes Speed Length -----------------
    document.getElementById("ShakeSpeedLength_val").addEventListener('input', function() {
        if (GlobalsCurrentTab != 3) return; if (GlobalsEffectCurrentTab != 2) return;
        settingsData[0].shakes_speed = this.value;
        if (Math.round(this.value) == 100)
            document.getElementById("ShakeSpeedLength_txt").textContent = "Speed: " + this.value + "% (Default)";
        else
            document.getElementById("ShakeSpeedLength_txt").textContent = "Speed: " + this.value + "%";
    });
    
    document.getElementById("ShakeSpeedLength_val").addEventListener('change', function() {
        if (GlobalsCurrentTab != 3) return; if (GlobalsEffectCurrentTab != 2) return;
        loadAndModifySettings(dataArray => {
            dataArray[0].shakes_speed = this.value;
        });
    });
    
    // Shakes Stregth -----------------
    document.getElementById("ShakeStrength_val").addEventListener('input', function() {
        if (GlobalsCurrentTab != 3) return; if (GlobalsEffectCurrentTab != 2) return;
        settingsData[0].shakes_strength = this.value;
        if (Math.round(this.value) === 100)
            document.getElementById("ShakeStrength_txt").textContent = "Strenght: " + this.value + "% (Default)";
        else
            document.getElementById("ShakeStrength_txt").textContent = "Strenght: " + this.value + "%";
    });
    
    document.getElementById("ShakeStrength_val").addEventListener('change', function() {
        if (GlobalsCurrentTab != 3) return; if (GlobalsEffectCurrentTab != 2) return;
        loadAndModifySettings(dataArray => {
            dataArray[0].shakes_strength = this.value;
        });
    }); 

    // Shakes Flash Length -----------------
    document.getElementById("shkflashDuration_val").addEventListener('input', function() {
        if (GlobalsCurrentTab != 3) return; if (GlobalsEffectCurrentTab != 2) return;
        settingsData[0].shakes_add_flash_legn = this.value;
        document.getElementById("shkflashDuration_txt").textContent = "Duration: " + this.value + " frames";
    });
    
    document.getElementById("shkflashDuration_val").addEventListener('change', function() {
        if (GlobalsCurrentTab != 3) return; if (GlobalsEffectCurrentTab != 2) return;
        loadAndModifySettings(dataArray => {
            dataArray[0].shakes_add_flash_legn = this.value;
        });
    });

    // Shakes Flash Strength -----------------
    document.getElementById("shkflashStrength_val").addEventListener('input', function() {
        if (GlobalsCurrentTab != 3) return; if (GlobalsEffectCurrentTab != 2) return;
        settingsData[0].shakes_add_flash_strn = this.value;
        document.getElementById("shkflashStrength_txt").textContent = "Strenght: " + this.value + " %";
    });
    
    document.getElementById("shkflashStrength_val").addEventListener('change', function() {
        if (GlobalsCurrentTab != 3) return; if (GlobalsEffectCurrentTab != 2) return;
        loadAndModifySettings(dataArray => {
            dataArray[0].shakes_add_flash_strn = this.value;
        });
    });

    // Audio marker assist -----------------
    document.getElementById("MarkerThresholdStatusSlider").addEventListener('input', function() {
        if (GlobalsCurrentTab != 2) return;
        settingsData[0].audiomarkerassist = this.value;
        if (this.value == 100)
            document.getElementById("MarkerThresholdStatus").textContent = "Bass off";
        else if (this.value == 60)
            document.getElementById("MarkerThresholdStatus").textContent = "Bass auto detect";
        else
            document.getElementById("MarkerThresholdStatus").textContent = "Bass threshold: " + this.value + " %";
    });
    
    document.getElementById("MarkerThresholdStatusSlider").addEventListener('change', function() {
        if (GlobalsCurrentTab != 2) return;
        loadAndModifySettings(dataArray => {
            dataArray[0].audiomarkerassist = this.value;
        });
    });

    // Audio marker assist -----------------
    document.getElementById("MarkerThresholdStatusSlider2").addEventListener('input', function() {
        if (GlobalsCurrentTab != 2) return;
        settingsData[0].audiomarkerassist2 = this.value;
        if (this.value == 100)
            document.getElementById("MarkerThresholdStatus2").textContent = "Treble off";
        else if (this.value == 60)
            document.getElementById("MarkerThresholdStatus2").textContent = "Treble auto detect";
        else
            document.getElementById("MarkerThresholdStatus2").textContent = "Treble threshold: " + this.value + " %";
    });
    
    document.getElementById("MarkerThresholdStatusSlider2").addEventListener('change', function() {
        if (GlobalsCurrentTab != 2) return;
        loadAndModifySettings(dataArray => {
            dataArray[0].audiomarkerassist2 = this.value;
        });
    });
}

setupEventListeners();

// ON LOAD --------------------------------------------------------------

const preCompColors = [
    "None", "Red", "Yellow", "Aqua", "Pink", "Lavender",
    "Peach", "Sea foam", "Blue (Default)", "Green", "Purple",
    "Orange", "Brown", "Fuchsia", "Cyan", "Standstone", "Dark green"
];

const adjustmentColors = [
    "None", "Red", "Yellow", "Aqua", "Pink", "Lavender",
    "Peach", "Sea foam", "Blue (Default)", "Green", "Purple",
    "Orange", "Brown", "Fuchsia", "Cyan", "Standstone", "Dark green"
];

const flashColors = [
    "None", "Red", "Yellow", "Aqua", "Pink", "Lavender (Default)",
    "Peach", "Sea foam", "Blue", "Green", "Purple",
    "Orange", "Brown", "Fuchsia", "Cyan", "Standstone", "Dark green"
];

const shakesColors = [
    "None", "Red", "Yellow", "Aqua", "Pink", "Lavender",
    "Peach", "Sea foam", "Blue", "Green", "Purple",
    "Orange (Default)", "Brown", "Fuchsia", "Cyan", "Standstone", "Dark green"
];

const stabilizeMeth = [
    "Position", "Position, Scale, Rotation", "Perspective", "Subspace Warp"
];

const SlideTransition = [
    "Left ←", "Right →", "Top ↑", "Bottom ↓"
];

function isBoolOrNumber(str) {
    if (str === "true" || str === "false") {
        return 1;
    }

    const numberPattern = /^-?\d+(\.\d+)?(e[+-]?\d+)?$/i;
    if (numberPattern.test(str)) {
        return 2;
    }

    return 0;
}

/*
function IsNotOriginal(value, val_type)
{
    const numberPattern = /^-?\d+(\.\d+)?(e[+-]?\d+)?$/i;
    switch (val_type)
    {
        case 1: // Bool
        {   
            alert(value);
            if (!isNaN(Number(value)))
            {
                if (numberPattern.test(Number(value)))
                {
                    if (!(Number(value) === 0 || Number(value) === 1))
                    {
                        alert("yes 1")
                        return true;
                    }
                }
                else
                {
                    alert("Not number")
                    return true;
                }
            }
            else
            {
                alert("Not number")
                return true;
            }

            //if (value == undefined)
            //    return true;
        }
        break;
        case 2: // Number
        {
            if (numberPattern.test(value))
            {
                alert("IsNumber")
                //return false;
            }
            else
            {
                alert("Not number")
                //return true;
            }

            //if (value == undefined)
            //return true;
        }
        break;
    }
    
    return true;
}
*/

function LoadConfigFile(Data)
{
    // ALL THE EFFECTS SHIT PLS HELP ME
    
    // Effect Settings default
    if (Data[0].transform_rotate == undefined) Data[0].transform_rotate = 45;

    if (Data[0].effset_ws_detail == undefined) Data[0].effset_ws_detail = true;
    if (Data[0].effset_ws_smooth == undefined) Data[0].effset_ws_smooth = 50;
    if (Data[0].effset_ws_method == undefined) Data[0].effset_ws_method = 3;

    if (Data[0].effset_ct_detail == undefined) Data[0].effset_ct_detail = true;
    if (Data[0].effset_ct_points == undefined) Data[0].effset_ct_points = 100;
    
    if (Data[0].effset_fl_blendmode == undefined) Data[0].effset_fl_blendmode = true;
    if (Data[0].effset_fl_createt == undefined) Data[0].effset_fl_createt = false;
    if (Data[0].effset_fl_duration == undefined) Data[0].effset_fl_duration = 5;
    if (Data[0].effset_fl_strength == undefined) Data[0].effset_fl_strength = 100;

    if (Data[0].effset_mb_points == undefined) Data[0].effset_mb_points = 8;

    if (Data[0].effset_ts_lengh == undefined) Data[0].effset_ts_lengh = 8;

    if (Data[0].effset_ts_Slengh == undefined) Data[0].effset_ts_Slengh = 8;
    if (Data[0].effset_ts_Wlengh == undefined) Data[0].effset_ts_Wlengh = 8;
    if (Data[0].effset_ts_Z1lengh == undefined) Data[0].effset_ts_Z1lengh = 8;
    if (Data[0].effset_ts_Z2lengh == undefined) Data[0].effset_ts_Z2lengh = 8;
    if (Data[0].effset_ts_TWlengh == undefined) Data[0].effset_ts_TWlengh = 10;
    if (Data[0].effset_ts_TDlengh == undefined) Data[0].effset_ts_TDlengh = 10;

    if (Data[0].effset_ts_slides == undefined) Data[0].effset_ts_slides = 0;

    if (Data[0].effset_bl_blurriness == undefined) Data[0].effset_bl_blurriness = 25;
    if (Data[0].effset_bl_length == undefined) Data[0].effset_bl_length = 8;
    
    // Settings Settings default
    if (Data[0].color_precomp == undefined) Data[0].color_precomp = 8;
    if (Data[0].color_ajust == undefined) Data[0].color_ajust = 8;    
    if (Data[0].color_flash == undefined) Data[0].color_flash = 5;
    if (Data[0].color_shakes == undefined) Data[0].color_shakes = 11;    
    if (Data[0].ui_rgb_mode_factor == undefined) Data[0].ui_rgb_mode_factor = 50;
    if (Data[0].ui_color_hue == undefined) Data[0].ui_color_hue = 0;
    if (Data[0].ui_color_sat == undefined) Data[0].ui_color_sat = 100;
    if (Data[0].ui_rgb_mode == undefined) Data[0].ui_rgb_mode = false;
    if (Data[0].general_adjust == undefined) Data[0].general_adjust = false;
    if (Data[0].general_precomp == undefined) Data[0].general_precomp = false;
    if (Data[0].ui_disable_nav_icon_animation == undefined) Data[0].ui_disable_nav_icon_animation = false;
    if (Data[0].gameOneVolume == undefined) Data[0].gameOneVolume = 30;
    if (Data[0].fgurdiegf84r59gh8wsehgw9shg == undefined) Data[0].fgurdiegf84r59gh8wsehgw9shg = 0;
    if (Data[0].ui_animation_speed == undefined) Data[0].ui_animation_speed = 250;
    
    if (Data[0].shakes_add_flash == undefined) Data[0].shakes_add_flash = false;
    if (Data[0].shakes_add_ctime == undefined) Data[0].shakes_add_ctime = false;
    if (Data[0].shakes_speed == undefined) Data[0].shakes_speed = 100;
    if (Data[0].shakes_strength == undefined) Data[0].shakes_strength = 100;
    
    if (Data[0].shakes_add_flash_blen == undefined) Data[0].shakes_add_flash_blen = false;
    if (Data[0].shakes_add_flash_legn == undefined) Data[0].shakes_add_flash_legn = 5;
    if (Data[0].shakes_add_flash_strn == undefined) Data[0].shakes_add_flash_strn = 100;
    if (Data[0].audiomarkerassist == undefined) Data[0].audiomarkerassist = 75;
    if (Data[0].audiomarkerassist2 == undefined) Data[0].audiomarkerassist2 = 75;
    if (Data[0].allSessionsBruh == undefined) dataArray[0].allSessionsBruh = 0;

    CheckboxChecked(document.getElementById("AssetsFilterVideo"));
    CheckboxChecked(document.getElementById("AssetsFilterPictures"));
    CheckboxChecked(document.getElementById("AssetsFilterSound"));
    
    // Effect Settings
    Data[0].effset_ws_detail ? CheckboxChecked(document.getElementById("WarpStabilizer_Detail")) : CheckboxUnchecked(document.getElementById("WarpStabilizer_Detail"));
    document.getElementById("WarpStabilizer_smoothness_val").value = Data[0].effset_ws_smooth;
    document.getElementById("WarpStabilizer_smoothness_txt").textContent = "Smoothness: " + Data[0].effset_ws_smooth;
    document.getElementById('WarpStabilizerPreview').textContent = stabilizeMeth[Data[0].effset_ws_method];
    document.getElementById('TransitionSidePreview').textContent = SlideTransition[Data[0].effset_ts_slides];
    
    Data[0].effset_fl_createt ? CheckboxChecked(document.getElementById("flashCreateAtCompTime")) : CheckboxUnchecked(document.getElementById("flashCreateAtCompTime"));
    document.getElementById("flashDuration_val").value = Data[0].effset_fl_duration;
    document.getElementById("flashDuration_txt").textContent = "Duration: " + Data[0].effset_fl_duration + " frames";
    
    document.getElementById("flashStrength_val").value = Data[0].effset_fl_strength;
    document.getElementById("flashStrength_txt").textContent = "Strenght: " + Data[0].effset_fl_strength + "%";

    // Settings Settings
    document.getElementById('PreCompPreview').textContent = preCompColors[Data[0].color_precomp];
    document.getElementById('AdjustPreview').textContent = adjustmentColors[Data[0].color_ajust];
    document.getElementById('FlashPreview').textContent = flashColors[Data[0].color_flash];
    document.getElementById('ShakesPreview').textContent = shakesColors[Data[0].color_shakes];

    if (!Data[0].ui_rgb_mode) { CheckboxUnchecked(document.getElementById("EnableRGBMode")); }
    else { CheckboxChecked(document.getElementById("EnableRGBMode")); }
    
    if (!Data[0].ui_disable_nav_icon_animation) { CheckboxUnchecked(document.getElementById("DisableAnimationsNav")); }
    else { CheckboxChecked(document.getElementById("DisableAnimationsNav")); }
    
    if (!Data[0].general_adjust) { CheckboxUnchecked(document.getElementById("AdjustmentLayerPrecut")); }
    else { CheckboxChecked(document.getElementById("AdjustmentLayerPrecut")); }
    
    if (!Data[0].general_precomp) { CheckboxUnchecked(document.getElementById("PreCompPrecut")); }
    else { CheckboxChecked(document.getElementById("PreCompPrecut")); }
    
    if (!Data[0].effset_fl_blendmode) { CheckboxUnchecked(document.getElementById("flashblendmode")); }
    else { CheckboxChecked(document.getElementById("flashblendmode")); }
    
    if (!Data[0].effset_ct_detail) { CheckboxUnchecked(document.getElementById("CameraTrack_Detail")); }
    else { CheckboxChecked(document.getElementById("CameraTrack_Detail")); }
    
    if (!Data[0].shakes_add_flash) { CheckboxUnchecked(document.getElementById("AddFlashToAllShakes")); }
    else { CheckboxChecked(document.getElementById("AddFlashToAllShakes")); }
    
    if (!Data[0].shakes_add_ctime) { CheckboxUnchecked(document.getElementById("CreateAtCompTime")); }
    else { CheckboxChecked(document.getElementById("CreateAtCompTime")); }
    
    if (!Data[0].shakes_add_flash_blen) { CheckboxUnchecked(document.getElementById("Shakeflashblendmode")); }
    else { CheckboxChecked(document.getElementById("Shakeflashblendmode")); }
    
    document.getElementById('rgbSlider').value = Data[0].ui_rgb_mode_factor;
    document.getElementById("EnableRGBMode").textContent = "Enable RGB mode (" + Data[0].ui_rgb_mode_factor + "ms)";

    document.getElementById('gameVol_var').value = Data[0].gameOneVolume;
    document.getElementById("gameVol_txt").textContent = "Game volume: " + Data[0].gameOneVolume +"%";
    
    document.getElementById('colorSlider').value = Data[0].ui_color_hue;
    document.getElementById('ColorPicker').style.marginLeft = `calc(0.5vh + 94.5% * ${Data[0].ui_color_hue / 360})`;
    document.getElementById("sliderStatusHue").textContent = `UI color: ${Data[0].ui_color_hue}`;
    
    document.getElementById('saturationSlider').value = Data[0].ui_color_sat;
    document.getElementById('ColorPickerForSat').style.marginLeft = `calc(0.5vh + 94.5% * ${Data[0].ui_color_sat / 100})`;
    document.getElementById("sliderStatusSat").textContent = `UI saturation: ${Data[0].ui_color_sat}`;
    
    document.getElementById('trackpointSize_val').value = Data[0].effset_ct_points;
    document.getElementById("trackpointSize_txt").textContent = "Track Point Size: " + Data[0].effset_ct_points + "%";

    document.getElementById('forceM_val').value = Data[0].effset_mb_points;
    document.getElementById("forceM_txt").textContent = "Motion Blur Samples: " + Data[0].effset_mb_points;
    
    document.getElementById('BlurrinessLenght_val').value = Data[0].effset_bl_blurriness;
    document.getElementById("BlurrinessLenght_txt").textContent = "Blurriness: " + Data[0].effset_bl_blurriness;
    
    document.getElementById('BlurLenght_val').value = Data[0].effset_bl_length;
    document.getElementById("BlurLenght_txt").textContent = "Layer Length: " + Data[0].effset_bl_length + " Frames";
    
    document.getElementById('ShakeSpeedLength_val').value = Data[0].shakes_speed;
    if (Math.round(Data[0].shakes_speed) == 100)
        document.getElementById("ShakeSpeedLength_txt").textContent = "Speed: " + Data[0].shakes_speed + "% (Default)";
    else
        document.getElementById("ShakeSpeedLength_txt").textContent = "Speed: " + Data[0].shakes_speed + "%";
    
    document.getElementById('ShakeStrength_val').value = Data[0].shakes_strength;
    
    if (Math.round(Data[0].shakes_strength) === 100)
        document.getElementById("ShakeStrength_txt").textContent = "Strenght: " + Data[0].shakes_strength + "% (Default)";
    else
        document.getElementById("ShakeStrength_txt").textContent = "Strenght: " + Data[0].shakes_strength + "%";
    
    document.getElementById('shkflashDuration_val').value = Data[0].shakes_add_flash_legn;
    document.getElementById("shkflashDuration_txt").textContent = "Duration: " + Data[0].shakes_add_flash_legn + " frames";
    
    document.getElementById('shkflashStrength_val').value = Data[0].shakes_add_flash_strn;
    document.getElementById("shkflashStrength_txt").textContent = "Strenght: " + Data[0].shakes_add_flash_strn + "%";

    document.getElementById('MarkerThresholdStatusSlider').value = Data[0].audiomarkerassist;
    if (Data[0].audiomarkerassist === 100) document.getElementById("MarkerThresholdStatus").textContent = "Bass off";
    else if (Data[0].audiomarkerassist === 60) document.getElementById("MarkerThresholdStatus").textContent = "Bass auto detect";
    else document.getElementById("MarkerThresholdStatus").textContent = "Bass threshold: " + Data[0].audiomarkerassist + "%";

    document.getElementById('MarkerThresholdStatusSlider2').value = Data[0].audiomarkerassist2;
    if (Data[0].audiomarkerassist2 === 100) document.getElementById("MarkerThresholdStatus2").textContent = "Treble off";
    else if (Data[0].audiomarkerassist2 === 60) document.getElementById("MarkerThresholdStatus2").textContent = "Treble auto detect";
    else document.getElementById("MarkerThresholdStatus2").textContent = "Treble threshold: " + Data[0].audiomarkerassist2 + "%";

    
    // Ich bringe mich um 2

    document.getElementById('WarpEffLenght_val').value = Data[0].effset_ts_Wlengh;
    document.getElementById("WarpEffLenght_txt").textContent = "Layer Length: " + Data[0].effset_ts_Wlengh + " Frames";

    document.getElementById('SlideLenght_val').value = Data[0].effset_ts_Slengh;
    document.getElementById("SlideLenght_txt").textContent = "Layer Length: " + Data[0].effset_ts_Slengh + " Frames";

    document.getElementById('ZoomOutLenght_val').value = Data[0].effset_ts_Z1lengh;
    document.getElementById("ZoomOutLenght_txt").textContent = "Layer Length: " + Data[0].effset_ts_Z1lengh + " Frames";

    document.getElementById('ZoomInLenght_val').value = Data[0].effset_ts_Z2lengh;
    document.getElementById("ZoomInLenght_txt").textContent = "Layer Length: " + Data[0].effset_ts_Z2lengh + " Frames";

    document.getElementById('TimeWEffLenght_val').value = Data[0].effset_ts_TWlengh;
    document.getElementById("TimeWEffLenght_txt").textContent = "Layer Length: " + Data[0].effset_ts_TWlengh + " Frames";

    document.getElementById('TimeDEffLenght_val').value = Data[0].effset_ts_TDlengh;
    document.getElementById("TimeDEffLenght_txt").textContent = "Layer Length: " + Data[0].effset_ts_TDlengh + " Frames";

    document.getElementById('AnimSpeed_val').value = Data[0].ui_animation_speed;

    switch(Math.round(Data[0].ui_animation_speed))
    {
        case 0:
            document.getElementById("AnimSpeed_txt").textContent = "Animation are deactivated";
            break;
        case 175:
            document.getElementById("AnimSpeed_txt").textContent = "Animation Speed: " + Math.round(Data[0].ui_animation_speed) + "ms (Default)";
            break;
        default:
            document.getElementById("AnimSpeed_txt").textContent = "Animation Speed: " + Math.round(Data[0].ui_animation_speed) + "ms";
    }

    if (Data[0].ui_rgb_mode_factor != undefined) currentColorval = ((Data[0].ui_color_hue * 3) * (Data[0].ui_rgb_mode_factor)) / 360;
    else currentColorval = 0;
    
    document.getElementById('TransformRollSlider').value = Data[0].transform_rotate;
    document.getElementById("transformRollStatus").textContent = "Transform rotate angle: " + Data[0].transform_rotate + "\u00B0";
    document.getElementById("Rotate_minus").textContent = "Rotate -" + Data[0].transform_rotate + "\u00B0";
    document.getElementById("Rotate_plus").textContent = "Rotate +" + Data[0].transform_rotate + "\u00B0";

    // STATUS
    document.getElementById('colorSlider').disabled = Data[0].ui_rgb_mode;
    document.getElementById('colorSlider').style.opacity = Data[0].ui_rgb_mode ? "50%" : "100%";
    document.getElementById("sliderStatusHue").style.opacity = Data[0].ui_rgb_mode ? "50%" : "100%";
    
    document.getElementById('rgbSlider').disabled = !Data[0].ui_rgb_mode;
    document.getElementById('rgbSlider').style.opacity = Data[0].ui_rgb_mode ? "100%" : "50%";
    // document.getElementById("sliderStatusRGB").style.opacity = Data[0].ui_rgb_mode ? "100%" : "50%";

    document.getElementById('FlappyJerryTitle').textContent = `Flappy Jerry | Version 1.0.0 | HighScore: ${Data[0].fgurdiegf84r59gh8wsehgw9shg}`;

    if (Data[0].ui_color_hue != undefined && Data[0].ui_color_sat != undefined )
        applyHueRotation(Data[0].ui_color_hue, Data[0].ui_color_sat);

    Bruh(Data[0].ui_animation_speed);
    removeOldIcons_both();
    NavIconSwitch(1, Data[0].ui_disable_nav_icon_animation);
    for (var i = 0; i < document.getElementsByClassName("eff_shk_icon").length; i++) {
        document.getElementsByClassName("eff_shk_icon")[i].style.backgroundImage=  !Data[0].ui_disable_nav_icon_animation ? 'url("resources/settingsButton.gif")' : 'url("resources/settingsButton.png")';
    }
    for (var i = 0; i < document.getElementsByClassName("settingsButton").length; i++) {
        document.getElementsByClassName("settingsButton")[i].style.backgroundImage=  !Data[0].ui_disable_nav_icon_animation ? 'url("resources/settingsButton.gif")' : 'url("resources/settingsButton.png")';
    }
    saveChangesToFileSettings(Data);
}

let bruh_13942348uasfnef = "";

/*
async function Ioignosgndugsdgsduigsidgisdg() {
    try {
        const response = await fetch('https://www.google.com', { method: 'HEAD' });
        return response.ok;
        } catch (error) {
        return false;
    }
}

async function iasufbn45gh978hsafgszgbbg89gs8ze5g() {
    try {
        const response = await fetch('http://jryopenbetaactive.jry-media.de', { method: 'HEAD' });
        return response.ok;
        } catch (error) {
        return false;
    }
}

async function sajnfasjfndsansedgusdgsg() {
    if (await Ioignosgndugsdgsduigsidgisdg())
    {
        await fetch('http://jsafgnusanfujrgdfhdshd.jry-media.de', { method: 'HEAD' })
        .then(response => {
        if (response.ok) {
            bruh_13942348uasfnef = "4r98euw89stgh9t8ghtgwstg78wehtgzgfuegf8f7fg7fdfsdf"; // LOGIN 
        } else {
            bruh_13942348uasfnef = "ehrfh9804ewhf894eht8989gfsae89tghews987tgew79tg";    // Beta Over
        }
        })
        .catch(error => {
                bruh_13942348uasfnef = "ehrfh9804ewhf894eht8989gfsae89tghews987tgew79tg"; // No internet
        });
    }
    else
    {
        bruh_13942348uasfnef = "aufhseaufgh798rwegf9rg78ftgw8t78wg78gwe78zsgzfz8f";
    }
    
    
    if (await iasufbn45gh978hsafgszgbbg89gs8ze5g())
        bruh_13942348uasfnef = "4r98euw89stgh9t8ghtgwstg78wehtgzgfuegf8f7fg7fdfsdf";
    else
    {
        if (await iasufbn45gh978hsafgszgbbg89gs8ze5g())
            bruh_13942348uasfnef = "ehrfh9804ewhf894eht8989gfsae89tghews987tgew79tg";
        else
            bruh_13942348uasfnef = "ehrfh9804ewhf894eht8989gfsae89tghews987tgew79tg";
    }
}
*/

function createLogEntry(TextFild, varible = null) {
    //console.log("Setting Log");
    // check if log file existst.
    var currTime = new Date();
    /*
    var OnlineState = "ERROR";
    await isGoogleOnline().then(isOnline => {
        if (isOnline) {
            OnlineState = "Online";
        }
        else {
            OnlineState = "Offline";
        }
    }).catch(error => {
        alert(error);
    });
    */
    if (varible == null)
        varible = "";
    else
        TextFild = TextFild + ": ";

    let logData = `${currTime.getDate()}.${currTime.getMonth()}.${currTime.getFullYear()} || ${currTime.getHours()}:${currTime.getMinutes()}:${currTime.getSeconds()}\n${TextFild}${varible}\n\n`;

    if (fs.existsSync(LOG_PATH)) {
        fs.appendFile(LOG_PATH, logData, (err) => {
            if (err) {
                console.log(err);
            } else {
                console.log("Log Entry Created");
            }
        });
    } else {
        fs.writeFile(LOG_PATH, logData, (err) => {
        if (err) {
            console.log(err);
        } else {
            console.log("Log Entry Created");
        }
        });
    }
}

async function isGoogleOnline() {
    try {
        const response = await fetch('https://www.google.com', {
            method: 'HEAD',
            mode: 'no-cors'
        });
        
        return response.ok;
    } catch (error) {
        return false;
    }
}

// JERRYFLOW LOADER
var osANF48gnASjg48gsadbfG = false;

async function SignInWithEmailAndPassword(email, password) {
    const url = `https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=${apiKey}`;

    const payload = {
        email: email,
        password: password,
        returnSecureToken: true,
    };

    document.getElementById("WhatIsBudDoing").textContent = "Sign in";
    createLogEntry("SIGN [PROMIS]", payload.email);
    
    try {
        const response = await fetch(url, {
            method: "POST",
            headers: {
            "Content-Type": "application/json",
            },
            body: JSON.stringify(payload),
        });

        if (!response.ok) {
            SendNotification("Email or Password is wrong.", true, false, false);
            return null;
        }

        const data = await response.json();
        // console.log(data);
        createLogEntry("SIGN [SUCSESS]");
        return data; // Return the ID token
    } catch (error) {
        //console.error("Error:", error);
        backtoLogin();
        createLogEntry("SIGN [ERROR]", error);
        SendNotification("SIGN: " + error, false, false, false);
        throw error;
    }
}

async function RegisterWithEmailAndPassword(email, password) {
    const url = `https://identitytoolkit.googleapis.com/v1/accounts:signUp?key=${apiKey}`;
    
    const payload = {
        email: email,
        password: password,
        returnSecureToken: true,
    };

    document.getElementById("WhatIsBudDoing").textContent = "Registering";
    createLogEntry("REG [PROMIS]", payload.email);
    
    try {
        const response = await fetch(url, {
            method: "POST",
            headers: {
            "Content-Type": "application/json",
            },
            body: JSON.stringify(payload),
        });

        if (!response.ok) {
            return null;
        }
        
        const data = await response.json();
        createLogEntry("REG [SUCSESS]");
        return data; // Return the ID token and other details
    } catch (error) {
        backtoLogin();
        createLogEntry("REG [ERROR]", error);
        SendNotification("REG: " + error, false, false, false);
        //console.error("Error:", error);
        throw error;
    }
}

async function _getSystemParameters() {
    const cpuSerial = execSync("wmic cpu get ProcessorId")
    .toString()
    .replace(/ /g, "")
    .replace("ProcessorId", "")
    .replace(/\r/g, "")
    .replace(/\n/g, "");

  return cpuSerial;
}

async function _getSystemParameters_WIN_11() {
    // Using PowerShell to get the equivalent of WMIC information
    const machineGuid = execSync(
      "reg query HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Cryptography /v MachineGuid"
    ).toString();

    const diskSerial = execSync(
      'powershell -command "(Get-PhysicalDisk | Select-Object -First 1).SerialNumber"'
    ).toString();

    const cpuSerial = execSync(
      'powershell -command "(Get-WmiObject Win32_Processor | Select-Object -ExpandProperty ProcessorId)"'
    ).toString();

    const macAddress = execSync(
      'powershell -command "Get-NetAdapter -Physical | Select-Object -First 1 -ExpandProperty MacAddress"'
    ).toString();

    return machineGuid + diskSerial + cpuSerial + macAddress;
  }


// Hashing-Funktion
async function _generateHash(data) {
    return crypto.createHash("sha256").update(data).digest("hex");
}

async function StartGetParams() {
    var systemParameters;

    try {
        systemParameters = await _getSystemParameters();
    } catch(e)
    {
        createLogEntry("HWID [windows 11 24H2 Detected]");
        systemParameters = await _getSystemParameters_WIN_11();
    }

    const generatedSystemHash = await _generateHash(systemParameters);
  
    return { systemParameters, generatedSystemHash };
}

async function getHardwareId() {
    try {
        const { stdout } = await execPromise('system_profiler SPHardwareDataType');
        const lines = stdout.split('\n');
        for (const line of lines) {
            if (line.includes('Serial Number (system)')) {
                const serialNumber = line.split(':')[1].trim();
                return serialNumber;
            }
        }
        throw new Error('Serial Number not found');
    } catch (error) {
        backtoLogin();
        createLogEntry("HWID [ERROR]", error);
        SendNotification("HWID: " + error, false, false, false);
        throw new Error(`Error: ${error.message}`);
    }
}

async function ICHBINSCHWARZ() {
    const systemParameters = await getHardwareId();
    const generatedSystemHash = await _generateHash(systemParameters);
  
    return { systemParameters, generatedSystemHash };
}

async function SetupLocalUserVariables() {
    document.getElementById("WhatIsBudDoing").textContent = "Getting HWID";
    createLogEntry("HWID [PROMIS]");
    try {
        systemHash = (await StartGetParams()).generatedSystemHash;
        //console.log("\nThe Current SystemHas is \n");
        //console.log(systemHash);
        // if (localSystemHash !== systemHash) {
        //   console.log("System Hashes do not match");
        //   return false;
        // }
        createLogEntry("HWID [SUCSESS]");
        return true;
    } catch (e) {
        createLogEntry("Set local user val [ERROR]", e);
        //SendNotification("Set local user val: " + e, false, false, false);
        /*
        (async () => {
            try {
                systemHash = await getHardwareId();
                alert(systemHash);
                //alert(serialNumber);
                return true;
            } catch (error) {
                alert(error);
                return false;
            }
        })();
        */
        return false;
    }
}

async function SetupLocalUserVariablesMac() {
    document.getElementById("WhatIsBudDoing").textContent = "Getting HWID";
    createLogEntry("HWID [PROMIS]");
    try {
        systemHash = (await ICHBINSCHWARZ()).generatedSystemHash;
        createLogEntry("HWID [SUCSESS]");
        return true;
    } catch (error) {
        backtoLogin();
        createLogEntry("Local user val [ERROR]", error);
        SendNotification("Local user val: " + error, false, false, false);
        return false;
    }
}

// LOGGER txt

async function TryAuthenticateUser() {
    document.getElementById("WhatIsBudDoing").textContent = "Try to authenticate the User";
    createLogEntry("Try to authenticate the User [PROMIS]");
    try {
        let userObject = undefined;
        userObject = await RegisterWithEmailAndPassword(email, password);

        //console.log("Account Created!");
        //alert("Account Created!");
        if (userObject === null) {
            userObject = await SignInWithEmailAndPassword(email, password);
            //SendNotification("Account Logged in", true, false, false);
        }
        
        createLogEntry("Try to authenticate the User [SUCSESS]");
        return userObject;
    } catch (e) {
        //console.log("Error while trying to authenticate User");
        //console.log(e);
        createLogEntry("Error while trying to authenticate User [ERROR]", e);
        SendNotification("Error while trying to authenticate User: " + e, false, false, false);
        backtoLogin();
        return null;
    }
}

function backtoLogin()
{
    var RegAndLog = document.getElementById("RegAndLog");
    var midsec = document.getElementById("midsec");
    var bottomNoteTxt = document.getElementById("bottomNoteTxt");
    var WhatIsBudDoing = document.getElementById("WhatIsBudDoing");
    RegAndLog.style.marginLeft = "0%";
    RegAndLog.style.backgroundImage = "none";
    midsec.style.opacity = "100%";
    bottomNoteTxt.style.opacity = "100%";
    WhatIsBudDoing.style.opacity = "0%";
}

function LoadingScreenWhileLogginIn()
{
    var RegAndLog = document.getElementById("RegAndLog");
    var midsec = document.getElementById("midsec");
    var bottomNoteTxt = document.getElementById("bottomNoteTxt");
    var WhatIsBudDoing = document.getElementById("WhatIsBudDoing");
    RegAndLog.style.marginLeft = "0%";
    RegAndLog.style.backgroundImage = "url('resources/loading.gif')";
    midsec.style.opacity = "0%";
    bottomNoteTxt.style.opacity = "0%";
    WhatIsBudDoing.style.opacity = "100%";
}

async function GetVersionFromDataBase(userObject) {
    document.getElementById("WhatIsBudDoing").textContent = "Get Version from DataBase";
    createLogEntry("Get Version from DataBase [PROMIS]");
    
    try {
        const response = await fetch(
            BASE_URL +
            APP_COLLECTION + 
            "/information/" +
            returnType +
            authPrefix +
            `${userObject.idToken}`
        );
        
        if (!response.ok) {
            return null;
        }

        const data = await response.json();
        createLogEntry("Get Version from DataBase [SUCSESS]");
        return data;
    } catch (e) {
        backtoLogin();
        createLogEntry("Version [ERROR]", e);
        SendNotification("Version ERROR: " + e, false, false, false);
        return null;
    }
}

async function GetUserFromDataBase(userObject) {
    let convertedEmail = email.replace(/\./g, "__dot__").replace(/\@/g, "__at__");

    document.getElementById("WhatIsBudDoing").textContent = "Get user from DataBase";
    createLogEntry("Get user from DataBase [PROMIS]", convertedEmail);

    try {
        const response = await fetch(
            BASE_URL +
            USER_COLLECTION +
            "/" +
            convertedEmail +
            returnType +
            authPrefix +
            `${userObject.idToken}`
        );

        if (!response.ok) {
            return null;
        }
        
        const data = await response.json();
        // console.log(data);
        createLogEntry("Get user from DataBase [SUCSESS]");
        return data;
    } catch (e) {
        //alert(e);
        backtoLogin();
        createLogEntry("Getting user [ERROR]", e);
        SendNotification("Getting user ERROR: " + e, false, false, false);
        return null;
    }
}

async function SetUserInDataBase(userObject, inputData) {
    // replace every dot in the email with %2E
    let convertedEmail = email.replace(/\./g, "__dot__").replace(/\@/g, "__at__");

    document.getElementById("WhatIsBudDoing").textContent = "Set user in DataBase";
    createLogEntry("Set user in DataBase [PROMIS]", inputData);
    
    try {
        const response = await fetch(
            BASE_URL +
            USER_COLLECTION +
            "/" +
            convertedEmail +
            returnType +
            authPrefix +
            `${userObject.idToken}`,
            {
            method: "PUT",
            headers: {
                "Content-Type": "application/json",
            },
            body: JSON.stringify(inputData),
            }
        );
        
        if (!response.ok) {
            console.log(await response.json());
            // console.log(userObject);
            // console.log(inputData);
            return null;
        }

        const data = await response.json();
        //console.log(data);
        createLogEntry("Set user in DataBase [SUCSESS]");
        return data;
    } catch (e) {
        backtoLogin();
        createLogEntry("Set user in DB [ERROR]", e);
        console.log(e);
    return null;
    }
}

async function GetLicenseFromDataBase(userObject, licenseToGet) {

    document.getElementById("WhatIsBudDoing").textContent = "Get License DB";
    createLogEntry("Get License DB [PROMIS]", licenseToGet);

    try {
        const response = await fetch(
            BASE_URL +
            KEY_COLLECTION +
            "/" +
            licenseToGet +
            returnType +
            authPrefix +
            `${userObject.idToken}`
        );

        if (!response.ok) {
            return null;
        }

        const data = await response.json();
        createLogEntry("Get License DB [SUCSESS]");
        return data;
    } catch (error) {
        backtoLogin();
        createLogEntry("Get License DB [ERROR]", error);
        SendNotification("Get License DB ERROR: " + error, false, false, false);
        //console.error("Error:", error);
        return null;
    }
}

async function SetLicenseInDataBase(userObject, inputData, licenseToSet) {

    document.getElementById("WhatIsBudDoing").textContent = "Set License DB";
    createLogEntry("Set License DB [PROMIS]", inputData);

    try {
        const response = await fetch(
            BASE_URL +
            KEY_COLLECTION +
            "/" +
            licenseToSet +
            returnType +
            authPrefix +
            `${userObject.idToken}`,
            {
            method: "PUT",
            headers: {
                "Content-Type": "application/json",
            },
            body: JSON.stringify(inputData),
            }
        );

        const data = await response.json();
        createLogEntry("Set License DB [SUCSESS]");
        return data;
    } catch (error) {
        backtoLogin();
        createLogEntry("Set License DB [ERROR]", error);
        SendNotification("Set License DB ERROR: " + error, false, false, false);
        //console.error("Error:", error);
    return null;
    }
}

async function GenerateLocalFiles(authenticatedUserObject) {
    
    document.getElementById("WhatIsBudDoing").textContent = "Saving User to Local Machine";
    createLogEntry("Saving User to Local Machine [PROMIS]");
    
    let userFile = JSON.stringify({
        userName: userName,
        idToken: authenticatedUserObject.idToken,
        registeredLicense: license,
        systemHash: systemHash,
        email: email,
        password: password,
    });

    let signedUserFile = JSON.stringify({
        userName: userName,
        idToken: authenticatedUserObject.idToken,
        registeredLicense: license,
        systemHash: systemHash,
        email: email,
        password: password,
    });

    let finalSignedUserFile = await multiHashVersion2(
        signedUserFile,
        _Encryption_Seed,
        _Encryption_Version,
        _Encryption_Split_Char
    );
    
    console.log("Writing Files Sync");
    fs.writeFileSync(userJsonPath, userFile, "utf8");
    fs.writeFileSync(
        signedUserJsonPath,
        JSON.stringify({ signed: finalSignedUserFile }),
        "utf8"
    );

    //console.log("User Saved to Local Machine");
    createLogEntry("User Saved to Local Machine [SUCSESS]");
}

async function RemoveLocalFiles() {
    
    document.getElementById("WhatIsBudDoing").textContent = "Removing Local Files";
    createLogEntry("Removing Local Files [PROMIS]");

    try {
        fs.unlinkSync(userJsonPath);
        fs.unlinkSync(signedUserJsonPath);
        //console.log("Files Removed");
        createLogEntry("Files Removed [SUCSESS]");
    } catch (e) {
        backtoLogin();
        createLogEntry("REMOVE FILES [ERROR] #4231", e);
        //SendNotification("REMOVE FILES ERROR: " + e, false, false, false);
        //console.log(e);
    }
}

async function GetLocalFiles() {
    let loadedUserFile = undefined;
    let loadedSignedUserFile = undefined;
    try {
        loadedUserFile = fs.readFileSync(userJsonPath, "utf8");
        loadedSignedUserFile = fs.readFileSync(signedUserJsonPath, "utf8");
    } catch (e) {
        createLogEntry("No user found", e);
        await RemoveLocalFiles();
        //SendNotification("No User found", true, false, false);
        return null;
    }

    let finalSignedUserFile = undefined;

    try {
      finalSignedUserFile = await multiDeHashV2(
        JSON.parse(loadedSignedUserFile).signed,
        _Encryption_Seed,
        _Encryption_Version,
        _Encryption_Split_Char
      );
    } catch (e) {
        createLogEntry("User File is Modified", e);
        SendNotification("User File is Modified", false, false, false);
        await RemoveLocalFiles();
        return null;
    }
    
    if (loadedUserFile && finalSignedUserFile) {
        if (loadedUserFile !== finalSignedUserFile) {
            SendNotification("User File is not signed", false, false, false);
            return { modified: true };
        }
        
        let returnOBJ = {
            "loadedUserFile": null,
            "loadedSignedUserFile": null,
            "modified": false
        };
        
        try{
          returnOBJ.loadedUserFile = JSON.parse(loadedUserFile);
          returnOBJ.loadedSignedUserFile = JSON.parse(finalSignedUserFile);
          returnOBJ.modified = false;
          return returnOBJ;
        }catch(e){
          await RemoveLocalFiles();
          return null;
        }
    } else {
        backtoLogin();
        createLogEntry("Local files are null");
        return null;
    }
}

async function CheckSystemHashState(userObject, hashToGet) {
    try {
        const response = await fetch(
            BASE_URL +
            BANNED_USER_COLLECTION +
            "/" +
            hashToGet +
            returnType +
            authPrefix +
            `${userObject.idToken}`
        );
        
        if (!response.ok) {
            alert("null");
            return null;
        }

        const data = await response.json();
        //console.log(data);
        createLogEntry("Checking Systemhash [SUCSESS]");
        return data;
    } catch (error) {
        createLogEntry("Checking Systemhash [ERROR]", error);
        SendNotification("ERROR: " + error, false, false, false);
        backtoLogin();
        //alert(error);
        return null;
    }
}

async function CreateNewAccount() {
    createLogEntry("CREATE NEW ACCOUNT TRY");
    //if ((await GetLocalFiles()) !== null) {
    //    LogInToAccount();
    //    return;
    //}
    
    const err = await SetupLocalUserVariables();
    if (!err)
    {
        await SetupLocalUserVariablesMac();
        createLogEntry("SystemParameters", (await ICHBINSCHWARZ()).systemParameters);
        createLogEntry("generatedSystemHash", (await ICHBINSCHWARZ()).generatedSystemHash);
    }
    else
    {
        createLogEntry("SystemParameters", (await StartGetParams()).systemParameters);
        createLogEntry("generatedSystemHash", (await StartGetParams()).generatedSystemHash);
    }
    
    try {
        // Try to create a new Account, if an Account already exists, check if a license key is already registered to that account, if true,
        // redirect the user to the login page, if false, ask the user if he wants to register a new license key to the account.
        let authenticatedUserObject = await TryAuthenticateUser();
        if (authenticatedUserObject === null) {
            //alert("Error while trying to authenticate User");
            createLogEntry("Error while trying to authenticate User");
            SendNotification("Error while trying to authenticate User", false, false, false);
            backtoLogin();
            return;
        }

        auth = authenticatedUserObject;

        // Check if the users systemHash is Banned
        //alert("Checking if the User is Banned");
        let systemHashState = await CheckSystemHashState(
            authenticatedUserObject,
            systemHash
        );

        if (systemHashState !== null) {
            //alert("User is Hash Banned!");
            backtoLogin();
            createLogEntry("HWID Banned");
            SendNotification("User is HWID Banned!", false, false, false);
            return;
        }

        // Get the User Object from the Database
        //alert("Getting User from Database");
        let userObject = null;
        userObject = await GetUserFromDataBase(authenticatedUserObject);
        //alert("\n\n" + JSON.stringify(userObject) + "\n\n");

        if (userObject !== null && userObject.registeredLicense !== undefined) {
            // If the user already has a license key, redirect the user to the login page
            //alert("User already has a license key");
            backtoLogin();
            SendNotification("User already has a license key.", false, false, false);
            return;
        }
        // Check if the User is banned
        if (userObject !== null && userObject.isBanned === true) {
            //alert("User is banned");
            backtoLogin();
            SendNotification("User is banned!", false, false, false);
            return;
        }

        let MachineArray = [];

        if (userObject !== null && userObject.allMachines !== undefined) {
            if (userObject.allMachines.length >= 3) {
            //    alert(
            //    `User has reached the limit of ${MAX_ACTIVE_DEVICES} machines`
            //);
            return;
            }
                if (!userObject.allMachines.includes(systemHash)) {
                MachineArray = userObject.allMachines;
                MachineArray.push(systemHash);
            }
        } else {
            MachineArray.push(systemHash);
        }

        //alert("User Successfully Loaded");
        //alert("Getting License from Database");

        // Get the entered License Key from the Database and check if either the license key is disabled, or the license key is already registered to another user
        let licenseObject = await GetLicenseFromDataBase(
            authenticatedUserObject,
            license
        );
        if (licenseObject === undefined || licenseObject === null) {
            //alert("Error while getting License from Database");
            backtoLogin();
            SendNotification("License not found.", false, false, false);
            return;
        }
        if (
            licenseObject.disabled !== undefined &&
            licenseObject.disabled === true
        ) {
            //alert("License is disabled");
            backtoLogin();
            SendNotification("License is disabled.", false, false, false);
            return;
        }
        if (
            licenseObject.ownerEmail !== undefined &&
            String(licenseObject.ownerEmail).toLocaleLowerCase() !== String(email).toLocaleLowerCase()
        ) {
            //alert("License is already registered to another user");
            backtoLogin();
            SendNotification("License is already registered to another user.", false, false, false);
            return;
        }

        //alert("License Successfully Loaded");
        //alert("Setting New User Data");

        // If the user does not exists, or the user does not have a license key, create a new Database Entry

        let newUserData = {
            userName: userName,
            idToken: authenticatedUserObject.idToken,
            registeredLicense: license,
            allMachines: MachineArray,
            isBanned: false,
        };

        // Set the User Object in the Database
        //alert("Setting User in Database");
        const userResponse = await SetUserInDataBase(
            authenticatedUserObject,
            newUserData
        );
        if (userResponse === null) {
            //alert("Error while setting User in Database");
            backtoLogin();
            return;
        }
        user = newUserData;

        //alert("User Successfully Registered in Database");

        // Set the License Key in the Database with the Data

        //alert("Setting License Key Data");
        let newLicenseData = {
            disabled: false,
            ownerEmail: email,
            owner: systemHash,
            idToken: authenticatedUserObject.idToken,
            log: { lastPinged: new Date(), users: [{ systemHash: new Date() }] },
        };

        //alert("Setting License in Database");
        const licenseRespone = await SetLicenseInDataBase(
            authenticatedUserObject,
            newLicenseData,
            license
        );
        
        if (licenseRespone === null) {
            //alert("Error while setting License in Database");
            backtoLogin();
            return;
        }
        //alert("Account Created!");
        //alert("License Key Registered!");
        
        // Save the User Object to the local machine, in 2 Files, one with the user details, and one with the signed user details
        
        //alert("Saving User to Local Machine");

        let userFile = JSON.stringify({
            userName: userName,
            idToken: authenticatedUserObject.idToken,
            registeredLicense: license,
            systemHash: systemHash,
            email: email,
            password: password,
        });
        
        let signedUserFile = JSON.stringify({
            userName: userName,
            idToken: authenticatedUserObject.idToken,
            registeredLicense: license,
            systemHash: systemHash,
            email: email,
            password: password,
        });
        
        //alert("Writing Files Sync");
        
        document.getElementById("DashUser").textContent = "User: " + userName;
        document.getElementById("DashMail").textContent = "E-Mail: " + email;
        userName = newUserData.userName;

        let getVersionStatus = await GetVersionFromDataBase(authenticatedUserObject);
        
        osANF48gnASjg48gsadbfG = true;
        OpenDashBoard();
        RegAndLog.style.marginLeft = "100%";
        getLatestWebsite = getVersionStatus.LatestDownload;
        
        if (getVersionStatus.pattern === GlobalPattern)
        {
            if (getVersionStatus.Version === GlobalsVersion)
            {
                document.getElementById('CurrVersion').textContent = GlobalsVersion + " (Release)";
            }
            else
            {
                document.getElementById('UpdateLog').style.display = "block";
                document.getElementById('CurrVersion').textContent = GlobalsVersion + " (BETA)";
                SendNotification("New JerryFlow update is available!");
            }
        }
        else
        {
            let NewVersionRelease = document.getElementById('NewVersionRelease');
            NewVersionRelease.style.transform = "scale(1)";
            NewVersionRelease.style.opacity = "100%";
            
            SendNotification("New JerryFlow update is available!", true, true, false);
            PatternDword = true;
        }
        
        await GenerateLocalFiles(authenticatedUserObject);
    } catch (e) {
    }
}

function hahaNiggerYouArebanned()
{
    let customLogMessage = document.getElementById('customLogMessage');
    customLogMessage.style.transform = "scale(1)";
    customLogMessage.style.opacity = "100%";

    let HeaderMSG = document.getElementById('HeaderMSG');
    HeaderMSG.textContent = "YOUR ACCOUNT HAS BEEN BANNED!";

    let BodyMSG = document.getElementById('BodyMSG');    
    BodyMSG.textContent = "For more information, please contact our support team";

    let BodyMSG2 = document.getElementById('BodyMSG2');    
    BodyMSG2.textContent = "Click name or e-mail to copy.";

    let Support1 = document.getElementById('Support1');
    let Support2 = document.getElementById('Support2');
    let Support3 = document.getElementById('Support3');
    let Support4 = document.getElementById('Support4');

    Support1.textContent = "Instagram:";
    Support2.textContent = "Danny_aep";

    Support3.textContent = "E-Mail:";
    Support4.textContent = "support@jry-media.store";
}

function copySupportTxt()
{
    let Support2 = document.getElementById('Support2');
    let Support4 = document.getElementById('Support4');
    
    let credALX = document.getElementById('credALX');
    let credRJX = document.getElementById('credRJX');
    let copyDisablePart = document.getElementById('copyDisablePart');

    let CopyDiscordTwo = document.getElementById('CopyDiscordTwo');
    var CopyDownloadLinkTwo = document.getElementById("CopyDownloadLinkTwo");
    
    var copyNewDiscordLink = document.getElementById("copyNewDiscordLink");

    let CopyDiscordThree = document.getElementById('CopyDiscordThree');
    var CopyDownloadLinkThree = document.getElementById("CopyDownloadLinkThree");

    let CopyDiscordThree2 = document.getElementById('CopyDiscordThree2');
    var CopyDownloadLinkThree2 = document.getElementById("CopyDownloadLinkThree2");

    const discordlink = "https://discord.gg/PGWpG8xjct";
    
    Support2.addEventListener("click", function() {
        const tempTextarea = document.createElement("textarea");
        tempTextarea.value = Support2.textContent;
        document.body.appendChild(tempTextarea);
        tempTextarea.select();
        document.execCommand("copy");
        document.body.removeChild(tempTextarea);

        SendNotification("Instagram name has been copied!", true, true, false);
    });

    Support4.addEventListener("click", function() {
        const tempTextarea = document.createElement("textarea");
        tempTextarea.value = Support4.textContent;
        document.body.appendChild(tempTextarea);
        tempTextarea.select();
        document.execCommand("copy");
        document.body.removeChild(tempTextarea);

        SendNotification("E-Mail has been copied!", true, true, false);
    });
    
    CopyDiscordTwo.addEventListener("click", function() {
        const tempTextarea = document.createElement("textarea");
        tempTextarea.value = discordlink;
        document.body.appendChild(tempTextarea);
        tempTextarea.select();
        document.execCommand("copy");
        document.body.removeChild(tempTextarea);
        
        SendNotification("Discord link has been copied!");
    });
    
    credRJX.addEventListener("click", function() {
        const tempTextarea = document.createElement("textarea");
        tempTextarea.value = "rjxspeed";
        document.body.appendChild(tempTextarea);
        tempTextarea.select();
        document.execCommand("copy");
        document.body.removeChild(tempTextarea);
        
        SendNotification("RJXspeed name has been copied!");
    });

    copyDisablePart.addEventListener("click", function() {
        const tempTextarea = document.createElement("textarea");
        tempTextarea.value = "DisableParticle";
        document.body.appendChild(tempTextarea);
        tempTextarea.select();
        document.execCommand("copy");
        document.body.removeChild(tempTextarea);
        
        SendNotification("Disable command has been copied!");
    });
    
    credALX.addEventListener("click", function() {
        const tempTextarea = document.createElement("textarea");
        tempTextarea.value = 'alx.edits';
        document.body.appendChild(tempTextarea);
        tempTextarea.select();
        document.execCommand("copy");
        document.body.removeChild(tempTextarea);
        
        SendNotification("ALX.Edits name has been copied!");
    });

    CopyDownloadLinkTwo.addEventListener("click", function() {
        const tempTextarea = document.createElement("textarea");
        tempTextarea.value = getLatestWebsite;
        document.body.appendChild(tempTextarea);
        tempTextarea.select();
        document.execCommand("copy");
        document.body.removeChild(tempTextarea);

        SendNotification("Website link has been copied!");
    });
    
    CopyDiscordThree.addEventListener("click", function() {
        const tempTextarea = document.createElement("textarea");
        tempTextarea.value = discordlink;
        document.body.appendChild(tempTextarea);
        tempTextarea.select();
        document.execCommand("copy");
        document.body.removeChild(tempTextarea);
        
        SendNotification("Discord link has been copied!", true, true, false);
    });

    CopyDownloadLinkThree.addEventListener("click", function() {
        const tempTextarea = document.createElement("textarea");
        tempTextarea.value = getLatestWebsite;
        document.body.appendChild(tempTextarea);
        tempTextarea.select();
        document.execCommand("copy");
        document.body.removeChild(tempTextarea);

        SendNotification("Website link has been copied!", true, true, false);
    });
    
    CopyDiscordThree2.addEventListener("click", function() {
        const tempTextarea = document.createElement("textarea");
        tempTextarea.value = discordlink;
        document.body.appendChild(tempTextarea);
        tempTextarea.select();
        document.execCommand("copy");
        document.body.removeChild(tempTextarea);
        
        SendNotification("Discord link has been copied!", true, true, false);
    });

    CopyDownloadLinkThree2.addEventListener("click", function() {
        const tempTextarea = document.createElement("textarea");
        tempTextarea.value = getLatestWebsite;
        document.body.appendChild(tempTextarea);
        tempTextarea.select();
        document.execCommand("copy");
        document.body.removeChild(tempTextarea);

        SendNotification("Website link has been copied!", true, true, false);
    });
}

async function LogInToAccount() {
    createLogEntry("LOGIN TRY");

    let abortLogin = false;
    let authenticatedUserObject = undefined;
    const LocalFiles = await GetLocalFiles();
    if (LocalFiles !== null) {
        if (LocalFiles.modified === true) {
            document.getElementById("WhatIsBudDoing").textContent = "Files have been Modified";
            createLogEntry("Files have been Modified [ERROR]");

            backtoLogin();
            SendNotification("Files have been Modified!", false, false, false);
            abortLogin = true;
            await RemoveLocalFiles();
            return;
        } else {
            email = LocalFiles.loadedUserFile.email;
            password = LocalFiles.loadedUserFile.password;
            
            authenticatedUserObject = await TryAuthenticateUser();
            if (authenticatedUserObject === null) {
                backtoLogin();
                document.getElementById("WhatIsBudDoing").textContent = "Files have been Modified";
                createLogEntry("Authenticate Error [ERROR]");
                SendNotification("Authenticate Error", true, false, false);
                return;
            }
        }
    } else {
        if (!abortLogin) {
            authenticatedUserObject = await TryAuthenticateUser();
            if (authenticatedUserObject === null) {
                backtoLogin();
                //SendNotification("Authenticate Error", false, false, false);
                return;
            }
        }
    }
  
    if (abortLogin) {
        backtoLogin();
        await RemoveLocalFiles();
        return;
    }
    
    const res = await SetupLocalUserVariables(); // SetupLocalUserVariablesMac
    
    if (!res)
    {
        await SetupLocalUserVariablesMac();
        createLogEntry("SystemParameters", (await ICHBINSCHWARZ()).systemParameters);
        createLogEntry("generatedSystemHash", (await ICHBINSCHWARZ()).generatedSystemHash);
    }
    else
    {
        createLogEntry("SystemParameters", (await StartGetParams()).systemParameters);
        createLogEntry("generatedSystemHash", (await StartGetParams()).generatedSystemHash);
    }
    

    // Check if the users systemHash is Banned
    let systemHashState = await CheckSystemHashState(
      authenticatedUserObject,
      systemHash
    );
    
    if (systemHashState !== null) {
        backtoLogin();
        return;
    }
    
    // Get the User Object from the Database, and check if the user has a license key and if the ammount of machines is not exceeded the limit of 3
    //console.log("Getting User from Database");
    let userObject = undefined;
    userObject = await GetUserFromDataBase(authenticatedUserObject);
    if (userObject === null) {
        backtoLogin();
        SendNotification("E-Mail or Password wrong.", true, false, false);
      return;
    }

    if (userObject.isBanned === true) {
        backtoLogin();
        hahaNiggerYouArebanned();
        //SendNotification("User Banned", false, false, false);
      return;
    }

    if (
      userObject.registeredLicense === undefined ||
      userObject.registeredLicense === null
    ) {
        backtoLogin();
        SendNotification("No key found", true, false, false);
      return;
    }

    if (
      userObject.allMachines &&
      userObject.allMachines.length >= MAX_ACTIVE_DEVICES
    ) {
      if (!userObject.allMachines.includes(systemHash)) {
        backtoLogin();
        let MaxDeviceLim = document.getElementById('MaxDeviceLimit');
        MaxDeviceLim.style.opacity = '100%';
        MaxDeviceLim.style.transform = 'scale(1)';
        //SendNotification("Limit reached of 3 machines", false, false, false);
        return;
      }
    }
    
    let MachineArray = [];
    if (userObject.allMachines && userObject.allMachines.length !== 0) {
      if (!userObject.allMachines.includes(systemHash)) {
        MachineArray = userObject.allMachines;
        MachineArray.push(systemHash);
      } else {
        MachineArray = userObject.allMachines;
      }
    } else {
      MachineArray.push(systemHash);
    }
    
    //console.log("Setting New User Data");
    let newUserData = {
      userName: userObject.userName,
      allMachines: MachineArray,
      idToken: authenticatedUserObject.idToken,
      registeredLicense: userObject.registeredLicense,
      isBanned: userObject.isBanned,
    };
    
    //console.log("Setting User in Database");
    const userResponse = await SetUserInDataBase(
        authenticatedUserObject,
        newUserData
    );

    if (userResponse === null) {
        backtoLogin();
        SendNotification("Database Error: #2551", false, false, false); // 2551 -> -> -> "Error while setting User in Database"
        return;
    }
    
    // Get the License Key from the Database and check if the license key is not disabled, and if the license key is registered to the user
    
    //console.log("Getting License from Database");
    let licenseObject = await GetLicenseFromDataBase(
      authenticatedUserObject,
      userObject.registeredLicense
    );
    if (licenseObject === null) {
        backtoLogin();
      SendNotification("Database Error: #7238", false, false, false); // 7238 -> -> -> "Error while getting License from Database"
      return;
    }
    if (licenseObject.disabled && licenseObject.disabled === true) {
        backtoLogin();
        SendNotification("License is Disabled", false, false, false); // Eins du huso
      return;
    }
    if (licenseObject.ownerEmail && String(licenseObject.ownerEmail).toLocaleLowerCase() !== String(email).toLocaleLowerCase()) {
        //console.log("License is not registered to the user");
        backtoLogin();
        SendNotification("License is not registered to the user", true, false, false); // Eins du huso
        return;
    }
        
    // Check if the systemHash is already in the log
    let logArray = [];
    if (licenseObject.log && licenseObject.log.users) {
      logArray = licenseObject.log.users;
      if (!logArray.some((e) => e.systemHash === systemHash)) {
        logArray.push({ systemHash: systemHash, logDate: new Date() });
      }
    } else {
      logArray.push({ systemHash: systemHash, logDate: new Date() });
    }
    
    // Set the License Key in the Database with the Data
    console.log("Setting License Key Data");
    let newLicenseData = {
        disabled: false,
        ownerEmail: licenseObject.ownerEmail,
        owner: licenseObject.owner,
        idToken: authenticatedUserObject.idToken,
        log: { lastPinged: new Date(), users: logArray },
    };
    
    console.log("Setting License in Database");
    const licenseRespone = await SetLicenseInDataBase(
      authenticatedUserObject,
      newLicenseData,
      userObject.registeredLicense
    );
    
    if (licenseRespone === null) {
        backtoLogin();
        //alert("Error while setting License in Database");
        return;
    }
    
    document.getElementById("DashUser").textContent = "User: " + newUserData.userName;
    document.getElementById("DashMail").textContent = "E-Mail: " + newLicenseData.ownerEmail;
    userName = newUserData.userName;

    let getVersionStatus = await GetVersionFromDataBase(authenticatedUserObject);

    osANF48gnASjg48gsadbfG = true;
    OpenDashBoard();
    RegAndLog.style.marginLeft = "100%";
    getLatestWebsite = getVersionStatus.LatestDownload;
    
    if (getVersionStatus.pattern === GlobalPattern)
    {
        if (getVersionStatus.Version === GlobalsVersion)
        {
            document.getElementById('CurrVersion').textContent = GlobalsVersion + " (Release)";
        }
        else
        {
            document.getElementById('UpdateLog').style.display = "block";
            document.getElementById('CurrVersion').textContent = GlobalsVersion + " (Outdated)";
            SendNotification("New JerryFlow update is available!");
        }
    }
    else
    {
        let NewVersionRelease = document.getElementById('NewVersionRelease');
        NewVersionRelease.style.transform = "scale(1)";
        NewVersionRelease.style.opacity = "100%";
        
        SendNotification("New JerryFlow update is available!", true, true, false);
        PatternDword = true;
    }

    refreshShakeList();
    //alert(getVersionStatus);
    //alert(getVersionStatus.Version);
    //alert(getVersionStatus.pattern);

    // Save the User Object to the local machine, in 2 Files, one with the user details, and one with the signed user details
    //alert("Saving User to Local Machine");
    await GenerateLocalFiles(authenticatedUserObject);

    if (restartCuzOfFirstStart)
    {
        localStorage.clear();
        location.reload();
        E('nSHg7bgfbBsb4rzfB7bSb()');
        restartCuzOfFirstStart = false;
    }
}

// ADDR 7FF7B3C D3CC4

var loginPageState = true;

function ChangeLoginToReg()
{
    var midsec = document.getElementById("midsec"); // Tab
    
    var LoginHeaderText = document.getElementById("LoginHeaderText");

    var GetPW2 = document.getElementById("GetPW2");
    var GetLC1 = document.getElementById("GetLC1");
    var GetUN1 = document.getElementById("GetUN1");
    
    var CallActionButton = document.getElementById("CallActionButton");

    var LoginStateTxT = document.getElementById("LoginStateTxT");
    var OverAllStatTxt = document.getElementById("OverAllStatTxt");
    var LoginStateTxTClicker = document.getElementById("LoginStateTxTClicker");

    /* SET DEFAULT */
    
    midsec.style.transition = "height 500ms cubic-bezier(.7,0,.3,1), transform-origin 500ms cubic-bezier(.7,0,.3,1), margin-top 500ms cubic-bezier(.7,0,.3,1), opacity 500ms cubic-bezier(.7,0,.3,1)";
    CallActionButton.style.transition = "transform 30ms, margin-top 500ms cubic-bezier(.7,0,.3,1)";
    OverAllStatTxt.style.transition = "margin-top 500ms cubic-bezier(.7,0,.3,1)";

    midsec.style.height = "79vh";
    midsec.style.marginTop = "10.5vh";
    midsec.style.transformOrigin = "0% 10.5vh";

    GetPW2.style.transform = "scale(1)";
    GetLC1.style.transform = "scale(1)";
    GetUN1.style.transform = "scale(1)";

    CallActionButton.style.marginTop = "62vh";
    OverAllStatTxt.style.marginTop = "72vh";

    CallActionButton.textContent = "Register key";
    LoginHeaderText.textContent = "Register your key.";
    LoginStateTxT.textContent = "Key already registered? ";
    this.textContent = "Login!";
    
    /* END SET DEFAULT */

    LoginStateTxTClicker.addEventListener("click", function() {
        if (loginPageState)
        {
            midsec.style.transition = "height 500ms cubic-bezier(.7,0,.3,1), transform-origin 500ms cubic-bezier(.7,0,.3,1), margin-top 500ms cubic-bezier(.7,0,.3,1), opacity 500ms cubic-bezier(.7,0,.3,1)";
            CallActionButton.style.transition = "transform 30ms, margin-top 500ms cubic-bezier(.7,0,.3,1)";
            OverAllStatTxt.style.transition = "margin-top 500ms cubic-bezier(.7,0,.3,1)";
            
            midsec.style.height = "50vh";
            midsec.style.marginTop = "25vh";
            midsec.style.transformOrigin = "0% 25vh";
            GetPW2.style.transform = "scale(0)";
            GetLC1.style.transform = "scale(0)";
            GetUN1.style.transform = "scale(0)";
            
            CallActionButton.style.marginTop = "30vh";
            OverAllStatTxt.style.marginTop = "40vh";

            CallActionButton.textContent = "Login";
            LoginHeaderText.textContent = "Login.";
            LoginStateTxT.textContent = "Key not registered yet? ";
            this.textContent = "register now!";
        }
        else
        {
            midsec.style.transition = "height 500ms cubic-bezier(.7,0,.3,1), transform-origin 500ms cubic-bezier(.7,0,.3,1), margin-top 500ms cubic-bezier(.7,0,.3,1), opacity 500ms cubic-bezier(.7,0,.3,1)";
            CallActionButton.style.transition = "transform 30ms, margin-top 500ms cubic-bezier(.7,0,.3,1)";
            OverAllStatTxt.style.transition = "margin-top 500ms cubic-bezier(.7,0,.3,1)";

            midsec.style.height = "79vh";
            midsec.style.marginTop = "10.5vh";
            midsec.style.transformOrigin = "0% 10.5vh";

            GetPW2.style.transform = "scale(1)";
            GetLC1.style.transform = "scale(1)";
            GetUN1.style.transform = "scale(1)";

            CallActionButton.style.marginTop = "62vh";
            OverAllStatTxt.style.marginTop = "72vh";

            //GetPW2.value = "";
            //GetLC1.value = "";
            //GetUN1.value = "";

            CallActionButton.textContent = "Register key";
            LoginHeaderText.textContent = "Register your key";
            LoginStateTxT.textContent = "Key already registered? ";
            this.textContent = "Login!";
        }

        loginPageState = !loginPageState;
    });

}

function readSetGo()
{
    var FixedLayout = document.getElementById("FixedLayout");
    var Loading = document.getElementById("Loading");
    var WhatIsLoading = document.getElementById("WhatIsLoading");

    WhatIsLoading.textContent = "LOADED";
    WhatIsLoading.style.color = "#5eff24";
    Loading.style.opacity = "0";
    Loading.style.transition = "opacity 500ms";

    setTimeout(() => {
        Loading.style.marginTop = "-200vh";
        Loading.style.transition = " 0ms";
        Loading.style.display = "none";
        Loading.style.opacity = "0%";
        Loading.style.transition = "none";
    }, 501);
}

let regis = true;

function isEmail(input) {
    const emailPattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
    return emailPattern.test(input);
}

function isAlphanumeric(inputText) {
    const regex = /^[a-zA-Z0-9]*$/;
    return regex.test(inputText);
}

function containsDotOrAt(inputText) {
    return inputText.includes("__dot__") || inputText.includes("__at__");
}

var toggleHideAndunHideHiddenTxT = true;
async function LogInOrRegAccount()
{
    var GetEM1 = document.getElementById("GetEM1");
    var GetPW1 = document.getElementById("GetPW1");
    var GetPW2 = document.getElementById("GetPW2");
    var GetLC1 = document.getElementById("GetLC1");
    var GetUN1 = document.getElementById("GetUN1");
    var setGo = document.getElementById("CallActionButton");
    var Logout = document.getElementById("Logout");
    var HiddenUnhide = document.getElementById("HiddenUnhide");

    HiddenUnhide.addEventListener("mousedown", async function() {
        if (toggleHideAndunHideHiddenTxT)
        {
            GetPW1.setAttribute('type', 'text');
            GetPW2.setAttribute('type', 'text');
            GetLC1.setAttribute('type', 'text');
        }
        else
        {
            GetPW1.setAttribute('type', 'password');
            GetPW2.setAttribute('type', 'password');
            GetLC1.setAttribute('type', 'password');
        }
        toggleHideAndunHideHiddenTxT = !toggleHideAndunHideHiddenTxT;
    });

    setGo.addEventListener("click", async function() {
        if (loginPageState)
        {
            if (!String(GetEM1.value))
            {
                SendNotification("E-Mail is empty!", true, false, false);
                return;
            }
            
            if (String(GetEM1.value).includes(' '))
            {
                SendNotification("E-Mails cannot include empty letters!", true, false, false);
                return;
            }
            
            if (containsDotOrAt(GetEM1.value))
            {
                SendNotification("Invalid E-Mail format!", true, false, false);
                return;
            }
            
            if (!isEmail(String(GetEM1.value)))
            {
                SendNotification("Not a valid E-Mail!", true, false, false);
                return;
            }
            
            if (String(GetPW1.value).length < 8)
            {
                SendNotification("Password needs to be at least 8 characters long!", true, false, false);
                return;
            }
            
            if (String(GetPW1.value).includes(' '))
            {
                SendNotification("Password cannot include empty letters!", true, false, false);
                return;
            }
            
            if (GetPW1.value != GetPW2.value)
            {
                SendNotification("Password is not the same.", true, false, false);
                return;
            }

            if (!String(GetLC1.value))
            {
                SendNotification("Licensekey is empty!", true, false, false);
                return;
            }
            
            if (String(GetUN1.value).length < 3)
            {
                SendNotification("Username needs to be at least 3 characters long!", true, false, false);
                return;
            }
            
            if (String(GetUN1.value).includes(' '))
            {
                SendNotification("Username cannot include empty letters!", true, false, false);
                return;
            }
            
            if (!isAlphanumeric(GetUN1.value))
            {
                SendNotification("Username cannot include any symbols!", true, false, false);
                return;
            }
            
            userName = GetUN1.value;
            email = String(GetEM1.value).toLocaleLowerCase();
            password = GetPW2.value;
            license = GetLC1.value;
            
            LoadingScreenWhileLogginIn();
            await CreateNewAccount();
            //await LogInToAccount();
        }
        else
        {
            userName = GetUN1.value;
            email = String(GetEM1.value).toLocaleLowerCase();
            password = GetPW1.value;
            
            LoadingScreenWhileLogginIn();
            await LogInToAccount();
        }
    });
    
    Logout.addEventListener("click", async function() {
        CloseDashBoard();
        LoadingScreenWhileLogginIn();
        
        GetEM1.value = "";
        GetPW1.value = "";
        GetPW2.value = "";
        GetLC1.value = "";
        GetUN1.value = "";

        await RemoveLocalFiles();
        backtoLogin();
        SendNotification("User Logged out!", true, true, false);
    });
}

function MathClamp(num, min, max) {
    return num <= min 
      ? min 
      : num >= max 
        ? max 
        : num
}

function ResetOffline()
{
    loadAndModifySettings(dataArray => {
        dataArray[0].lTry = 0;
    });
    setTimeout(LoadSettingsFile, 75);
}

function SaveOffline(new_var)
{
    loadAndModifySettings(dataArray => {
        dataArray[0].lTry = new_var;
    });
    setTimeout(LoadSettingsFile, 75);
}

function callExtendScriptAsync(script) {
    return new Promise((resolve, reject) => {
        callExtendScript(script, function(response) {
            try {
                resolve(response);
            } catch (error) {
                reject(error);
            }
        });
    });
}

function callExtendScriptAsync2(script) {
    return new Promise((resolve, reject) => {
        callExtendScript(script, function(response) {
            try {
                var result = eval(response);
                resolve(result);
            } catch (error) {
                reject(error);
            }
        });
    });
}

// TODO: CustomThemes

function xMassTheme() {
    const particleContainer = document.getElementById('particle-container');
    let particleCount = 0;
    let maxParticles = 50;
    let textareaNotePad = document.getElementById('QuickNotes');

    function createParticle() {
        if (textareaNotePad.value.toLowerCase() == 'disableparticle') {
            particleContainer.innerHTML = '';
            particleCount = 0;
            return;
        }
        if (particleCount >= maxParticles) return;

        const particle = document.createElement('div');
        particle.classList.add('particle');

        particle.style.left = `${Math.random() * 100}vw`;
        particle.style.top = `-${Math.random() * 10}vh`;

        const size = (Math.random() * 5 + 5) * 0.08;
        particle.style.width = `${size}vh`;
        particle.style.height = `${size}vh`;

        const duration = Math.random() * 5 + 5;
        particle.style.animationDuration = `${duration}s`;

        particleContainer.appendChild(particle);
        particleCount++;

        // Remove particle when animation ends
        particle.addEventListener('animationend', () => {
            particle.remove();
            particleCount--;
        });
    }

    setInterval(createParticle, 250);
}

// TODO: LOADER

var StartOfTheSession = 0;
var SessionIsLoaded = false;

var winterthemeEnabled = false;
function EnableXmasTheme()
{
    var currTime = new Date();
    var getCurrentMonth = currTime.getMonth() + 1;
    var getCurrenDay = currTime.getDate();
    
    if (getCurrentMonth === 12 && getCurrenDay <= 25 && getCurrenDay >= 1)
        winterthemeEnabled = true;

    if (getCurrentMonth === 11 && getCurrenDay >= 15)
        winterthemeEnabled = true;
}

var helloweenthemeEnabled = false;
function EnableHelloweenTheme()
{
    var currTime = new Date();
    var getCurrentMonth = currTime.getMonth() + 1;
    var getCurrenDay = currTime.getDate();
    
    if (getCurrentMonth === 10 && getCurrenDay <= 31 && getCurrenDay >= 24)
        helloweenthemeEnabled = true;
}

function JerryFlowWinterTheme()
{
    if (!winterthemeEnabled)
        return;

    document.getElementById('xMasLog').style.display = "block";
    document.getElementById('particle-container').style.display = "block";
    document.getElementById('snow1').style.display = "block";
    document.getElementById('snow2').style.display = "block";
    document.getElementById('snow3').style.display = "block";
    document.getElementById('snow4').style.display = "block";
    document.getElementById('snow5').style.display = "block";
    document.getElementById('bridge1').style.display = "block";
    
    xMassTheme(); // Load theme
}

function JerryFlowHelloweenTheme()
{
    if (!helloweenthemeEnabled)
        return;

    document.getElementById('HalloweenLog').style.display = "block";
    document.getElementById('spiderweb1').style.display = "block";
    document.getElementById('tombstone1').style.display = "block";
    document.getElementById('bat1').style.display = "block";
}

async function CheckAndLoad()
{
    const startTime = Date.now();
    StartOfTheSession = Math.floor(Date.now() / 1000);
    EnableXmasTheme();
    EnableHelloweenTheme();
    ScaleToTheWidth();
    
    // LoadingScreenWhileLogginIn();

    const interfaceEntrypoint = new CSInterface();
    
    document.getElementById('WhatIsLoading').style.color = "#5eff24";
    document.getElementById('WhatIsLoading').textContent = "Reading Plugins and Presets.";
    document.getElementById('x1111293').textContent = "Loading Effects & Plugins.";
    
    let currentAE_Version = await callExtendScriptAsync('AE_VersionButDumCuzAdobeIsFuckingStupid()');
    document.getElementById('GetAfterEffectsVersion').textContent = `After Effects 20${currentAE_Version}`;
    
    
    let AEOUTPUT_PLUGINS_EFFECTS = await callExtendScriptAsync2('getStandardEffectsAndPlugins83nhUShgudbds()');

    let presetFolderPath = await callExtendScriptAsync('PresetFolderPath()');
    AllUserPresetsFromAE = await callExtendScriptAsync2('getAllUserPresets()');
    AllEffectsFromAE = AEOUTPUT_PLUGINS_EFFECTS;

    document.getElementById('StartLoadingbarProgress').style.transition = `width 250ms`;
    document.getElementById('StartLoadingbarProgress').style.width = `${100}%`;
    
    
    // SendNotification(AllEffectsFromAE.length + '  loaded & ' + AllUserPresetsFromAE.length + ' User presets are loaded!', true, true, false);
    LoadPresetEffects(false);
    
    createFileWithArray((err, dataArray) => {
        if (err) {
            SendNotification(err, false, false);
            return;
        }
    });
    
    loadAndModifySettings(dataArray => {
        dataArray[0].shakes_strength = this.value;
    });

    const endTime = Date.now();
    const timetaken = endTime - startTime;

    document.getElementById('HowManyEffects').textContent = `Effects found: ${AllEffectsFromAE.length}`;
    document.getElementById('HowManyPresets').textContent = `Presets found: ${AllUserPresetsFromAE.length}`;
    document.getElementById('PresetPath').textContent = `Presets folder: ${decodeURIComponent(presetFolderPath)}`;

    SendNotification(AllEffectsFromAE.length + '  loaded & ' + AllUserPresetsFromAE.length + ' User presets are loaded!\nTime it took to load: ' + timetaken + 'ms', true, true, false);

    setTimeout(() => { 
        LoadSettingsFile();
        createFileWithArraySettings(async (err, dataArray) => {
            if (err) {
                SendNotification(err, false, false);
                return;
            }
            
            LoadConfigFile(dataArray);
            
            setTimeout(LoadSettingsFile, 150);
        });
        
        JerryFlowWinterTheme(); // JerryFlow Winter theme
        JerryFlowHelloweenTheme(); // JerryFlow Helloween theme
    }, 150);
    
    /*setTimeout(() => { 
        if (fs.existsSync(userJsonPath) && fs.existsSync(signedUserJsonPath))
        {
            isGoogleOnline().then(isOnline => {
                if (isOnline) {
                    ResetOffline();
                    document.getElementById("CurrentState").textContent = 'Online';
                    document.getElementById("CurrentState").classList.remove('stateOFFLINE');
                    document.getElementById("CurrentState").classList.add('stateONLINE');
                    LogInToAccount();
                    
                    if (!PatternDword)
                        interfaceEntrypoint.evalScript(`sdg5zhsdg("sIn8hdfnn38Fnfg4ueiufujjssi844nnd", 0)`);
                } else {
                    var newCountUP = settingsData[0].lTry;
                    if (newCountUP <= 10) newCountUP += 1;
                    
                    var QuickMath = MathClamp(11 - newCountUP, 0, 11);
                    document.getElementById("CurrentState").textContent = 'Offline (' + QuickMath + " Logins remaining)";
                    SaveOffline(newCountUP);
                    if (newCountUP >= 11)
                        document.getElementById("OfflineScreen").style.marginLeft = '0%';
                    else
                        LogInToAccount();
                    
                    if (!PatternDword)
                        interfaceEntrypoint.evalScript(`sdg5zhsdg("kasFjsn848FBSAHfbhn48Bjsfk384SnfG", 0)`);
                }
            }).catch(error => {
                alert(error);
            });
        }
        else
        {
            isGoogleOnline().then(isOnline => {
                if (isOnline) {
                    ResetOffline();
                    document.getElementById("CurrentState").textContent = 'Online';
                    document.getElementById("CurrentState").classList.remove('stateOFFLINE');
                    document.getElementById("CurrentState").classList.add('stateONLINE');
                }
            }).catch(error => {
                alert(error);
            });
            
            backtoLogin();
        }
    }, 750);*/

    readSetGo();
    BluredBG.style.opacity = "0%";
    setTimeout(() => {  BluredBG.style.display = "none"; }, 501);
    OpenDashBoard();
    RegAndLog.style.marginLeft = "100%";
    document.getElementById("CurrentState").textContent = 'Online';
    document.getElementById("CurrentState").classList.remove('stateOFFLINE');
    document.getElementById("CurrentState").classList.add('stateONLINE');
    document.getElementById('CurrVersion').textContent = "2.3.1 (Release)";
}

// LogInOrRegAccount();
// ChangeLoginToReg();
CheckAndLoad();
copySupportTxt();

function monitorFPS() {
    let frameCount = 0;
    let minFPS = Infinity;
    let maxFPS = 0;
    let totalFrames = 0;
    let updateInterval = 2000;
    let lastUpdate = Date.now();
    
    function countFrame() {
        frameCount++;
        const now = Date.now();
        const delta = now - lastUpdate;
        
        if (now - lastSecond >= 1000) {
            fps = frameCount;
            
            document.getElementById("FPSCOUNTER").textContent = 'FPS: ' + fps;
            document.getElementById("FlappyJerryFPS").textContent = 'FPS: ' + fps;
            fps_animationCal = fps;
    
            totalFrames += frameCount;
            frameCount = 0;
            lastSecond = now - ((now - lastSecond) % 1000);
    
            if (fps < minFPS) minFPS = fps;
            if (fps > maxFPS) maxFPS = fps;
        }
        
        if (delta >= updateInterval) {
            let avgFPS = Number(totalFrames / 2).toFixed(0);
            let droppedFrames = maxFPS - minFPS;
    
            var getAfterEffectesDelay = document.getElementById("getAfterEffectesFrames");

            var getAfterEffectesMinAndMaxFrames = document.getElementById("getAfterEffectesMinAndMaxFrames");

            if (droppedFrames <= 0)
                getAfterEffectesDelay.textContent = 'FPS: ' + avgFPS + " | Dropped: 0";
            else
                getAfterEffectesDelay.textContent = 'FPS: ' + avgFPS + " | Dropped: " + droppedFrames;

            getAfterEffectesMinAndMaxFrames.textContent = 'Min: ' + minFPS + ' | Max: ' + maxFPS;
    
            minFPS = Infinity;
            maxFPS = 0;
            totalFrames = 0;
            lastUpdate = now;
        }
    
        requestAnimationFrame(countFrame);
    }
    
    let lastSecond = Date.now();
    requestAnimationFrame(countFrame);
}

function monitorGeneralDelay() {
    let frameTimestamp = performance.now();

    function checkDelay() {
        const taskStart = performance.now();
        let frameDelay = taskStart - frameTimestamp;

        var getAfterEffectesDelay = document.getElementById("getAfterEffectesDelay");
        var checkedTime = Math.abs(Number(999 - frameDelay.toFixed(2)).toFixed(2));
        getAfterEffectesDelay.textContent = `General delay: ${checkedTime} ms`;

        requestAnimationFrame(() => {
            frameTimestamp = performance.now();
            setTimeout(checkDelay, 999);
        });
    }

    checkDelay();
}

function getRightValueFromBitConverson() {
    const min = 0.8;
    const max = 1.2;
    return Math.random() * (max - min) + min;
}

function updateRamUsage() {
    if (performance.memory) {
        const usedHeapSizeGB = ((performance.memory.usedJSHeapSize / 1024 / 1024) * getRightValueFromBitConverson()).toFixed(2);
        //const usedHeapSizeGB = ((performance.memory.usedJSHeapSize / 1024 / 1024) * 3.33333).toFixed(2);
        //const usedHeapSizeGB = ((performance.memory.usedJSHeapSize / 1024 / 1024)).toFixed(2);
        document.getElementById('getJerryFlowUsage').textContent = `JerryFlow's RAM usage: ${usedHeapSizeGB}MB`;
    } else {
        document.getElementById('getJerryFlowUsage').textContent = 'Memory usage not available';
    }

    CurrentSession();
}

function convertSeconds(totalSeconds) {
    const hours = Math.floor(totalSeconds / 3600);
    const minutes = Math.floor((totalSeconds % 3600) / 60);
    const seconds = totalSeconds % 60;

    return {
        hours: hours,
        minutes: minutes,
        seconds: seconds
    };
}

// TODO: Current Session

function SaveSessionStatus()
{
    var CurrentSessionLmfao = Math.floor(Date.now() / 1000) - StartOfTheSession
    var newSession = settingsData[0].allSessionsBruh + CurrentSessionLmfao;
    loadAndModifySettings(async dataArray => {
        dataArray[0].allSessionsBruh = newSession;
    });
}

function CurrentSession()
{
    const time = convertSeconds(Math.floor(Date.now() / 1000) - StartOfTheSession);
    const timeAll = convertSeconds(settingsData[0].allSessionsBruh + Math.floor(Date.now() / 1000) - StartOfTheSession);

    if (Math.floor(Date.now() / 1000) - StartOfTheSession > 356399)
        document.getElementById('currentTimeSpend').textContent = `Current session: over 99 hours wtf??`;
    else
        document.getElementById('currentTimeSpend').textContent = `Current session: ${time.hours} hour, ${time.minutes} min, ${time.seconds} sec`;
    
    document.getElementById('alltimeTimeSpend').textContent = `You wasted: ${timeAll.hours} hour, ${timeAll.minutes} min, ${timeAll.seconds} sec`;
}

let updateRamUsage_Inverval;
let CurrentSession_Inverval;
let SaveSessionStatus_Inverval;

setTimeout(updateRamUsage, 50);
updateRamUsage_Inverval = setInterval(updateRamUsage, 1000);
monitorGeneralDelay();
monitorFPS();
// CurrentSession_Inverval = setInterval(CurrentSession, 1000);
SaveSessionStatus_Inverval = setInterval(SaveSessionStatus, 300000);

document.getElementById("Howtousethis").addEventListener("click", function() {
    if (GlobalsCurrentTab != 4) return;
    document.getElementById("HowToUseJerryFlowV2").style.marginLeft = "0%";
    document.getElementById("HowToUseJerryFlowV2").style.opacity = "100%";
    AddHowToVideos();
});

document.getElementById("closeHowTo").addEventListener("click", function() {
    document.getElementById("HowToUseJerryFlowV2").style.marginLeft = "100%";
    document.getElementById("HowToUseJerryFlowV2").style.opacity = "0%";
    setTimeout(RemoveHowToVideos, 250);
});

/*=====================================================================================
FLAPPY JERRY
=======================================================================================*/

const gameArea = document.getElementById('FlappyJ');
const bird = document.getElementById('bird');
let birdY = 25;
let velocity = 0;
const gravity = 0.07;
let gameActive = false;
let gameInterval;
let lastTime = 0;
const plusVelo = 1.2;
const tubeVelo = 0.8;
let score = 0;

function updateScoreDisplay() {
    if (document.getElementById("minigame_one").style.opacity === "0") return;
    document.getElementById('flappyJerryScore').textContent = `${score}`;
}

function updateHighScoreDisplay(score_to_check) {
    if (document.getElementById("minigame_one").style.opacity === "0") return;
    loadAndModifySettings(dataArray => {
        if (score_to_check > 0 && score_to_check > dataArray[0].fgurdiegf84r59gh8wsehgw9shg)
        {
            SendNotification("New Highscore!", true, true, false);
            document.getElementById('FlappyJerryTitle').textContent = `Flappy Jerry | Version 1.0.0 | HighScore: ${score_to_check}`;
            dataArray[0].fgurdiegf84r59gh8wsehgw9shg = score_to_check;
        }
    });
}

function spawnTube() {
    if (!gameActive) return;
    if (document.getElementById("minigame_one").style.opacity === "0") return;

    let volume = settingsData[0].gameOneVolume / 100;
    let gapHeight = Math.floor(Math.random() * (38 - 33 + 1) + 33);
    let tubeHeight = Math.random() * (60 - gapHeight) + 10;
    let tubeTop = document.createElement('div');
    if (document.getElementById('QuickNotes').value == '911')
        tubeTop.className = 'tubeSecret top';
    else
        tubeTop.className = 'tube top';
    tubeTop.style.height = `${tubeHeight}vh`;
    tubeTop.style.left = `100vh`;

    let tubeBottom = document.createElement('div');
    if (document.getElementById('QuickNotes').value == '911')
        tubeBottom.className = 'tubeSecret';
    else
        tubeBottom.className = 'tube';
    tubeBottom.style.height = `${90 - tubeHeight - gapHeight}vh`;
    tubeBottom.style.left = `108vh`;

    gameArea.appendChild(tubeTop);
    gameArea.appendChild(tubeBottom);

    let lastTubeTime = performance.now();
    function moveTube(time) {
        if (!gameActive) {
            tubeTop.remove();
            tubeBottom.remove();
            return;
        }

        const deltaTime = (time - lastTubeTime) / 16.67;
        lastTubeTime = time;

        let currentLeft = parseFloat(tubeTop.style.left);
        if (currentLeft <= -25) {
            tubeTop.remove();
            tubeBottom.remove();
        } else {
            tubeTop.style.left = `${currentLeft - tubeVelo * deltaTime}vh`;
            tubeBottom.style.left = `${currentLeft - tubeVelo * deltaTime}vh`;
            if (checkCollision(tubeTop, tubeBottom)) 
            {
                let bonkSound = document.getElementById('bonkSound');
                let volume = settingsData[0].gameOneVolume / 100;
                bonkSound.volume = volume;
                bonkSound.play();
                resetGame();
            }
            else if (currentLeft < 10 && !tubeTop.passed) {
                score++;
                if (!(score % 5))
                {
                    let scoreSound = document.getElementById('scoreSound2');
                    scoreSound.volume = volume;
                    scoreSound.play();
                }
                else
                {
                    let scoreSound = document.getElementById('scoreSound');
                    scoreSound.volume = volume;
                    scoreSound.play();
                }

                tubeTop.passed = true;
                updateScoreDisplay();
            }
            requestAnimationFrame(moveTube);
        }
    }

    requestAnimationFrame(moveTube);
}

function checkCollision(tubeTop, tubeBottom) {
    if (!gameActive) return false;
    if (document.getElementById("minigame_one").style.opacity === "0") return;

    let birdRect = bird.getBoundingClientRect();
    let topRect = tubeTop.getBoundingClientRect();
    let bottomRect = tubeBottom.getBoundingClientRect();
    let calcMiddleY_Top = birdRect.bottom - ((birdRect.bottom - birdRect.top) * 0.75);
    let calcMiddleY_Bottom = birdRect.bottom - ((birdRect.bottom - birdRect.top) * 0.25);

    let calcMiddleX_left = birdRect.right - ((birdRect.right - birdRect.left) * 0.75);
    let calcMiddleX_right = birdRect.right - ((birdRect.right - birdRect.left) * 0.25);

    return (calcMiddleX_right > topRect.left && calcMiddleX_left < topRect.right &&
            (calcMiddleY_Top < topRect.bottom || calcMiddleY_Bottom > bottomRect.top));
}

function resetGame() {
    updateHighScoreDisplay(score);
    velocity = 0;
    birdY = 35;
    bird.style.top = `${birdY}vh`;
    document.querySelectorAll('.tube').forEach(tube => tube.remove());
    document.querySelectorAll('.tubeSecret').forEach(tube => tube.remove());
    gameActive = false;
    clearInterval(gameInterval);
    gameInterval = null;
    lastTime = 0; 
    score = 0;
    bird.style.transform = `rotate(0deg)`;
    
    document.getElementById('flappyJerryScore').textContent = `Score -> ${score}`;
    document.getElementById('little_info').style.top = `50vh`;
}

function startGame() {
    if (document.getElementById("minigame_one").style.opacity === "0") return;
    if (!gameActive) {
        document.getElementById('little_info').style.top = `101vh`;
        gameActive = true;
        gameInterval = setInterval(spawnTube, 1250);
        velocity = -plusVelo;
        updateScoreDisplay();
    }
}

function updateGame(time) {
    if (!lastTime) lastTime = time;
    const deltaTime = (time - lastTime) / 16.67;
    lastTime = time;

    if (!gameActive && !gameInterval) {
        if (birdY > 35) velocity = -plusVelo;
    }

    velocity += gravity * deltaTime;
    birdY += velocity * deltaTime;
    var getRotation = (velocity * 11);
    bird.style.top = `${birdY}vh`;
    document.getElementById('flappyJerryScore').style.top = `${birdY}vh`;
    bird.style.transform = `rotate(${getRotation}deg)`;

    if (birdY <= 0) {
        bird.style.transform = `rotate(0deg)`;
        velocity = 0;
        birdY = 0;
    }

    if (gameActive && (birdY >= 80))
    {
        let bonkSound = document.getElementById('bonkSound');
        let volume = settingsData[0].gameOneVolume / 100;
        bonkSound.volume = volume;
        bonkSound.play();
        resetGame();
    }
    requestAnimationFrame(updateGame);
}

let whoosh = document.getElementById('upwhoosh');
function playWhooshSound() {
    let clone = whoosh.cloneNode();
    clone.volume = settingsData[0].gameOneVolume / 100;
    clone.play();

    clone.addEventListener('ended', function() {
        clone.remove();
    });
}

document.getElementById('FlappyJ').addEventListener('click', function() {
    if (GlobalsCurrentTab != 5) return;
    if (document.getElementById("minigame_one").style.opacity === "0") return;
    playWhooshSound();

    if (!gameActive) startGame();
    else  velocity = -plusVelo;
});

document.getElementById('FlappyJ').addEventListener('contextmenu', function() {
    if (GlobalsCurrentTab != 5) return;
    if (document.getElementById("minigame_one").style.opacity === "0") return;
    playWhooshSound();

    if (!gameActive) startGame();
    else  velocity = -plusVelo;
});

requestAnimationFrame(updateGame);

document.getElementById("JryMediaLogo").addEventListener("click", function() {
    if (GlobalsCurrentTab != 4) return;
    GlobalsCurrentTab = 5;
    document.getElementById("tab_1").style.opacity = "0%";
    document.getElementById("tab_2").style.opacity = "0%";
    document.getElementById("tab_3").style.opacity = "0%";
    document.getElementById("tab_4").style.opacity = "0%";
    document.getElementById("cc1").style.opacity = "0%";

    if (winterthemeEnabled)
        document.getElementById("bird").className = "birdcXmas";
    else if (helloweenthemeEnabled)
        document.getElementById("bird").className = "birdcHalloween";
    else
        document.getElementById("bird").className = "birdc";

    removeOldIcons_both();

    document.getElementById("minigame_one").style.transform = "scale(1)";
    document.getElementById("minigame_one").style.opacity = "100%";
    document.getElementById("flappyJerryBG").style.backgroundImage = 'url("resources/flappyjerrybg.jpg")';
    resetGame();
});

document.getElementById("closeMiniGame").addEventListener("click", function() {
    if (GlobalsCurrentTab != 5) return;
    GlobalsCurrentTab = 4;
    document.getElementById("tab_4").style.opacity = "100%";
    document.getElementById("cc1").style.opacity = "100%";
    

    document.getElementById("minigame_one").style.transform = "scale(0)";
    document.getElementById("minigame_one").style.opacity = "0%";

    document.getElementById("flappyJerryBG").style.backgroundImage = '';
    NavIconSwitch(4, settingsData[0].ui_disable_nav_icon_animation);
    resetGame();
});

function clearSesion(event)
{
    clearInterval(drawCurve_live2_Inverval);
    clearInterval(drawCurve_live_Inverval);
    clearInterval(RGB_MenuMode_Inverval);
    clearInterval(updateRamUsage_Inverval);
    clearInterval(SaveSessionStatus_Inverval);

    document.innerHTML = '';

    event.preventDefault();
    document.cookie.split(";").forEach(function(c){
        document.cookie = c.trim().split("=")[0] + '=;expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/';
    });

    localStorage.clear();
    location.reload();
}

function snmfJ48gns()
{
    document.addEventListener('keydown', function(event)
    {
        if (event.key === "F5")
        {
            clearSesion(event);
            E('nSHg7bgfbBsb4rzfB7bSb()');
        }
    });
}

snmfJ48gns();